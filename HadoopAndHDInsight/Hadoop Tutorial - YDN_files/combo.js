
/* module_ydn_header.js 1767180 */ YUI().use("node","event","yql","event-custom","json-parse","autocomplete","autocomplete-filters","autocomplete-highlighters","node-menunav",function(h){var d=h.one("body");if(d){d.addClass("yui3-skin-sam")}var e=[],g={},a,c={};var b=function(){h.each(a,function(o,n,p){var m=o.shortName;e.push(m);var l=o.serviceTags.split(",");h.each(l,function(s,r,q){if(h.Lang.trim(s).length>0){var t="tag:"+h.Lang.trim(s);if(!g[t]){g[t]=[]}g[t].push(m)}});c[m]=n});var j='<div class="api-result">';j+='  <a class="api-link" href="{api_url}" title="{api_name}">';j+='      <img class="api-icon" src="{icon_url}" alt="{api_name}"/>';j+="      <h3>{highlighted_name}{matched_tags}</h3>";j+="  </a>";j+='  <div class="api-links">{links_list}</div>';j+="</div>";var k=function(q,o){q=q.toLowerCase();var n=h.Array.filter(o,function(s){return(s.text.indexOf("tag:")==0)&&s.text.toLowerCase().indexOf(q)!==-1});var m=[];h.each(n,function(s){m=m.concat(g[s.text])});m=h.Array.hash(m,[]);var r=h.Array.filter(o,function(s){return((s.text.indexOf("tag:")===-1)&&s.text.toLowerCase().indexOf(q)!==-1)||(m[s.text]!==undefined)});var p=h.Array.filter(r,function(s){h.log(typeof(a[c[s.text]].isFeatured));return(a[c[s.text]].isFeatured=="true")});var l=h.Array.reject(r,function(s){return(a[c[s.text]].isFeatured=="true")});return p.concat(l)};var i=function(m,l){return h.Array.map(l,function(o){var s=c[o.text],n=a[s];var q="";var r=[],p="";if(n.shortName.toLowerCase().indexOf(m)===-1){h.each(n.serviceTags.split(","),function(t){if(t.toLowerCase().indexOf(m)!==-1){r.push(h.Highlight.all(t,m))}})}if(r.length!==0){p+='<span class="tags">Tags: '+r.toString()+"</span>"}return h.Lang.sub(j,{highlighted_name:o.display,api_name:n.name,matched_tags:p,icon_url:n.logo_22x22,api_url:n.landingPageURL,links_list:q})})};h.one("#ydn-search #search-box").plug(h.Plugin.AutoComplete,{resultHighlighter:"phraseMatch",resultFormatter:i,resultFilters:k,scrollIntoView:true,minQueryLength:2,maxResults:8,source:e.concat(h.Object.keys(g)),on:{select:function(m){var l=m.itemNode.one("a.api-link").get("href");window.location.href=l}}})};if(h.YQL){var f=new h.YQLRequest('use "store://xbPkhROu4vXFTyPdIfJnz8" as ydn.apis; select * from ydn.apis',function(i){if(i.query.results.json.status=="success"){a=i.query.results.json.data;b()}},{},{proto:"https"});f.send()}});