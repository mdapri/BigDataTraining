<!DOCTYPE html>
<!-- saved from url=(0055)https://cwiki.apache.org/confluence/display/Hive/Design -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	            <title>Design - Apache Hive - Apache Software Foundation</title>
    
        

                        
    
                        
    

                
    
    <meta http-equiv="X-UA-Compatible" content="IE=EDGE,chrome=IE7">
<meta charset="UTF-8">
<!-- Deprecated since 3.4. To be removed in a future version of Confluence; use AJS.Confluence.getContextPath() -->
<meta id="confluence-context-path" name="confluence-context-path" content="/confluence">
<meta id="confluence-base-url" name="confluence-base-url" content="https://cwiki.apache.org/confluence">

<meta id="atlassian-token" name="atlassian-token" content="6f1f980ef7697f442f0e186f433200458c2d09b5">

<meta id="confluence-space-key" name="confluence-space-key" content="Hive">
<script type="text/javascript">
    // Deprecated global variables. To be removed in a future version of Confluence.
    var contextPath = '/confluence';
</script>

    

<!-- include system css resources -->


    <!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/confluence/s/en_GB-1988229788/4109/76e0dbb30bc8580e459c201f3535d84f9283a9ac.1/39/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="./Design - Apache Hive - Apache Software Foundation_files/batch.css" media="print">
<link type="text/css" rel="stylesheet" href="./Design - Apache Hive - Apache Software Foundation_files/batch(1).css" media="all">
<!--[if gte IE 9]>
<link type="text/css" rel="stylesheet" href="/confluence/s/en_GB-1988229788/4109/76e0dbb30bc8580e459c201f3535d84f9283a9ac.1/39/_/download/superbatch/css/batch.css?conditionalComment=gte+IE+9" media="all">
<![endif]-->
<!--[if lte IE 8]>
<link type="text/css" rel="stylesheet" href="/confluence/s/en_GB-1988229788/4109/76e0dbb30bc8580e459c201f3535d84f9283a9ac.1/39/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+8" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/confluence/s/en_GB-1988229788/4109/76e0dbb30bc8580e459c201f3535d84f9283a9ac.1/39/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/confluence/s/en_GB-1988229788/4109/76e0dbb30bc8580e459c201f3535d84f9283a9ac.1/709a76d38b5ac561d0cef5a523e77410/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="./Design - Apache Hive - Apache Software Foundation_files/batch(2).css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/confluence/s/en_GB-1988229788/4109/76e0dbb30bc8580e459c201f3535d84f9283a9ac.1/017312f8c03fc008ec7f1f86c896d3d8/_/download/contextbatch/css/viewcontent/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="./Design - Apache Hive - Apache Software Foundation_files/batch(3).css" media="all">
<link type="text/css" rel="stylesheet" href="./Design - Apache Hive - Apache Software Foundation_files/batch(4).css" media="all">
<link type="text/css" rel="stylesheet" href="./Design - Apache Hive - Apache Software Foundation_files/batch(5).css" media="all">
<link type="text/css" rel="stylesheet" href="./Design - Apache Hive - Apache Software Foundation_files/org.randombits.confluence.toc-toc-plugin-styles.css" media="all">
<link type="text/css" rel="stylesheet" href="./Design - Apache Hive - Apache Software Foundation_files/com.atlassian.confluence.plugins.confluence-space-ia-spacesidebar.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/confluence/s/en_GB-1988229788/4109/76e0dbb30bc8580e459c201f3535d84f9283a9ac.1/5.0.3/_/download/batch/com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar/com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="./Design - Apache Hive - Apache Software Foundation_files/com.atlassian.mywork.mywork-confluence-host-plugin-mw-header-anchor.css" media="all">
<link type="text/css" rel="stylesheet" href="./Design - Apache Hive - Apache Software Foundation_files/colors.css" media="all">
<link type="text/css" rel="stylesheet" href="./Design - Apache Hive - Apache Software Foundation_files/default-theme.css" media="all">

<!-- end system css resources -->

    <meta name="confluence-request-time" content="1424860036145">
<!-- Deprecated since 3.4. To be removed in a future version of Confluence; use atl.header -->
        
            <script type="text/x-template" title="share-content-popup">
    <form action="#" method="post" class="aui share-content-popup">
        <div class="field-group">
            <div class="autocomplete-user-target">
                <input class="text autocomplete-sharepage" id="users" data-max="10" data-dropdown-target=".autocomplete-user-target" data-none-message="No matching user or email found" placeholder="User name or email"/>
            </div>
            <ol class="recipients">
            </ol>
        </div>
        <div class="field-group">
            <textarea class="textarea" id="note" placeholder="Add an optional note"/>
        </div>
        <div class="field-group button-panel">
            <div class="progress-messages-icon"></div>
            <div class="progress-messages">
            </div>
            <input class="button submit" type="submit" value="Share" disabled/>
            <a class="close-dialog" href="#">Cancel</a>
        </div>
    </form>
</script>

<script type="text/x-template" title="share-content-popup-recipient-username">
    <li data-username="{username}" style="display: none">
        <span>
            <img src="{thumbnailLink.href}" title="{title}">
            <span>{title}</span>
            <span class="remove-recipient"/>
        </span>
    </li>
</script>

<script type="text/x-template" title="share-content-popup-recipient-email">
    <li data-email="{email}" style="display: none">
        <span>
            <img src="{icon}" title="{email}">
            <span>{email}</span>
            <span class="remove-recipient"/>
        </span>
    </li>
</script>
    
        
            <meta name="ajs-use-keyboard-shortcuts" content="true">
            <meta name="ajs-keyboardshortcut-hash" content="930f70e51dda96d6cb148385abc89367">
            <meta name="gliffy-license-type" content="OPEN_SOURCE">
<meta name="gliffy-license-quantity" content="-1">

            <script type="text/x-template" title="gliffy-webpanel-footer">
        <div class="gliffy-webpanel-footer"><span>This Confluence installation runs a Free Gliffy License - Evaluate the <a href="http://www.gliffy.com/products/confluence-plugin/">Gliffy Confluence Plugin</a> for your Wiki!</span></div>
</script>


            <meta name="ap-request-id" content="1b9ad17b545ef508">
            <style>.ia-fixed-sidebar, .ia-splitter-left {width: 285px;}.theme-default .ia-splitter #main {margin-left: 285px;}.acs-side-bar {visibility: hidden;}</style>
            

    
            
    
    
            <meta name="ajs-page-id" content="27362072">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-page-title" content="Design">
            <meta name="ajs-parent-page-id" content="">
            <meta name="ajs-space-key" content="Hive">
            <meta name="ajs-space-name" content="Apache Hive">
            <meta name="ajs-from-page-title" content="">
            <meta name="ajs-browse-page-tree-mode" content="view">
            <meta name="ajs-editor.loader.comment.resources" content="&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;/confluence/s/en_GB-1988229788/4109/76e0dbb30bc8580e459c201f3535d84f9283a9ac.1/def88f1396f473dd83f398203309c7bb/_/download/contextbatch/css/comment-editor/batch.css&quot; media=&quot;all&quot;&gt;
">
            <meta name="ajs-context-path" content="/confluence">
            <meta name="ajs-base-url" content="https://cwiki.apache.org/confluence">
            <meta name="ajs-version-number" content="5.0.3">
            <meta name="ajs-build-number" content="4109">
            <meta name="ajs-remote-user" content="">
            <meta name="ajs-static-resource-url-prefix" content="/confluence/s/en_GB-1988229788/4109/76e0dbb30bc8580e459c201f3535d84f9283a9ac.1/_">
            <meta name="ajs-global-settings-attachment-max-size" content="20971520">
            <meta name="ajs-user-locale" content="en_GB">
            <meta name="ajs-enabled-dark-features" content="">
            <meta name="ajs-atl-token" content="6f1f980ef7697f442f0e186f433200458c2d09b5">
            <meta name="ajs-confluence-flavour" content="VANILLA">
            <meta name="ajs-editor.loader.resources" content="&lt;!--[if lt IE 9]&gt;
&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;/confluence/s/en_GB-1988229788/4109/76e0dbb30bc8580e459c201f3535d84f9283a9ac.1/e88e5c074267cd8662f3f09e5e5daf28/_/download/contextbatch/css/editor,fullpage-editor,macro-browser,-viewcontent/batch.css?conditionalComment=lt+IE+9&quot; media=&quot;all&quot;&gt;
&lt;![endif]--&gt;
&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;/confluence/s/en_GB-1988229788/4109/76e0dbb30bc8580e459c201f3535d84f9283a9ac.1/e88e5c074267cd8662f3f09e5e5daf28/_/download/contextbatch/css/editor,fullpage-editor,macro-browser,-viewcontent/batch.css&quot; media=&quot;all&quot;&gt;
&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;/confluence/s/en_GB-1988229788/4109/76e0dbb30bc8580e459c201f3535d84f9283a9ac.1/e88e5c074267cd8662f3f09e5e5daf28/_/download/contextbatch/css/editor,fullpage-editor,macro-browser,-viewcontent/batch.css?media=%28max-width%3A+1270px%29&quot; media=&quot;(max-width: 1270px)&quot;&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;/confluence/s/en_GB-1988229788/4109/76e0dbb30bc8580e459c201f3535d84f9283a9ac.1/e88e5c074267cd8662f3f09e5e5daf28/_/download/contextbatch/js/editor,fullpage-editor,macro-browser,-viewcontent/batch.js&quot; &gt;&lt;/script&gt;
">
            <meta name="ajs-date.format" content="MMM dd, yyyy">
    
    <link rel="shortcut icon" href="https://cwiki.apache.org/confluence/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://cwiki.apache.org/confluence/favicon.ico">

<link rel="search" type="application/opensearchdescription+xml" href="https://cwiki.apache.org/confluence/opensearch/osd.action" title="Apache Software Foundation">

    <!-- include system javascript resources -->
    <script type="text/javascript" src="./Design - Apache Hive - Apache Software Foundation_files/batch.js"></script>
<!--[if lte IE 8]>
<script type="text/javascript" src="/confluence/s/en_GB-1988229788/4109/76e0dbb30bc8580e459c201f3535d84f9283a9ac.1/39/_/download/superbatch/js/batch.js?conditionalComment=lte+IE+8" ></script>
<![endif]-->
<script type="text/javascript" src="./Design - Apache Hive - Apache Software Foundation_files/batch(6).js"></script><style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak{display:none;}ng\:form{display:block;}</style>
<script type="text/javascript" src="./Design - Apache Hive - Apache Software Foundation_files/batch(7).js"></script>
<script type="text/javascript" src="./Design - Apache Hive - Apache Software Foundation_files/batch(8).js"></script>
<script type="text/javascript" src="./Design - Apache Hive - Apache Software Foundation_files/batch(9).js"></script>
<script type="text/javascript" src="./Design - Apache Hive - Apache Software Foundation_files/com.atlassian.confluence.plugins.confluence-space-ia-soy-resources.js"></script>
<script type="text/javascript" src="./Design - Apache Hive - Apache Software Foundation_files/com.atlassian.confluence.plugins.editor-loader-background-loading-editor.js"></script>
<script type="text/javascript" src="./Design - Apache Hive - Apache Software Foundation_files/com.atlassian.confluence.plugins.confluence-space-ia-spacesidebar.js"></script>
<script type="text/javascript" src="./Design - Apache Hive - Apache Software Foundation_files/com.atlassian.mywork.mywork-confluence-host-plugin-mw-header-anchor.js"></script>

    

        
    <!-- end system javascript resources -->
    

    
                <link rel="canonical" href="./Design - Apache Hive - Apache Software Foundation_files/Design - Apache Hive - Apache Software Foundation.html">
        <link rel="shortlink" href="https://cwiki.apache.org/confluence/x/GIOhAQ">
    <meta name="wikilink" content="[Hive:Design]">
    <meta name="page-version" content="13">

</head>

<body onload="placeFocus()" id="com-atlassian-confluence" class="theme-default  aui-layout aui-theme-default">

        
    <ul id="assistive-skip-links" class="assistive">
    <li><a href="https://cwiki.apache.org/confluence/display/Hive/Design#title-heading">Skip to content</a></li>
    <li><a href="https://cwiki.apache.org/confluence/display/Hive/Design#breadcrumbs">Skip to breadcrumbs</a></li>
    <li><a href="https://cwiki.apache.org/confluence/display/Hive/Design#header-menu-bar">Skip to header menu</a></li>
    <li><a href="https://cwiki.apache.org/confluence/display/Hive/Design#navigation">Skip to action menu</a></li>
    <li><a href="https://cwiki.apache.org/confluence/display/Hive/Design#quick-search-query">Skip to quick search</a></li>
</ul>
<div id="page">
<div id="full-height-container">
    <div id="header-precursor">
        <div class="cell">
            <style type="text/css">
#preview #previewArea iframe {

   overflow: visible;
}
</style>

                            </div>
    </div>
    



<header id="header" role="banner">
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation"><div class="aui-header-inner"><div class="aui-header-before"><a class="aui-dropdown2-trigger app-switcher-trigger" aria-owns="app-switcher" aria-haspopup="true" tabindex="0"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a><div id="app-switcher" class="aui-dropdown2 aui-style-default"><div class="aui-dropdown2-section"><ul class="nav-links"><li class="nav-link nav-link-local"><a href="https://cwiki.apache.org/confluence/" class="aui-dropdown2-radio interactive checked" title="https://cwiki.apache.org/confluence/"><span class="nav-link-label">Apache Software Foundation</span></a></li><li class="nav-link"><a href="https://issues.apache.org/jira" class="aui-dropdown2-radio interactive" title="https://issues.apache.org/jira"><span class="nav-link-label">ASF Jira</span></a></li></ul></div></div><script>
            (function (NL) {
                var initialise = function () {
                    // For some milestones of AUI, the atlassian soy namespace was renamed to aui. Handle that here by ensuring that window.atlassian is defined.
                    window.atlassian = window.atlassian || window.aui;
                    new NL.AppSwitcher({
                        dropdownContents: '#app-switcher'
                    });
                };
                if (NL.AppSwitcher) {
                    initialise();
                } else {
                    NL.onInit = initialise;
                }
            }(window.NL = (window.NL || {})));
            window.NL.isUserAdmin = false</script></div><div class="aui-header-primary"><h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://cwiki.apache.org/confluence/dashboard.action"><img src="./Design - Apache Hive - Apache Software Foundation_files/confluence-logo.png" alt="Apache Software Foundation"></a></h1><ul class="aui-nav">
                            <li>
            
        
        
<a id="space-directory-link" href="https://cwiki.apache.org/confluence/spacedirectory/view.action" class=" aui-nav-imagelink" title="Spaces">
            <span>Spaces</span>
    </a>
        </li>
                        </ul>
</div><div class="aui-header-secondary"><ul class="aui-nav">
                <li>
<form id="quick-search" class="aui-quicksearch dont-default-focus" action="https://cwiki.apache.org/confluence/dosearchsite.action" method="get">
    <fieldset>
                        <label for="quick-search-query" class="assistive">Quick Search</label>
        <input id="quick-search-query" class="text app-search search quick-search-query" type="text" accesskey="q" autocomplete="off" name="queryString" title="Quick Search (/)" placeholder="Search">
        <input id="quick-search-submit" class="quick-search-submit" type="submit" value="Search">

        <div class="aui-dd-parent quick-nav-drop-down"></div>
    </fieldset>
    <div class="hidden parameters">
                    <!-- putMetadata failed to add value for key "quick-nav-enabled" so rendering metadata inline - see server debug log for details -->
        <meta name="ajs-quick-nav-enabled" content="true">
                </div>
</form>
</li>
    <li>    
        <a id="help-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="https://cwiki.apache.org/confluence/display/Hive/Design#" aria-haspopup="true" aria-owns="help-menu-link-content" title="Help">
        <span class="aui-icon aui-icon-small aui-iconfont-help">Help</span><span class="aui-icon-dropdown"></span>
    </a>
    <nav id="help-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                <ul id="help-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
    
        
<a id="confluence-help-link" href="http://docs.atlassian.com/confluence/docs-50/Getting+Help+And+Support" class="interactive" title="Visit the Confluence documentation home" target="_blank">
        Online Help
</a>
</li>
                                            <li>
    
        
<a id="keyboard-shortcuts-link" href="https://cwiki.apache.org/confluence" class="interactive" title="View available keyboard shortcuts (?)">
        Keyboard Shortcuts
</a>
</li>
                                            <li>
    
        
<a id="feed-builder-link" href="https://cwiki.apache.org/confluence/dashboard/configurerssfeed.action" class="interactive" title="Create your custom RSS feed.">
        Feed Builder
</a>
</li>
                                            <li>
    
        
<a id="whats-new-menu-link" href="http://docs.atlassian.com/confluence/docs-50/whatsnew/iframe" class="interactive" title="">
        What’s new
</a>
</li>
                                            <li>
    
        
<a id="gadget-directory-link" href="https://cwiki.apache.org/confluence" class="user-item administration-link  interactive" title="Browse gadgets provided by Confluence">
        Available Gadgets
</a>
</li>
                                    </ul>
            </div>
            </nav>
    </li>
    <li>    
    </li>
                <li>                                    </li><li>
    
        
<a id="login-link" href="https://cwiki.apache.org/confluence/login.action?os_destination=%2Fdisplay%2FHive%2FDesign" class="   user-item login-link " title="">
        Log In
</a>
</li>
                        <li>
    
        
<a id="signup-link" href="https://cwiki.apache.org/confluence/signup.action" class="   user-item signup-link " title="">
        Sign Up
</a>
</li>
                        
</ul>
</div></div><!-- .aui-header-inner--></nav><!-- .aui-header -->
    <br class="clear">
</header>

    
    	<div class="ia-splitter">
    		<div class="ia-splitter-left">
    			<div class="ia-fixed-sidebar" style="width: 285px; top: 41px; left: 0px;">
    				
	    	<div class="acs-side-bar ia-scrollable-section" style="visibility: visible;"><div class="acs-side-bar-space-info tipsy-enabled" data-configure-tooltip="Edit Space Details"><div class="avatar"><div class="space-logo " data-key="Hive" data-name="Apache Hive" data-entity-type="confluence.space"><div class="avatar-img-container"><div class="avatar-img-wrapper"><a href="https://cwiki.apache.org/confluence/display/Hive" title="Apache Hive"><img class="avatar-img" src="./Design - Apache Hive - Apache Software Foundation_files/Hive" alt="Apache Hive"></a></div></div></div></div><div class="name"><a href="https://cwiki.apache.org/confluence/display/Hive" title="Apache Hive">Apache Hive</a></div><div class="flyout-handle icon"></div></div><div class="acs-nav-wrapper"><div class="acs-nav"><div class="acs-nav-sections"><div class="main-links-section "><ul class="acs-nav-list"><li class="acs-nav-item wiki current-item" data-collector-key="spacebar-pages"><a class="acs-nav-item-link tipsy-enabled" href="https://cwiki.apache.org/confluence/collector/pages.action?key=Hive" data-collapsed-tooltip="Pages"><span class="icon"></span><span class="acs-nav-item-label">Pages</span></a></li><li class="acs-nav-item blog" data-collector-key="spacebar-blogs"><a class="acs-nav-item-link tipsy-enabled" href="https://cwiki.apache.org/confluence/pages/viewrecentblogposts.action?key=Hive" data-collapsed-tooltip="Blog"><span class="icon"></span><span class="acs-nav-item-label">Blog</span></a></li></ul></div><hr><div class="advanced-links-section tipsy-enabled " data-collapsed-tooltip="Space tools"><ul class="acs-nav-list"><li class="acs-nav-item settings" data-collector-key="spacebar-advanced"><a class="acs-nav-item-link tipsy-enabled" href="https://cwiki.apache.org/confluence/spaces/spacetools.action?key=Hive" data-collapsed-tooltip="Space tools"><span class="icon"></span><span class="acs-nav-item-label">Space tools</span></a></li></ul></div></div></div></div><div class="ia-secondary-container tipsy-enabled" data-tree-type="pages" data-collapsed-tooltip="Child pages"><hr><div class="ia-secondary-header"><h5 class="ia-secondary-header-title wiki current-item"><span class="icon"></span><span class="label">Design</span></h5></div><div class="ia-secondary-content"></div></div><div class="hidden"><a href="https://cwiki.apache.org/confluence/collector/pages.action?key=Hive" id="space-pages-link" title=" (g , s)"></a><script type="text/x-template" title="logo-config-content"><h2>Space Details</h2><form id="crop-photo-form" class="aui" method="post" action="#"><div id="sidebar-logo-messages"></div><fieldset><div class="field-group"><label for="spaceName">Name</label><input autocomplete="off" name="spaceName" id="spaceName" class="text" maxlength="255" value="{spaceName}"><input type="hidden" name="spaceKey" id="spaceKey" value="Hive"><input type="hidden" name="offsetX" id="avatar-offsetX" value="-1"><input type="hidden" name="offsetY" id="avatar-offsetY" value="-1"><input type="hidden" name="width" id="avatar-width" value="-1"><input type="hidden" name="logoType" id="logoType" value="custom" data-last-value="custom"></div></fieldset></form><form id="upload-logo-form" class="aui" method="POST" action="#" enctype="multipart/form-data"><fieldset class="group"><legend><span>Logo</span></legend><div class="field-group"><input class="upload" type="file" id="upload-logo-input" name="upload-logo-input"></div><small ><a href="#" id="reset-logo">Reset to default logo</a></small><div id="image-holder" /></fieldset></form><div id="space-details-actions" class="buttons-container"><div class="buttons"><button class="aui-button save">Save</button><a href="#" class="aui-button aui-button-link cancel">Cancel</a></div></div></script></div></div>
    
    			<div class="ia-splitter-handle tipsy-enabled" data-tooltip="Collapse sidebar ( &#39;[&#39; )" title=" ([)"><div class="ia-splitter-handle-highlight"></div></div></div>
    		</div>
        <!-- \#header -->

        
        <div id="main" class=" aui-page-panel" style="margin-left: 285px;">
                <div id="main-header">
            
    <div id="navigation" class="content-navigation view">
                    <ul class="ajs-menu-bar">
                                    
                    
        <li class="normal ajs-menu-item">
        <a id="action-menu-link" class="action ajs-menu-title aui-dropdown2-trigger" href="https://cwiki.apache.org/confluence/display/Hive/Design#" aria-haspopup="true" aria-owns="action-menu" data-container="#navigation"><span><span>Tools</span></span></a>         <div id="action-menu" class="aui-dropdown2 aui-style-default most-right-menu-item">
                            <ul id="action-menu-primary" class="section-primary first aui-dropdown2-section">
                                            <li>

    
        
    
    <a id="view-attachments-link" href="https://cwiki.apache.org/confluence/pages/viewpageattachments.action?pageId=27362072" class="action-view-attachments" accesskey="t" title="View Attachments (t)">
                <span>A<u>t</u>tachments (1)</span>    </a>
</li>
                                        <li>

    
        
    
    <a id="action-view-history-link" href="https://cwiki.apache.org/confluence/pages/viewpreviousversions.action?pageId=27362072" class="action-view-history" title="">
                <span>Page History</span>    </a>
</li>
                                        <li>

    
        
    
    <a id="action-page-permissions-link" href="https://cwiki.apache.org/confluence/pages/viewinfo.action?pageId=27362072" class="action-page-permissions" title="Edit restrictions">
                <span>Restrictions</span>    </a>
</li>
                                </ul>
                            <ul id="action-menu-secondary" class="section-secondary aui-dropdown2-section">
                                            <li>

    
        
    
    <a id="view-page-info-link" href="https://cwiki.apache.org/confluence/pages/viewinfo.action?pageId=27362072" class="action-view-info" title="">
                <span>Page Information</span>    </a>
</li>
                                        <li>

    
        
    
    <a id="link-to-page-link" href="https://cwiki.apache.org/confluence/pages/viewinfo.action?pageId=27362072" class="" title="Link to this Page (k)">
                <span>Link to this Page…</span>    </a>
</li>
                                        <li>

    
        
    
    <a id="view-in-hierarchy-link" href="https://cwiki.apache.org/confluence/pages/reorderpages.action?key=Hive&openId=27362072#selectedPageInHierarchy" class="" title="">
                <span>View in Hierarchy</span>    </a>
</li>
                                        <li>

    
        
    
    <a id="action-view-source-link" href="https://cwiki.apache.org/confluence/plugins/viewsource/viewpagesrc.action?pageId=27362072" class="action-view-source popup-link" title="">
                <span>View Source</span>    </a>
</li>
                                        <li>

    
        
    
    <a id="action-export-pdf-link" href="https://cwiki.apache.org/confluence/spaces/flyingpdf/pdfpageexport.action?pageId=27362072" class="" title="">
                <span>Export to PDF</span>    </a>
</li>
                                        <li>

    
        
    
    <a id="com-k15t-confluence-scroll-epub-launcher" href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=27362072" class="" title="">
                <span>Export to EPUB</span>    </a>
</li>
                                        <li>

    
        
    
    <a id="action-export-word-link" href="https://cwiki.apache.org/confluence/exportword?pageId=27362072" class="action-export-word" title="">
                <span>Export to Word</span>    </a>
</li>
                                </ul>
                            <ul id="action-menu-modify" class="section-modify aui-dropdown2-section">
                                            <li>

    
        
    
    <a id="treecopy-action" href="https://cwiki.apache.org/confluence/plugins/treecopy/setnames.action?pageId=27362072" class="" title="">
                <span>Copy Page Tree</span>    </a>
</li>
                                </ul>
                    </div>
    </li>
            </ul>
    </div>

            
            <h1 id="title-heading" class="pagetitle with-breadcrumbs">
                
                                    <div id="breadcrumb-section">
                        
    
    
    <ol id="breadcrumbs">
                    
                
        <li class="first">
                

                    <span class=""><a href="https://cwiki.apache.org/confluence/collector/pages.action?key=Hive">Pages</a></span>
                </li></ol>


                    </div>
                
                <span id="title-text" class="with-breadcrumbs">
                                                <a href="./Design - Apache Hive - Apache Software Foundation_files/Design - Apache Hive - Apache Software Foundation.html">Design</a>
                                    </span>
            </h1>
        </div><!-- \#main-header -->
        
        

        <div id="sidebar-container">
                                                </div><!-- \#sidebar-container -->

        
    

                                                                                                                                                                                                                                                                                                                                                                                                                                                                      




        

    
    
        
    
    
                    
    

    




<div id="content" class="page view">
    

<div id="action-messages">
                        </div>



    
<script type="text/x-template" title="movePageDialog">
    <div class="row information">
        <div class="inner">
            <div class="element">
                Specify the new parent page for this page and its children by space and title.
            </div>
        </div>
    </div>
        <form class="aui" onsubmit="return false;">
	        <fieldset>
	                

    <legend class="assistive"><span>Change the Parent Page to a Known Page</span></legend>
	            <div class="field-group">
	                <label for="new-space">New space:</label>
	                <div class="value new-space-value">
	                    <input id="new-space-key" name="new-space-key" type="hidden" value="Hive">
	                    	                        <span class="space-input">
	                            <input id="new-space" name="new-space" value="Apache Hive" disabled="disabled" class="text long-field">
	                        </span>
                            <div class="description warning">You cannot move this page to another space because you do not have permission to remove it from this space.</div>
	                    	                    <div class="new-space-dropdown aui-dd-parent autocomplete"></div>
	                </div>
	            </div>
	            <div class="field-group">
	                <label for="new-parent-page">New parent page:</label>
	                <div class="value new-parent-page-value">
	                    <span class="page-input">
	                        <input id="new-parent-page" name="new-parent-page" value="" class="text long-field">
	                    </span>
                        <div class="description">Start typing a page title to see a list of suggestions.</div>
	                    <div class="new-parent-page-dropdown aui-dd-parent autocomplete"></div>
	                </div>
	            </div>
	        </fieldset>
        </form>
    <div class="location-info">
        <div class="row">
            <label>Current location:</label>
            <div class="value breadcrumbs-container">
                <div class="breadcrumbs-line">
                    <ul id="current-parent-breadcrumbs" class="breadcrumbs">
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <label>New location:</label>
            <div class="value breadcrumbs-container">
                <div class="breadcrumbs-line">
                    <ul id="new-parent-breadcrumbs" class="breadcrumbs">
                    </ul>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/x-template" title="movePageSearchPanel">
    <div class="row information">
        <div class="inner">
            <div class="element">
                Search for and select the new parent page for this page and its children.
            </div>
        </div>
    </div>
    <div id="move-page-search-container" class="row">
	        <form class="aui" onsubmit="return false;">
	            <fieldset>
	                    

    <legend class="assistive"><span>Search for a New Parent Page</span></legend>
	                    

    <label  for="move-page-search-query" class="assistive">Search keywords</label>
	                <input class="search-query text" id="move-page-search-query">
	                    

    <label  for="move-page-search-space" class="assistive">Search in space</label>
	                	                    <select id="move-page-search-space" class="search-space select" disabled="disabled">
	                        <option value="Hive" selected="selected">Apache Hive</option>
	                    </select>
	                	                <input type="button" value="Search" class="button submit">
	                	                    <div class="description warning">You cannot move this page to another space because you do not have permission to remove it from this space.</div>
	                	            </fieldset>
	        </form>
        <div class="search-results">
        </div>
    </div>
</script>
<script type="text/x-template" title="searchResultsGrid">
    <table class="aui">
        <thead>
            <tr class="header">
                <th class="search-result-title">Page Title</th>
                <th class="search-result-space">Space</th>
                <th class="search-result-date">Updated</th>
            </tr>
        </thead>
    </table>
</script>
<script type="text/x-template" title="searchResultsGridCount">
    <p class="search-result-count">{0}</p>
</script>
<script type="text/x-template" title="searchResultsGridRow">
    <tr class="search-result">
        <th class="search-result-title"><a href="{1}" class="content-type-{2}"><span>{0}</span></a></th>
        <td class="search-result-space"><a class="space" href="/confluence/display/{4}/" title="{3}">{3}</a></td>
        <td class="search-result-date"><span class="date" title="{6}">{5}</span></td>
    </tr>
</script><!-- Start restrictions section -->
<script type="text/x-template" title="page-permissions-div">
<div id="page-permissions-div">
    <div id="page-permissions-editor-form">
                <div id="page-permissions-error-div" class="aui-message warning shadowed closeable hidden">
            <p class="title"/>
            <span class="aui-icon icon-warning"></span>
            <span class="aui-icon icon-close" tabindex="0" role="button"></span>
        </div>
                <div id="page-permissions-type-radios" class="page-permissions-label-rows">
            <div class="radio">
                <input id="restrictViewRadio" class="radio" type="radio" checked="checked" name="pagePermissionTypeRadio" value="view"/>
                <label for="restrictViewRadio">Restrict viewing of this page</label>
                <input id="restrictEditRadio" class="radio" type="radio" name="pagePermissionTypeRadio" value="edit"/>
                <label for="restrictEditRadio">Restrict editing of this page</label>
            </div>
        </div>
        <div id="page-permissions-input" class="page-permissions-label-rows">
            <div class="page-permissions-label">To:</div>
            <div id="page-permissions-chooser-box">
                                <span id="page-permissions-choose-user" class="aui-button">
                    


    
    






<a id='userpicker-popup-link'  href='#' onClick="var picker = window.open('/confluence/spaces/openuserpicker.action?key=Hive&amp;startIndex=0&amp;onPopupSubmit=AJS.PagePermissions.addUserPermissions', 'EntitiesPicker', 'status=yes,resizable=yes,top=100,left=200,width=700,height=680,scrollbars=yes'); picker.focus(); return false;">
    				    <img src="/confluence/s/en_GB-1988229788/4109/76e0dbb30bc8580e459c201f3535d84f9283a9ac.1/_/images/icons/user_16.png" height=16 width=16 border=0 align="absmiddle"  title="Choose users" />
						    Person...
	        </a>


                </span>
                <span id="page-permissions-choose-group" class="aui-button">
                    


    
    

 




<a id='grouppicker-popup-link'  href='#' onClick="var picker = window.open('/confluence/spaces/opengrouppicker.action?key=Hive&amp;startIndex=0&amp;actionName=dosearchgroups.action&amp;onPopupSubmit=AJS.PagePermissions.addGroupPermissions', 'EntitiesPicker', 'status=yes,resizable=yes,top=100,left=200,width=580,height=550,scrollbars=yes'); picker.focus(); return false;">
    				    <img src="/confluence/s/en_GB-1988229788/4109/76e0dbb30bc8580e459c201f3535d84f9283a9ac.1/_/images/icons/group_16.png" height=16 width=16 border=0 align="absmiddle"  title="Choose groups" />
						    Group...
	        </a>


                </span>
            </div>
            <div id="page-permissions-input-box">
                <input id="page-permissions-names-input" class="autocomplete-user text" type="text" name="permissionNames"
                    placeholder="Enter user or group name:"
                    data-max="10" data-none-message="No matches"
                    data-target="#page-permissions-names-hidden" data-template="{username}"
                    data-dropdown-target="#page-perms-name-dropdown-wrapper" data-resize-to-input="true"
                    size="30"/>
                <input
    type="hidden"
                            id="page-permissions-names-hidden"           />                <button class="aui-button" id="add-typed-names">Restrict</button>
                <div id="page-perms-name-dropdown-wrapper" class="aui-dd-parent autocomplete autocomplete-user-target"></div>
            </div>
        </div>
    </div>
    <div id="page-permissions-tables">
        <div id="page-permissions-table-div">
                        <table id="page-permissions-table" class="page-permissions-table">
                <tr id="page-permissions-no-views" class="marker-row">
                    <td colspan="3" class="page-permissions-marker-cell">
                            <span class="aui-icon aui-icon-small aui-iconfont-view"></span>
                        <span>No view restrictions are defined for this page</span>
                    </td>
                </tr>
                <tr id="page-permissions-no-edits" class="marker-row">
                    <td colspan="3" class="page-permissions-marker-cell">
                            <span class="aui-icon aui-icon-small edit-icon"></span>
                        <span>No edit restrictions are defined for this page</span>
                    </td>
                </tr>
            </table>
        </div>
        <div id="page-inherited-permissions-table-div" class="hidden">
            <span id="page-inherited-permissions-table-desc">
                <a class="icon twisty-closed">Show/Hide</a>
                <a id="toggle-inherited-permissions" title="Click to see inherited restrictions">This page has restricted parent pages. It can only be seen by users who can see those parent pages.</a>
            </span>
            <div id="page-inherited-permissions-tables" class="hidden page-inheritance-togglable"></div>
        </div>
    </div>
</div>
</script>

<!-- End restrictions section -->

        
    
            
                            
    

                    

        
        <a href="https://cwiki.apache.org/confluence/display/Hive/Design#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
                            <li class="page-metadata-item noprint">

    
            
    
    <a id="content-metadata-page-restrictions" href="https://cwiki.apache.org/confluence/display/Hive/Design#" class="page-metadata-icon page-restrictions hidden" title="Page restrictions apply. Click the lock icon to view or edit the restriction.">
                <span>Page restrictions apply</span>    </a>
</li>
                            <li class="page-metadata-item noprint">

    
        
    
    <a id="content-metadata-attachments" href="https://cwiki.apache.org/confluence/pages/viewpageattachments.action?pageId=27362072&metadataLink=true" class="page-metadata-icon action-view-attachments" accesskey="t" title="Attachments: 1">
                <span><span class="page-metadata-attachments-text">Attachments:</span><span class="page-metadata-attachments-count">1</span></span>    </a>
</li>
                        <li class="page-metadata-modification-info">
                                    Added by <a href="https://cwiki.apache.org/confluence/display/~admin" class="url fn">Confluence Administrator</a>, last edited by <a href="https://cwiki.apache.org/confluence/display/~leftyl" class="url fn">Lefty Leverenz</a> on Oct 29, 2014
                                                                <span class="noprint">&nbsp;(<a id="view-change-link" href="https://cwiki.apache.org/confluence/pages/diffpages.action?pageId=27362072&originalId=47384952">view change</a>)</span>
                                                </li>
                            <li class="show-hide-comment-link">
                    <a id="show-version-comment" class="inline-control-link" href="https://cwiki.apache.org/confluence/display/Hive/Design#">show comment</a>
                    <a id="hide-version-comment" class="inline-control-link" style="display:none;" href="https://cwiki.apache.org/confluence/display/Hive/Design#">hide comment</a>
                </li>
                    </ul>
                <div id="version-comment" class="noteMacro" style="display: none;">
        <strong>Comment:</strong>
        add correlation optimizer; unable to fix indentation of Optimizer section (reformatting will fix that)<br>
    </div>
        </div>


<a href="https://cwiki.apache.org/confluence/display/Hive/Design#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>
        
                                
        <div id="main-content" class="wiki-content">
                           <p>This page contains details about the Hive design and architecture. A brief technical report about Hive is available at <span class="error">[^hive.pdf]</span>. </p>

<style type="text/css">/*<![CDATA[*/
div.rbtoc1424860036748 {padding: 0px;}
div.rbtoc1424860036748 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1424860036748 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class="toc-macro rbtoc1424860036748">
<ul class="toc-indentation">
<li><a href="https://cwiki.apache.org/confluence/display/Hive/Design#Design-HiveArchitecture">Hive Architecture</a></li>
<li><a href="https://cwiki.apache.org/confluence/display/Hive/Design#Design-HiveDataModel">Hive Data Model</a></li>
<li><a href="https://cwiki.apache.org/confluence/display/Hive/Design#Design-Metastore">Metastore</a>
<ul class="toc-indentation">
<li><a href="https://cwiki.apache.org/confluence/display/Hive/Design#Design-Motivation">Motivation</a></li>
<li><a href="https://cwiki.apache.org/confluence/display/Hive/Design#Design-MetadataObjects">Metadata Objects</a></li>
<li><a href="https://cwiki.apache.org/confluence/display/Hive/Design#Design-MetastoreArchitecture">Metastore Architecture</a></li>
<li><a href="https://cwiki.apache.org/confluence/display/Hive/Design#Design-MetastoreInterface">Metastore Interface</a></li>
</ul>
</li>
<li><a href="https://cwiki.apache.org/confluence/display/Hive/Design#Design-HiveQueryLanguage">Hive Query Language</a></li>
<li><a href="https://cwiki.apache.org/confluence/display/Hive/Design#Design-Compiler">Compiler</a></li>
<li><a href="https://cwiki.apache.org/confluence/display/Hive/Design#Design-Optimizer">Optimizer</a></li>
<li><a href="https://cwiki.apache.org/confluence/display/Hive/Design#Design-Execution">Execution</a></li>
<li><a href="https://cwiki.apache.org/confluence/display/Hive/Design#Design-Conclusion">Conclusion</a></li>
</ul>
</div>

<p>Figure 1<br>
<span class="image-wrap" style=""><img src="./Design - Apache Hive - Apache Software Foundation_files/system_architecture.png" style="border: 0px solid black"></span></p>
<h2><a name="Design-HiveArchitecture"></a>Hive Architecture</h2>
<p>Figure 1 shows the major components of Hive and its interactions with Hadoop. As shown in that figure, the main components of Hive are: </p>
<ul>
	<li>UI – The user interface for users to submit queries and other operations to the system. As of 2011 the system had a command line interface and a web based GUI was being developed.</li>
	<li>Driver – The component which receives the queries. This component implements the notion of session handles and provides execute and fetch APIs modeled on JDBC/ODBC interfaces.</li>
	<li>Compiler – The component that parses the query, does semantic analysis on the different query blocks and query expressions and eventually generates an execution plan with the help of the table and partition metadata looked up from the metastore.</li>
	<li>Metastore – The component that stores all the structure information of the various tables and partitions in the warehouse including column and column type information, the serializers and deserializers necessary to read and write data and the corresponding HDFS files where the data is stored.</li>
	<li>Execution Engine – The component which executes the execution plan created by the compiler. The plan is a DAG of stages. The execution engine manages the dependencies between these different stages of the plan and executes these stages on the appropriate system components.</li>
</ul>


<p>Figure 1 also shows how a typical query flows through the system. The UI calls the execute interface to the Driver (step 1 in Figure 1). The Driver creates a session handle for the query and sends the query to the compiler to generate an execution plan (step 2). The compiler gets the necessary metadata from the metastore (steps 3 and 4). This metadata is used to typecheck the expressions in the query tree as well as to prune partitions based on query predicates. The plan generated by the compiler (step 5) is a DAG of stages with each stage being either a map/reduce job, a metadata operation or an operation on HDFS. For map/reduce stages, the plan contains map operator trees (operator trees that are executed on the mappers) and a reduce operator tree (for operations that need reducers). The execution engine submits these stages to appropriate components (steps 6, 6.1, 6.2 and 6.3). In each task (mapper/reducer) the deserializer associated with the table or intermediate outputs is used to read the rows from HDFS files and these are passed through the associated operator tree. Once the output is generated, it is written to a temporary HDFS file though the serializer (this happens in the mapper in case the operation does not need a reduce). The temporary files are used to provide data to subsequent map/reduce stages of the plan. For DML operations the final temporary file is moved to the table's location. This scheme is used to ensure that dirty data is not read (file rename being an atomic operation in HDFS). For queries, the contents of the temporary file are read by the execution engine directly from HDFS as part of the fetch call from the Driver (steps 7, 8 and 9).</p>

<h2><a name="Design-HiveDataModel"></a>Hive Data Model</h2>

<p>Data in Hive is organized into:</p>
<ul>
	<li>Tables – These are analogous to Tables in Relational Databases. Tables can be filtered, projected, joined and unioned. Additionally all the data of a table is stored in a directory in HDFS. Hive also supports the notion of external tables wherein a table can be created on prexisting files or directories in HDFS by providing the appropriate location to the table creation DDL. The rows in a table are organized into typed columns similar to Relational Databases.</li>
	<li>Partitions – Each Table can have one or more partition keys which determine how the data is stored, for example a table T with a date partition column ds had files with data for a particular date stored in the &lt;table location&gt;/ds=&lt;date&gt; directory in HDFS. Partitions allow the system to prune data to be inspected based on query predicates, for example a query that is interested in rows from T that satisfy the predicate T.ds = '2008-09-01' would only have to look at files in &lt;table location&gt;/ds=2008-09-01/ directory in HDFS.</li>
	<li>Buckets – Data in each partition may in turn be divided into Buckets based on the hash of a column in the table. Each bucket is stored as a file in the partition directory. Bucketing allows the system to efficiently evaluate queries that depend on a sample of data (these are queries that use the SAMPLE clause on the table).</li>
</ul>


<p>Apart from primitive column types (integers, floating point numbers, generic strings, dates and booleans), Hive also supports arrays and maps. Additionally, users can compose their own types programmatically from any of the primitives, collections or other user-defined types. The typing system is closely tied to the SerDe (Serailization/Deserialization) and object inspector interfaces. User can create their own types by implementing their own object inspectors, and using these object inspectors they can create their own SerDes to serialize and deserialize their data into HDFS files). These two interfaces provide the necessary hooks to extend the capabilities of Hive when it comes to understanding other data formats and richer types. Builtin object inspectors like ListObjectInspector, StructObjectInspector and MapObjectInspector provide the necessary primitives to compose richer types in an extensible manner. For maps (associative arrays) and arrays useful builtin functions like size and index operators are provided. The dotted notation is used to navigate nested types, for example a.b.c = 1 looks at field c of field b of type a and compares that with 1.</p>

<h2><a name="Design-Metastore"></a>Metastore</h2>
<h3><a name="Design-Motivation"></a>Motivation</h3>
<p>The Metastore provides two important but often overlooked features of a data warehouse: data abstraction and data discovery. Without the data abstractions provided in Hive, a user has to provide information about data formats, extractors and loaders along with the query. In Hive, this information is given during table creation and reused every time the table is referenced. This is very similar to the traditional warehousing systems. The second functionality, data discovery, enables users to discover and explore relevant and specific data in the warehouse. Other tools can be built using this metadata to expose and possibly enhance the information about the data and its availability. Hive accomplishes both of these features by providing a metadata repository that is tightly integrated with the Hive query processing system so that data and metadata are in sync.</p>

<h3><a name="Design-MetadataObjects"></a>Metadata Objects</h3>
<ul>
	<li>Database – is a namespace for tables. It can be used as an administrative unit in the future. The database 'default' is used for tables with no user-supplied database name.</li>
	<li>Table – Metadata for a table contains list of columns, owner, storage and SerDe information. It can also contain any user-supplied key and value data. Storage information includes location of the underlying data, file inout and output formats and bucketing information. SerDe metadata includes the implementation class of serializer and deserializer and any supporting information required by the implementation. All of this information can be provided during creation of the table.</li>
	<li>Partition – Each partition can have its own columns and SerDe and storage information. This facilitates schema changes without affecting older partitions.</li>
</ul>


<h3><a name="Design-MetastoreArchitecture"></a>Metastore Architecture</h3>
<p>Metastore is an object store with a database or file backed store. The database backed store is implemented using an object-relational mapping (ORM) solution called the <a href="http://www.datanucleus.org/" class="external-link" rel="nofollow">DataNucleus</a>. The prime motivation for storing this in a relational database is queriability of metadata. Some disadvantages of using a separate data store for metadata instead of using HDFS are synchronization and scalability issues. Additionally there is no clear way to implement an object store on top of HDFS due to lack of random updates to files. This, coupled with the advantages of queriability of a relational store, made our approach a sensible one.</p>

<p>The metastore can be configured to be used in a couple of ways: remote and embedded. In remote mode, the metastore is a <a href="https://thrift.apache.org/" class="external-link" rel="nofollow">Thrift</a> service. This mode is useful for non-Java clients. In embedded mode, the Hive client directly connects to an underlying metastore using JDBC. This mode is useful because it avoids another system that needs to be maintained and monitored. Both of these modes can co-exist. (Update: Local metastore is a third possibility. See <a href="https://cwiki.apache.org/confluence/display/Hive/AdminManual+MetastoreAdmin" class="external-link" rel="nofollow">Hive Metastore Administration</a> for details.)</p>

<h3><a name="Design-MetastoreInterface"></a>Metastore Interface</h3>
<p>Metastore provides a <a href="https://thrift.apache.org/docs/idl" class="external-link" rel="nofollow">Thrift interface</a> to manipulate and query Hive metadata. Thrift provides bindings in many popular languages. Third party tools can use this interface to integrate Hive metadata into other business metadata repositories.</p>

<h2><a name="Design-HiveQueryLanguage"></a>Hive Query Language</h2>
<p>HiveQL is an SQL-like query language for Hive. It mostly mimics SQL syntax for creation of tables, loading data into tables and querying the tables. HiveQL also allows users to embed their custom map-reduce scripts. These scripts can be written in any language using a simple row-based streaming interface – read rows from standard input and write out rows to standard output. This flexibility comes at a cost of a performance hit caused by converting rows from and to strings. However, we have seen that users do not mind this given that they can implement their scripts in the language of their choice. Another feature unique to HiveQL is multi-table insert. In this construct, users can perform multiple queries on the same input data using a single HiveQL query. Hive optimizes these queries to share the scan of the input data, thus increasing the throughput of these queries several orders of magnitude. We omit more details due to lack of space.  For a more complete description of the HiveQL language see the <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual" class="external-link" rel="nofollow">language manual</a>.</p>

<h2><a name="Design-Compiler"></a>Compiler</h2>
<ul>
	<li>Parser – Transform a query string to a parse tree representation.</li>
	<li>Semantic Analyser – Transform the parse tree to an internal query representation, which is still block based and not an operator tree. As part of this step, the column names are verified and expansions like * are performed. Type-checking and any implicit type conversions are also performed at this stage. If the table under consideration is a partitioned table, which is the common scenario, all the expressions for that table are collected so that they can be later used to prune the partitions which are not needed. If the query has specified sampling, that is also collected to be used later on.</li>
	<li>Logical Plan Generator – Convert the internal query representation to a logical plan, which consists of a tree of operators. Some of the operators are relational algebra operators like 'filter', 'join' etc. But some of the operators are Hive specific and are used later on to convert this plan into a series of map-reduce jobs. One such operator is a reduceSink operator which occurs at the map-reduce boundary. This step also includes the optimizer to transform the plan to improve performance – some of those transformations include: converting a series of joins into a single multi-way join, performing a map-side partial aggregation for a group-by, performing a group-by in 2 stages to avoid the scenario when a single reducer can become a bottleneck in presence of skewed data for the grouping key. Each operator comprises a descriptor which is a serializable object.</li>
	<li>Query Plan Generator – Convert the logical plan to a series of map-reduce tasks. The operator tree is recursively traversed, to be broken up into a series of map-reduce serializable tasks which can be submitted later on to the map-reduce framework for the Hadoop distributed file system. The reduceSink operator is the map-reduce boundary, whose descriptor contains the reduction keys. The reduction keys in the reduceSink descriptor are used as the reduction keys in the map-reduce boundary. The plan consists of the required samples/partitions if the query specified so. The plan is serialized and written to a file.<br>
&nbsp;
<h2><a name="Design-Optimizer"></a>Optimizer</h2>
More plan transformations are performed	by the optimizer. The optimizer	is an evolving component. As of 2011, it was rule-based and performed the following: column pruning and predicate pushdown. However, the infrastructure was in place, and there was work under progress to include other optimizations like map-side join.&nbsp;(Hive 0.11 added several <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+JoinOptimization" class="external-link" rel="nofollow">join optimizations</a>.)<br>
&nbsp;<br>
The optimizer can be enhanced to be cost-based (see <a href="https://cwiki.apache.org/confluence/display/Hive/Cost-based+optimization+in+Hive" class="external-link" rel="nofollow">Cost-based optimization in Hive</a> and <a href="https://issues.apache.org/jira/browse/HIVE-5775" class="external-link" rel="nofollow">HIVE-5775</a>). The sorted nature of output tables can also be preserved and used later on to generate better plans. The query can be performed on a small sample of data to guess the data distribution, which can be used to generate a better plan.<br>
&nbsp;<br>
A <a href="https://cwiki.apache.org/confluence/display/Hive/Correlation+Optimizer" class="external-link" rel="nofollow">correlation optimizer</a> was added in Hive 0.12.<br>
&nbsp;<br>
The plan is a generic operator tree, and can be easily manipulated.<br>
&nbsp;
<h2><a name="Design-Execution"></a>Execution</h2>
<h2><a name="Design-Conclusion"></a>Conclusion</h2></li>
</ul>
    
        </div>

        <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://cwiki.apache.org/confluence/display/Hive/Design"
    dc:identifier="https://cwiki.apache.org/confluence/display/Hive/Design"
    dc:title="Design"
    trackback:ping="https://cwiki.apache.org/confluence/rpc/trackback/27362072"/>
</rdf:RDF>
-->

                        
    



<div id="likes-and-labels-container"><div id="likes-section"><span class="like-summary"><a href="https://cwiki.apache.org/confluence/display/~dpavankumarreddy" class="confluence-userlink userlink-0" data-username="dpavankumarreddy" title="" data-user-hover-bound="true">d pavan kumar reddy</a> likes this</span></div><div id="labels-section" class="pageSection group">
    <div class="labels-editor">
        <span id="labels-section-title" class="label-title">Labels</span>
        <div class="labels-section-content content-column" entityid="27362072" entitytype="page">
	<div class="labels-content">
		
<ul class="label-list label-list-right">
    <li class="no-labels-message-container">
        <span id="labels-section-title-none" class="no-labels-message">
            No labels
        </span>
    </li>
        </ul>
    </div>
</div>    </div>
</div></div>
        
		
            




            
    








                    
    
<div id="comments-section" class="pageSection group">
    
    
    
    
            <div class="bottom-comment-panels comment-panels">
                                    
    


    
            </div>
    
    </div>


            
</div>


    




    
    

    
    
    







    </div><!-- \#main -->
        
    
        
            <div id="footer" style="margin-left: 285px;">

    <section class="footer-body">

                                                <p class="license license-opensource">
                  Powered by a free <b>Atlassian Confluence Open Source Project License</b> granted to Apache Software Foundation. <a href="http://www.atlassian.com/c/conf/11461">Evaluate Confluence today</a>.<br>
                </p>
                        
    

    
        <div class="gliffy-webpanel-footer"><span>This Confluence installation runs a Free Gliffy License - Evaluate the <a href="http://www.gliffy.com/products/confluence-plugin/">Gliffy Confluence Plugin</a> for your Wiki!</span></div>
<ul id="poweredby">
        <li class="noprint">Powered by <a href="http://www.atlassian.com/software/confluence" class="hover-footer-link">Atlassian Confluence</a> <span id="footer-build-information">5.0.3</span>, <a href="http://www.atlassian.com/software/confluence/overview/team-collaboration-software?utm_source=confluence-footer" class="hover-footer-link">Team Collaboration Software</a></li>
        <li class="print-only">Printed by Atlassian Confluence 5.0.3, Team Collaboration Software.</li>
        <li class="noprint"><a href="http://jira.atlassian.com/secure/BrowseProject.jspa?id=10470" class="hover-footer-link">Report a bug</a></li>
        <li class="noprint"><a href="http://www.atlassian.com/about/connected.jsp?s_kwcid=Confluence-stayintouch" class="hover-footer-link">Atlassian News</a></li>
    </ul>

    

            
    
    </section>

</div>

    
</div>

</div><!-- \#full-height-container -->
</div><!-- \#page -->


<div id="fancybox-tmp"></div><div id="fancybox-loading"><div></div></div><div id="fancybox-overlay"></div><div id="fancybox-wrap"><div id="fancybox-outer"><div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div><div id="fancybox-content"></div><a id="fancybox-close"></a><div id="fancybox-title"></div><a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a><a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a></div></div><div id="content-hover-shadow" style="display: none;"><div class="tl"></div><div class="tr"></div><div class="l"></div><div class="r"></div><div class="bl"></div><div class="br"></div><div class="b"></div></div><div id="fileuploadShim" style="position: relative; z-index: 0;"></div><div id="p19f04djg71l6d1tl4krh1391cgj0_html5_container" class="plupload html5" style="position: absolute; width: 1583px; height: 0px; overflow: hidden; z-index: -1; opacity: 0; top: 2943px; left: 0px; background: transparent;"><input id="p19f04djg71l6d1tl4krh1391cgj0_html5" style="font-size: 999px; position: absolute; width: 100%; height: 100%;" type="file" accept="" multiple="multiple"></div><div id="content-hover-0" class="ajs-content-hover"><div class="contents" style="width: 300px;"></div></div></body></html>