<!DOCTYPE html>
<!-- saved from url=(0103)http://hadoopsdk.codeplex.com/wikipage?title=Example%20Map-Reduce%20program&referringTitle=Map%2fReduce -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" class="Chrome" prefix="og: http://ogp.me/ns# profile: http://ogp.me/ns/profile#"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta id="CompatabilityMode" http-equiv="X-UA-Compatible" content="IE=edge">
	    
        <link href="./Microsoft .NET SDK For Hadoop - Documentation_files/StyleSheet.ashx" id="MasterCss" rel="stylesheet" type="text/css">
        <link rel="SHORTCUT ICON" href="http://www.codeplex.com/favicon.ico">
        <title>Microsoft .NET SDK For Hadoop - Documentation</title>
        
        <!--
        Third party scripts and code linked to or referenced from this website are licensed to you by the parties that own such code,
        not by Microsoft.  See ASP.NET Ajax CDN Terms of Use â€“ http://www.asp.net/ajaxlibrary/CDN.ashx.
        -->
        <script type="text/javascript" src="./Microsoft .NET SDK For Hadoop - Documentation_files/ai.js" async=""></script><script src="./Microsoft .NET SDK For Hadoop - Documentation_files/jquery-1.4.4.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            if (typeof jQuery === 'undefined') {
                document.write(unescape("%3Cscript src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>

        <script src="./Microsoft .NET SDK For Hadoop - Documentation_files/jquery-ui.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            if (typeof jQuery.ui === 'undefined') {
                document.write(unescape("%3Cscript src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>

        
            <script type="text/javascript">
                var appInsights = { queue: [], start: function (n) { function r(n, t) { n[t] = function () { var i = arguments; n.queue.push(function () { n[t].apply(n, i) }) } } var t, i; this.applicationInsightsId = n; this.accountId = null; this.appUserId = null; r(this, "logEvent"); r(this, "logPageView"); t = document.createElement("script"); t.type = "text/javascript"; t.src = "//az416426.vo.msecnd.net/scripts/ai.js"; t.async = !0; i = document.getElementsByTagName("script")[0]; i.parentNode.insertBefore(t, i) } };
                appInsights.start("f5504185-cb9a-4174-95ba-928e1ac1492c");
                
                appInsights.logPageView();
            </script>
        
    <style type="text/css">.SideBar, .SideBarPadding{display:none;}.MainContent{width:auto;}.SiteContentTable{width:100%;}</style>
    <style id="ProjectStyles" type="text/css">
        .SiteHeader, .SiteHeaderLeft {
            height:45px !important;
            overflow:hidden;
        }
        .SiteContent 
        {
            padding: 0 0 1em 0;
            margin-top:0;
            min-height:225px;
            border-right: 1px solid lightgrey;
            border-left: 1px solid lightgrey;
            border-bottom: 1px solid lightgrey;
        }
        .IE table.MinWidthContent
        {
	        table-layout: auto !important;	
        }
    </style>
    
    
    <style type="text/css">.ProjectContent{padding:0;}</style>
    <style type="text/css">
        .WikiHolder
        {
            margin: 0 1em 0 0;
        }
        #WikiContent
        {
            margin-top: 15px;
        }
        #WikiBreadCrumbs
        {
            margin: 0.25em 0 1em 0;
        }
        .SecondarySearchButton 
        {
            margin:0 0 0 -0.6em;
        }
        .FF .SecondarySearchButton 
        {
            margin:-0.1em 0 0 -0.5em;
            height: 22px;
        }
        .IE .SecondarySearchButton
        {
            width: 22px;
            height: 22px;
        }
    </style>
    
    
    
    
    <meta id="WTProjectName" name="WT.pi" content="hadoopsdk">
    

    <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://hadoopsdk.codeplex.com/rsd">
    <link rel="wlwmanifest" type="application/wlwmanifest+xml" title="WLWManifest" href="http://hadoopsdk.codeplex.com/wlwmanifest.xml">
    
    
        <link rel="alternate" type="application/rss+xml" title="Microsoft .NET SDK For Hadoop" url="http://hadoopsdk.codeplex.com/project/feeds/rss">
    
        
        <link rel="alternate" type="application/rss+xml" title="Microsoft .NET SDK For Hadoop - Discussions" url="http://hadoopsdk.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fforum%2fhadoopsdk">
        
        <link rel="alternate" type="application/rss+xml" title="Microsoft .NET SDK For Hadoop - Issues" url="http://hadoopsdk.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fworkitem%2fhadoopsdk">
        
        <link rel="alternate" type="application/rss+xml" title="Microsoft .NET SDK For Hadoop - Downloads" url="http://hadoopsdk.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2frelease%2fhadoopsdk">
        <link rel="alternate" type="application/rss+xml" title="Microsoft .NET SDK For Hadoop - Reviews" url="http://hadoopsdk.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2freview%2fhadoopsdk">
        
    
        <link rel="alternate" type="application/rss+xml" title="Microsoft .NET SDK For Hadoop - Source code" url="http://hadoopsdk.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fsourcecontrol%2fhadoopsdk">
        <link rel="alternate" type="application/rss+xml" title="Microsoft .NET SDK For Hadoop - Wiki" url="http://hadoopsdk.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fwiki%2fhadoopsdk">
    
        
    
        <meta content="summary" name="twitter:card"><meta content="@CodePlex" name="twitter:site"><meta content="http://hadoopsdk.codeplex.com/wikipage?title=Example Map-Reduce program&amp;referringTitle=Map/Reduce&amp;ProjectName=hadoopsdk" name="twitter:url"><meta content="Microsoft .NET SDK For Hadoop" name="twitter:title"><meta content="A collection of API&amp;#39;s, tools and samples for using .NET with Apache Hadoop." name="twitter:description"><meta content="http://www.codeplex.com/Images/codeplex.png" name="twitter:image"><meta content="CodePlex" property="og:site_name"><meta content="http://hadoopsdk.codeplex.com/wikipage?title=Example Map-Reduce program&amp;referringTitle=Map/Reduce&amp;ProjectName=hadoopsdk" property="og:url"><meta content="object" property="og:type"><meta content="Microsoft .NET SDK For Hadoop" property="og:title"><meta content="A collection of API&amp;#39;s, tools and samples for using .NET with Apache Hadoop." property="og:description"><meta content="http://www.codeplex.com/Images/codeplex.png" property="og:image">
        

    </head>
    
    <body>
        <script src="./Microsoft .NET SDK For Hadoop - Documentation_files/ScriptLoader.ashx" type="text/javascript"></script>
        <form id="aspnetForm" autocomplete="off" method="POST" enctype="multipart/form-data">
            <input name="__RequestVerificationToken" type="hidden" value="FC2qitWBxHq45DSuhf1FoK-hnoDEuKU0n-V_5EL-zo2nSW4xsRwbXEBc4o7SJT7ffu9s2WgpQ9stGBZeCA4iQ-GoaQ4gKQ258cuoo8gJ9qbedC9B-zWV5sdYmymUJQTCo5yZ4g2"><input name="__RequestVerificationToken2" type="hidden" value="__RequestVerificationToken21cd68a64-83e8-4b88-b16f-4e36018d4637">
            
            
            
            <div style="display:none;">
                
                <img id="BlankImage" style="width:0;height:0;" src="./Microsoft .NET SDK For Hadoop - Documentation_files/blank.png" onload="self.logoImageLoaded=true;">

                <script language="javascript" type="text/javascript">
                    var date = new Date();
                    var timezoneOffset = date.getTimezoneOffset() / 60 * -1;
                    var timezoneOffsetCookie = getCookie("TimezoneOffset");
                    var firstTimeSetTimezoneCookie = false;

                    if (timezoneOffsetCookie == null || timezoneOffsetCookie != timezoneOffset) {
                        firstTimeSetTimezoneCookie = true;
                        document.cookie = "TimezoneOffset=" + timezoneOffset + '; domain=.codeplex.com;expires=gio, 11 feb 2016 08:49:21 UTC';
                    }
                </script>
                
                
                    <noscript>
                        &lt;a href="http://www.omniture.com" title="Web Analytics"&gt;&lt;img src="http://msstonojstemp.112.2O7.net/b/ss/msstonojstemp/1/H.20.2--NS/0" height="1" width="1" border="0" alt="" /&gt;&lt;/a&gt;
                    </noscript>
                
            </div>
            
            <div id="header">
                <div id="header_wrap" class="row">
                    <p id="logo"><a href="http://www.codeplex.com/">Code<span class="semi">Plex</span></a><span id="tagline">Project Hosting for Open Source Software</span></p>
                    

<ul id="nav">

    <li><a href="http://hadoopsdk.codeplex.com/site/register/new" id="registerLink" class="ZoomFix">Register</a></li>
    <li><a class="SignInLink" href="https://www.codeplex.com/site/login?RedirectUrl=http%3a%2f%2fhadoopsdk.codeplex.com%2fwikipage%3ftitle%3dExample%2520Map-Reduce%2520program%26referringTitle%3dMap%252fReduce" id="signInLink">Sign In</a></li>
  
    <li class="last"><a class="rss_site_icon" href="http://www.codeplex.com/site/feeds/rss" type="application/rss+xml" rel="Alternate" title="CodePlex Site Activity"></a></li>
</ul>
                    <input id="searchsite" name="searchsite" maxlength="500" type="text" value="" autocomplete="off" title="Search all projects" style="color: rgb(170, 170, 170); font-style: italic;"><span id="search_mag"><a id="submitSearch" name="submitSearch" class="magnify" title="Search all projects" href="http://hadoopsdk.codeplex.com/wikipage?title=Example%20Map-Reduce%20program&referringTitle=Map%2fReduce#"></a></span>
                    <script>
	$(document).ready(function() {
    var searchButton = $('#submitSearch'),
        searchBar = $('#searchsite');

    // Register our own handler for the search event while we wait for the SearchBox script to load.
    searchButton.bind('click.backupSearchBox', doProjectSearch);
    searchBar.bind('keypress.backupSearchBox', function(e) { if ($keyCode(e) === 13) { doProjectSearch(); return false; } });

    function cleanupSearchEvents() {
        // If the SearchBox was loaded, unregister our handlers.
        if (epx_loaded) {
            searchButton.unbind('.backupSearchBox');
            searchBar.unbind('.backupSearchBox');
        }
    }

    $loadScript('http://i4.services.social.microsoft.com/search/Widgets/SearchBox.jss?appid=1000&scopeid=1&boxId=searchsite&btnId=submitSearch&watermark=Search%20all%20projects&overrideWatermark=true&searchLocation=%2fsite%2fsearch&allowEmptySearch=true&focusOnInit=False&minimumTermLength=3', cleanupSearchEvents);
})
function doProjectSearch() {
    
    var url = '/site/search';

    //If search term is not same as watermark
    if($('#searchsite').val() != 'Search all projects')    
    {        
        url = url + '?query=' + encodeURIComponent($('#searchsite').val());
    }

    
    var callback = '';
    if (callback.length > 0 && eval('typeof ' + callback) != 'undefined')
        url += eval(callback + '()');

    window.location.href = url;
    return false;
}
</script>
                <div id="SearchFlyoutContainer" style="display: none; text-align: left; border: 1px solid buttonshadow; position: absolute; z-index: 1000; padding: 2px; color: rgb(122, 132, 142); font-family: &#39;Segoe UI&#39;, &#39;Microsoft Sans Serif&#39;, Arial, Geneva, sans-serif; font-size: 13.0080003738403px; background-color: rgb(255, 255, 255);"><div id="SuggestionContainer"><ul style="list-style: none; padding: 4px 2px 0px 1px; cursor: pointer; margin: 1px; white-space: nowrap;"></ul></div></div></div>
            </div>
            
            <div id="wrap">
                
    <div id="sub_heading" class="row">
        
        <div id="ProjectHeader">
            <div id="project_title_row" class="row">
                <div id="project_logo">
                    
    
    <h1 class="text_only"><a href="http://hadoopsdk.codeplex.com/" id="ProjectTitle1"><div>Microsoft .NET SDK For Hadoop</div></a></h1>

                </div>
            </div>
        </div>
        
        <div id="ProjectDetailsDiv">
            
        </div>
		<div class="clear"></div>
        

<ul id="page_box_links">
	<li id="homeTabCell" style="width: 75px;"><a id="homeTab" href="http://hadoopsdk.codeplex.com/" class="box_home">home</a><div></div></li>
    
	<li id="sourceTabCell" style="width: 125px;"><a id="sourceTab" href="http://hadoopsdk.codeplex.com/SourceControl/latest" class="box_source">source code</a><div></div></li>
    
	<li id="releasesTabCell" style="width: 117px;"><a id="releasesTab" href="http://hadoopsdk.codeplex.com/releases" class="box_downloads">downloads</a><div></div></li>
    
    <li id="documentationTabCell" style="width: 155px;"><a id="documentationTab" href="http://hadoopsdk.codeplex.com/documentation" class="documentation_active">documentation</a><div></div></li>
    
	<li id="discussionTabCell" style="width: 124px;"><a id="discussionTab" href="http://hadoopsdk.codeplex.com/discussions" class="box_discussions">discussions</a><div></div></li>
    
	<li id="workItemsTabCell" style="width: 82px;"><a id="workItemsTab" href="http://hadoopsdk.codeplex.com/workitem/list/basic" class="box_issue">issues</a><div></div></li>
    
	<li id="peopleTabCell" style="width: 82px;"><a id="peopleTab" href="http://hadoopsdk.codeplex.com/team/view" class="box_people">people</a><div></div></li>
	<li id="licenseTabCell" style="width: 82px;" class="last"><a id="licenseTab" href="http://hadoopsdk.codeplex.com/license" class="box_license">license</a><div></div></li>
    
    <span class="stretch"></span>
</ul>

<script type="text/javascript">
    $(document).ready(function () {
        $('#page_box_links').applyLastClassToList();
    });
</script>
		    <div class="clear"></div>
            
    <div id="DeleteWikiPagePanel" class="modal" style="display: none;">
        <div class="row">
            <h2>Are you Sure? <a href="javascript:return false;" class="close">X</a></h2>
        </div>
        <div class="modal_info">
            By clicking Delete, all history, comments and attachments for this page will be deleted and cannot be restored.
            <div class="modal_buttons">
                <input type="button" id="CancelButton" class="cancel" value="Cancel">
                <input type="button" id="DeleteButton" class="ok" value="Delete">
            </div>
            <div class="ClearBoth"></div>
        </div>
    </div>
    
    <div id="homepage_sub_menu">
		<ul class="page_box_sublinks">
            
                <li><a id="pageInfoHyperLink" href="http://hadoopsdk.codeplex.com/wiki/PageInfo?title=Example%20Map-Reduce%20program" title="Page information for Example Map-Reduce program page.">Page Info</a></li>
            
            <li class="last"><a id="changesHyperlink" href="http://hadoopsdk.codeplex.com/wikipage/history" title="View change history for all pages.">Change History (all pages)</a></li>
		</ul>
        

<div>
    
    <div id="actionBar" class="action_bar">
        <ul id="actionBar_ul" class="actionBar_sublinks subtab_right" style="vertical-align: middle;">

            

                <li id="li_actionbar_followproject" data-action-id="actionbar_followproject" data-action-type="None" class="actionBar_sublinks" data-options-id="a44e136e-e78f-433f-8e35-f0eff5bb0558">
                
                     
                    
                    <div class="actionBar_custom_content"></div>

                    <a href="http://hadoopsdk.codeplex.com/wikipage?title=Example%20Map-Reduce%20program&referringTitle=Map%2fReduce#" id="actionbar_followproject" title="Follow this project to get updates in your activity stream." class="action_bar_item_link"><img id="img_actionbar_followproject" class="action_bar_item_image" src="./Microsoft .NET SDK For Hadoop - Documentation_files/actionbar_follow.png" style="vertical-align: middle"> Follow (248)</a>

                </li>

            

                <li id="li_actionbar_subscribe" data-action-id="actionbar_subscribe" data-action-type="PopUp" class="actionBar_sublinks last" data-options-id="059eaa3c-b6aa-46d1-9997-e50f18ff92fe">
                
                    <script class="options" defer="defer" id="059eaa3c-b6aa-46d1-9997-e50f18ff92fe" type="application/json">{}</script> 
                    
                    <div class="actionBar_custom_content">

<div id="rssHoverDiv" class="HoverPanel LeftHoverWidth" style="display: none">
        <ul id="3_FeedsPanel" class="RssFeedsPanel">
            <li>
                <a id="ProjectRssLink" href="http://hadoopsdk.codeplex.com/project/feeds/rss" class="ArrowSmall NoUnderline">All Project Updates</a>
            </li>
            
            <li>
                <a id="DiscussionRssLink" href="http://hadoopsdk.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fforum%2fhadoopsdk" class="ArrowSmall NoUnderline">Discussions</a>
            </li>
            
            <li>
                <a id="IssueTrackerRssLink" href="http://hadoopsdk.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fworkitem%2fhadoopsdk" class="ArrowSmall NoUnderline">Issue Tracker</a>
            </li>
            
            <li>
                <a id="ReleasesRssLink" href="http://hadoopsdk.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2frelease%2fhadoopsdk" class="ArrowSmall NoUnderline">Downloads</a>
            </li>
            <li>
                <a id="ReviewsRssLink" href="http://hadoopsdk.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2freview%2fhadoopsdk" class="ArrowSmall NoUnderline">Reviews</a>
            </li>
            
            <li>
                <a id="SourceControlRssLink" href="http://hadoopsdk.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fsourcecontrol%2fhadoopsdk" class="ArrowSmall NoUnderline">Source Code</a>
            </li>
            <li>
                <a id="WikiRssLink" href="http://hadoopsdk.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fwiki%2fhadoopsdk" class="ArrowSmall NoUnderline">Wiki &amp; Documentation</a>
            </li>
        </ul>
</div></div>

                    <a href="http://hadoopsdk.codeplex.com/wikipage?title=Example%20Map-Reduce%20program&referringTitle=Map%2fReduce#" id="actionbar_subscribe" title="Subscribe to project updates in RSS feeds." class="action_bar_item_link">
                        <img id="img_actionbar_subscribe" class="action_bar_item_image" src="./Microsoft .NET SDK For Hadoop - Documentation_files/actionbar_subscribe.png" style="vertical-align: middle">
                        Subscribe
                    </a>

                </li>

            
        </ul>
    </div>
</div>
        <div class="clear"></div>
    </div>
    
        

    </div>
    
    
    
<div id="left_column" class="no_border">
    
        <p id="breadcrumbs" style="margin-left: 10px">
            
                <a href="http://hadoopsdk.codeplex.com/documentation">Documentation</a>
                
                    <img src="./Microsoft .NET SDK For Hadoop - Documentation_files/arrow_sm.gif" alt="Go" style="margin-top: 5px">
                
                <a href="http://hadoopsdk.codeplex.com/wikipage?title=Map%2fReduce">Map/Reduce</a>
                
                    <img src="./Microsoft .NET SDK For Hadoop - Documentation_files/arrow_sm.gif" alt="Go" style="margin-top: 5px">
                
                <a href="http://hadoopsdk.codeplex.com/wikipage?title=Example%20Map-Reduce%20program">Example Map-Reduce program</a>
                
        </p>
    

    <div class="WikiHolder">

        
            <div id="WikiContent" class="WikiContent">
                
<div class="wikidoc">
<h1>Example Map-Reduce program</h1>
A .NET map-reduce 'program' comprises a number of parts:<br>
<br>
1. A job definition. This declares the `MapperType`, `ReducerType`, `CombinerType` and configuration settings<br>
<br>
2. Mapper, Reducer and Combiner classes<br>
<br>
3. Input data. Typically staged to HDFS or Azure Storage prior to job execution. The most common approach is via the Hadoop file-system utility. For example,<br>
<br>
<blockquote><span class="codeInline">&gt; hadoop fs -copyFromLocal localFile input/folder/file
</span></blockquote>
<br>
4. A job-executor. This can either be the `MRRunner.exe` that is part of the API distribution, or by creating a Main() function in your .NET application that invokes `HadoopJobExecutor`.<br>
<br>
To create a mapper-only job:<br>
<br>
1. Create a new C# project and reference `Microsoft.Hadoop.MapReduce.DLL`. <br>
<br>
2. Create a class the implements `HadoopJob&lt;FirstMapper&gt;`.<br>
<br>
3. Create a class called `FirstMapper` that implements `MapperBase`.<br>
<br>
For example, the following is a complete map-reduce 'program' that consumes files containing integers and produces output that includes `sqrt(x)` for each input value.<br>
<br>
<pre>    public class FirstJob : HadoopJob&lt;SqrtMapper&gt;
    {
        public override HadoopJobConfiguration Configure(ExecutorContext context)
        {
            HadoopJobConfiguration config = new HadoopJobConfiguration();
            config.InputPath = "input/SqrtJob";
            config.OutputFolder = "output/SqrtJob";
            return config;
        }
    }

    public class SqrtMapper : MapperBase
    {
        public override void Map(string inputLine, MapperContext context)
        {
            int inputValue = int.Parse(inputLine);

            // Perform the work.
            double sqrt = Math.Sqrt((double)inputValue);

            // Write output data.
            context.EmitKeyValue(inputValue.ToString(), sqrt.ToString());
        }
    }
</pre>
<br>
To run this program, stage some data in HDFS:<br>
<br>
1. create a text file called input.txt that has one integer per line.<br>
<br>
2. import that text file to HDFS via <br>
<br>
<blockquote><span class="codeInline">&gt; hadoop fs -copyFromLocal input.txt input/SqrtJob/input.txt</span></blockquote>
3. compile your .NET code to a DLL called FirstJob.dll and run it via<br>
<br>
<blockquote><span class="codeInline">&gt; MRRunner -dll FirstJob.dll </span></blockquote>
<br>
When this runs, the console will display the complete Hadoop Streaming command issued and then the normal console output from the hadoop streaming command itself.<br>
<br>
To see detailed information about the execution of current and past jobs, use the Hadoop streaming web front-end, typically accessible at http://localhost:50030.<br>
<br>
To explore the HDFS filesystem, use the HDFS web front-end that is typically accessible at http://localhost:50080.<br>
<br>
When the job completes, output will be available in HDFS at `/user/[user]/output/SqrtJob`.<br>
<h1>HadoopJob class</h1>
The `Job&lt;&gt;` class defines the users components that are included in a map-reduce program. Generic parameters are used to declare the Mapper, Combiner and Reducer classes that should be used by the job. Configuration parameters are supplied by overriding
 the method<br>
<br>
<span class="codeInline">public abstract HadoopJobConfiguration Configure(ExecutorContext context);</span><br>
<br>
To implement this method, instantiate a `HadoopJobConfiguration` object then set its members and return.<br>
<h1>HadoopJobConfiguration class</h1>
The configuration for a job is a strongly typed bag of settings that are largely passed directly to the hadoop streaming command-line. Some settings result in non-trivial settings but most are straight forward. Only a subset of Hadoop Streaming settings are
 directly exposed through the Configuration object. All settings are usable through catch-all facilities: `config.AdditionalStreamingArguments` and `config.AdditionalGenericArguments`.<br>
<h1>MapReduceJob.ExecuteJob method</h1>
MapReduceJob is a property on Hadoop connection object. It provides access to implementation of IStreamingJobExecutor interface which handles the creation and execution of Hadoop Streaming jobs. Depending on how the connection object was created it can execute
 jobs locally using Hadoop command-line or against remote cluster using WebHCat client library. Job executor can be called in various ways. The first is to use the MRRunner.exe utility which will invoke LocalStreamingJobExecutor implementation on your behalf<br>
<br>
<span class="codeInline">&gt; MRRunner -dll MyMRProgram.dll {-class jobClass} {-- job-class options}
</span><br>
<br>
The second is to invoke the executor directly and request it execute a Hadoop Job.<br>
<br>
<pre>      var hadoop = Hadoop.Connect();
      hadoop.MapReduceJob.ExecuteJob&lt;JobType&gt;(arguments);
</pre>
<br>
<br>
A third approach is to avoid the JobType and just invoke directly mentioning MapperType etc and a Configuration object<br>
<br>
<pre>      var hadoop = Hadoop.Connect();
      hadoop.MapReduceJob.Execute&lt; TMapper,..&gt;(configuration);
</pre>
<br>
<h1>MRRunner</h1>
MRRunner is a command-line utility used to execute a map-reduce program written against the Hadoop for .NET API. To get started, you should have an assembly (a .net DLL or EXE) that defines at least one implementation of HadoopJob&lt;&gt;.<br>
<br>
If MyDll contains only one implementation of Hadoop&lt;&gt;, you can run the job with<br>
<br>
<span class="codeInline">&gt; MRRunner -dll MyDll </span><br>
<br>
If MyDll contains multiple implementations of HadoopJob&lt;&gt;, indicate the one you wish to run<br>
<br>
<span class="codeInline">&gt; MRRunner -dll MyDll -class MyClass </span><br>
<br>
To supply options to your job, pass them as trailing arguments on the command-line, after a double-hyphen<br>
<br>
<span class="codeInline">&gt; MRRunner -dll MyDll -class MyClass -- extraArg1 extraArg2
</span><br>
<br>
These additional arguments are provided to your job via a context object that is available to all methods on HadoopJob&lt;&gt;
<br>
<h1>MapperBase</h1>
A MapperBase implementation describes how to perform the Map function. The input to Map will be a subset of the rows of the input. On each call to the Mapper.Map(string input, MapperContext context) method, a single line will be provided as input. The Map method
 can make use of the context object to lookup relevant setting, emit output lines and emit log messages and counter updates.<br>
<br>
For example:<br>
<pre>    public class MyMapper : MapperBase {
        public override void Map(string inputLine, MapperContext context)
        {
            context.Log("mapper called. input=" + inputLine);
            context.IncrementCounter("mapInputs");
            context.EmitKeyValue(key, value);
        }
    }
   </pre>
<br>
The MapperBase class also provides overridable methods to be run at the start/end of each batch. These methods can be used to perform set up and teardown such as initialising a component.<br>
<h1>ReducerCombinerBase</h1>
A ReducerCombinerBase implementation describes how to perform a reduce and/or combine operation. In each case the operation takes a group and emits key/value pairs that typically represent an aggregated representation of the group. For example, the input to
 a reducer may be: key = 'a', values = [1,2,3] and the output might be {'a',6}. To implement `ReducerCombinerBase`, override the `Reduce(key, values, context)` method and use the context object to emit key/value pairs as necessary.<br>
<br>
A common requirement for a map-reduce program is to reuse one reduce function as both the reducer and the combiner. This is achieved by referencing the same reducer class when declaring a HadoopJob class.<br>
<pre>    public class MyHadoopJob&lt;MyMapper, MyReducer, MyReducer&gt; {
        ...
    }
</pre>
<br>
<br>
Next: <a href="http://hadoopsdk.codeplex.com/wikipage?title=Complex%20type%20serialization&referringTitle=Example%20Map-Reduce%20program">
Complex type serialization</a><br>
</div>
<div></div>

            </div>
        
                <p>Last edited <span class="smartDate" title="25/03/2013 05:59:32" localtimeticks="1364216372">Mar 25, 2013 at 5:59 AM</span> by <a id="wikiEditByLink" href="http://www.codeplex.com/site/users/view/maxluk">maxluk</a>, version 2</p>
            
                <div id="Comments">
                    

<script type="text/javascript">
    var commentCount = 3;
    function addComment() {
        var input = $('#Comment');
        input.val($.trim(input.val()));
        if (MvcValidation_Validate('AddComment')) {
            CodePlex.UpdateProgress.show();
            $.post('http://hadoopsdk.codeplex.com/wikipage/comment', { Comment: input.val(), title: $('#WikiTitle').val() }, function(data, textStatus) {
                if (textStatus == 'success') {
                    if(commentCount++ == 0)
                        $('#wikiCommentsEmpty').empty();
                    $('#wikiComments').append(data);
                    input.val('');
                }
                CodePlex.UpdateProgress.hide();
            });
        }
    }
    function deleteComment(id) {
        if (confirm('Are you sure you want to delete this comment?')) {
            CodePlex.UpdateProgress.show();
            $.ajax({
                type: 'DELETE',
                url: 'http://hadoopsdk.codeplex.com/wikipage/comment' + '/' + id,
                success: function() {
                    $('#comment' + id).empty();
                    CodePlex.UpdateProgress.hide();
                },
                error: function() { CodePlex.UpdateProgress.hide(); }
            });
        }
    }
</script>

<div id="CommentsAnchor">
    <h2>Comments</h2>
    <div id="wikiComments">
        

<div id="comment28952">
    <div class="SubText">
        <a name="C28952">
        </a><a href="http://www.codeplex.com/site/users/view/billramo">billramo</a>
        <span class="smartDate" title="28/10/2013 23:17:47" localtimeticks="1383027467">Oct 28, 2013 at 11:17 PM</span>&nbsp;
        
    </div>
    Any plans to update this example to show how to upload the input file and run the streaming map-reduce job using the new cmdlets with PowerShell? <br>Thanks,,<br>Bill<p></p>
</div>

<div id="comment27099">
    <div class="SubText">
        <a name="C27099">
        </a><a href="http://www.codeplex.com/site/users/view/tomcatwi">tomcatwi</a>
        <span class="smartDate" title="04/04/2013 22:35:06" localtimeticks="1365140106">Apr 4, 2013 at 10:35 PM</span>&nbsp;
        
    </div>
    I'm trying a simple example and I get an exception saying "Could not load file or assembly Microsoft.Hadoop.MapReduce, Version=0.5.4821.31844,...", it Auto Detects the assembly when it starts up...why can't it load it?<p></p>
</div>

<div id="comment26966">
    <div class="SubText">
        <a name="C26966">
        </a><a href="http://www.codeplex.com/site/users/view/djcarter">djcarter</a>
        <span class="smartDate" title="24/03/2013 13:10:29" localtimeticks="1364155829">Mar 24, 2013 at 1:10 PM</span>&nbsp;
        
    </div>
    Hello, with the code above I get the following when I try and use MRRunner.exe:<br>ERROR: No classes in DLL derive from MapReduceJob.<br><br>I tried to fix by add this '"public class SqrtReducer : ReducerCombinerBase" and updating FirstJob to  "HadoopJob&lt;SqrtMapper,SqrtRedu<wbr>cer&gt;" but it's not helping. <br><br>Any thoughts?<br><br>Thanks,<br>DJ<p></p>
</div>
    </div>
    
        <div id="addComment">
            <a id="SignInToAddCommentLink" href="https://www.codeplex.com/site/login?RedirectUrl=http%3a%2f%2fhadoopsdk.codeplex.com%2fwikipage%3ftitle%3dExample%2520Map-Reduce%2520program%26FocusElement%3dComment">Sign in to add a comment</a>
        </div>
    
</div>
                </div>
            
    </div>
    
    <script type="text/javascript">

        $(document).ready(function () {
            $('#deleteWikiHyperLink').click(function () {
                OpenDialog('#DeleteWikiPagePanel', true, '30em');
            });
            $('#DeleteButton').click(function () {
                OpenDialog('#DeleteWikiPagePanel', false);
                CodePlex.UpdateProgress.show();
                $.ajax({
                    type: 'DELETE',
                    url: 'http://hadoopsdk.codeplex.com/wikipage?title=Example%20Map-Reduce%20program',
                    data: {title: $('#WikiTitle').val()},
                    success: function (data) {
                        CodePlex.UpdateProgress.hide();
                        window.location = data;
                    },
                    error: function (data) {
                        CodePlex.UpdateProgress.hide();
                    }
                });
            });
            $('#CancelButton').click(function () {
                OpenDialog('#DeleteWikiPagePanel', false);
            });
            
            
        });
    </script>
</div>

        
	<div id="right_sidebar">
        

<input name="" type="text" maxlength="500" id="wiki_search" title="Search Wiki and Documentation" class="EmptyTextBox"><a id="SearchButton" class="wiki_magnify" href="http://hadoopsdk.codeplex.com/wikipage?title=Example%20Map-Reduce%20program&referringTitle=Map%2fReduce#" title="Search Wiki and Documentation"></a>

<script type="text/javascript">

    $(function () {

        $('#wiki_search').keypress(function (e) {
            if (e.keyCode == 13) {
                wikiSearch();
                return false;
            }
        });

        $('#SearchButton').click(function () {
            wikiSearch();
            return false;
        });

        $('#wiki_search').promptBox('Search Wiki & Documentation');

    });
    function setWikiCommentTextBoxFocus() {
        $('#Comment').focus();
        return false;
    }

    function wikiSearch() {
        var $textbox = $('#wiki_search');
        if($textbox.attr('dirty') != 'true')
            return;
        var searchText = encodeURIComponent(jQuery.trim($textbox.val()));
        if(searchText != null & searchText.length > 0)
            window.location.href = 'http://hadoopsdk.codeplex.com/wiki/search?tab=Documentation&SearchText=' + searchText;
    }

</script>

<script type="text/javascript">
    var requirementsActionUri = 'http://hadoopsdk.codeplex.com/documentation/requirements';
    var requirementsToDelete = [];
    
    

    function LoadRequirements(json) {
        var html = '';
        if (json === undefined || !json.length) {
            html = '<div id="NoRequirementsDefined">There are currently no defined requirements.</div>';
        } else {
            for (var i = 0; i < json.length; i++) {
               var requirementType = json[i];
                html += '<h3>' + requirementType.Caption + '</h3><ul>';
                for (var j = 0; j < requirementType.Requirements.length; j++) {
                    var requirement = requirementType.Requirements[j];
                    html += '<li>' + requirement.DisplayTitle + '</li>';
                }
                html += '</ul>';
            }
        }
        
        $('#RequirementsBody').html(html);
    }

    $(document).ready(function() {
        LoadRequirements();
    });
</script>

<div id="RequirementsContainer">
    <h2>
        System Requirements
        
    </h2>
    <div class="clear"></div>
    <div id="RequirementsBody"><div id="NoRequirementsDefined">There are currently no defined requirements.</div></div>
</div>


    </div>

        
                
                <div class="clear"></div>
                
                <div id="footer">
                    <div class="row">
                        <hr>
                        <ul>
                            <li>Â© 2006-2015 Microsoft</li>
                            <li><a href="http://www.codeplex.com/site/help">Get Help</a></li>
                            <li><a href="http://hadoopsdk.codeplex.com/site/legal/privacy">Privacy Statement</a></li>
                            <li><a href="http://www.codeplex.com/site/legal/terms">Terms of Use</a></li>
                            <li><a href="http://www.codeplex.com/site/legal/conduct">Code of Conduct</a></li>
                            <li><a href="http://developermedia.com/" target="_blank">Advertise With Us</a></li>
                            <li>Version 12.4.2014.20959</li>
                        </ul>
                    </div>
                </div>
            </div>
        </form>
    

<div class="ui-dialog ui-widget ui-widget-content ui-corner-all  ui-draggable ui-resizable" tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-UpdateProgressPanel" style="display: none; z-index: 1000; outline: 0px; position: absolute;"><div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"><span class="ui-dialog-title" id="ui-dialog-title-UpdateProgressPanel">&nbsp;</span><a href="http://hadoopsdk.codeplex.com/wikipage?title=Example%20Map-Reduce%20program&referringTitle=Map%2fReduce#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close</span></a></div><div id="UpdateProgressPanel" class="loading_animation ui-dialog-content ui-widget-content" style="">
                <div class="row">
                    <h2 class="anim_h2">
                        <span id="UpdateProgressText">Updating...</span>
                        <span id="animatedLoadingIconContainer">
                            <img id="animatedLoadingIcon" src="./Microsoft .NET SDK For Hadoop - Documentation_files/loading_animation.gif" class="anim_img">
                        </span>
                    </h2>
                </div>
            </div><div class="ui-resizable-handle ui-resizable-n"></div><div class="ui-resizable-handle ui-resizable-e"></div><div class="ui-resizable-handle ui-resizable-s"></div><div class="ui-resizable-handle ui-resizable-w"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se" style="z-index: 1001;"></div><div class="ui-resizable-handle ui-resizable-sw" style="z-index: 1002;"></div><div class="ui-resizable-handle ui-resizable-ne" style="z-index: 1003;"></div><div class="ui-resizable-handle ui-resizable-nw" style="z-index: 1004;"></div></div></body></html>