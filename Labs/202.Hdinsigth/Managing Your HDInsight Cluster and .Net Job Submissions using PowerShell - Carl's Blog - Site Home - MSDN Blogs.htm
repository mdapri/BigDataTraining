<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/ms2_blogs.js" async="" type="text/javascript"></script><script async="" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/ai.js" type="text/javascript"></script><script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/Widget.js" charset="UTF-8" type="text/javascript"></script><meta name="robots" content="index,follow">
<meta name="description" content="I work for Microsoft Consulting Services in the UK. My primary focus is enterprise applications using C# and SQL Server.
However I also have an interest in other programming paradigms, hence the interest in F# and MapReduce.">
<meta name="keywords" content="F#, FSharp, C#, CSharp, Hadoop, SQL Server, TSQL, .Net, Windows Azure, Hadoop Streaming, MapReduce">
<meta name="GENERATOR" content="Telligent Evolution Platform Developer Build (Build: 5.6.50428.7875)">
<link rel="pingback" href="http://blogs.msdn.com/b/carlnol/pingback.aspx">
<link href="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/e8ef9a0f5baf04c5b72689852bedf1f8-3cca145f259b38265dcb26477a5.css" rel="Stylesheet" type="text/css"><link rel="alternate" type="application/rss+xml" title="Site Home (RSS 2.0)" href="http://blogs.msdn.com/rss.aspx">
<link rel="alternate" type="application/rss+xml" title="Carl Nolan's Comments (RSS 2.0)" href="http://blogs.msdn.com/members/carlnolan/comments/rss.aspx">
<link rel="alternate" type="application/rss+xml" title="Carl Nolan's Activities (RSS 2.0)" href="http://blogs.msdn.com/members/carlnolan/activities/rss.aspx">
<link rel="alternate" type="application/rss+xml" title="Activities of People Carl Nolan Follows (RSS 2.0)" href="http://blogs.msdn.com/members/carlnolan/activities/followersrss.aspx">
<link rel="alternate" type="application/rss+xml" title="Carl Nolan's Groups Activities (RSS 2.0)" href="http://blogs.msdn.com/members/carlnolan/activities/groupsrss.aspx">
<link rel="alternate" type="application/rss+xml" title="Carl's Blog (RSS 2.0)" href="http://blogs.msdn.com/b/carlnol/rss.aspx">
<link rel="alternate" type="application/atom+xml" title="Carl's Blog (Atom 1.0)" href="http://blogs.msdn.com/b/carlnol/atom.aspx">
<link rel="alternate" type="application/rss+xml" title="Carl's Blog - All Comments (RSS 2.0)" href="http://blogs.msdn.com/b/carlnol/rsscomments.aspx">
<link rel="alternate" type="application/rss+xml" title="Managing Your HDInsight Cluster and .Net Job Submissions using PowerShell - Comments for this post (RSS 2.0)" href="http://blogs.msdn.com/b/carlnol/rsscomments.aspx?WeblogPostID=10473106">

                    
          <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
          <link rel="shortcut icon" type="image/ico" href="http://blogs.msdn.com/themes/wireframe/favicon.ico">
          <!--
            Third party scripts and code linked to or referenced from this website are licensed to you by the parties that own such code, not by Microsoft.  See ASP.NET Ajax CDN Terms of Use – http://www.asp.net/ajaxlibrary/CDN.ashx.
          -->
          <link href="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/1eae160ea2c1e5cb3196f8c18470cca1-9728b852b1bb5db880b4edfc37d.css" rel="Stylesheet" type="text/css"><script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/jquery-1.js" type="text/javascript" language="javascript"></script>
                  
          		
          <link type="text/css" rel="stylesheet" href="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/DynamicStyle.css" media="screen,print">
          <link type="text/css" rel="stylesheet" href="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/DynamicStyle_002.css" media="screen,print">
        
          <!--[if lte IE 6]>
              <link type="text/css" rel="stylesheet" href="/themes/wireframe/css/ie6.css" media="screen,print" />
          <![endif]-->
                  <meta name="msvalidate.01" content="B717AD6FC29D3A844832AF011B5F9E4C">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://blogs.msdn.com/b/carlnol/rsd.ashx">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" title="WLWManifest" href="http://blogs.msdn.com/b/carlnol/wlwmanifest.ashx">

        <!--
            Third party scripts and code linked to or referenced from this website are licensed to you by the parties that own such code, not by Microsoft.  See ASP.NET Ajax CDN Terms of Use – http://www.asp.net/ajaxlibrary/CDN.ashx.
          -->
        <script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/jquery-1.js" type="text/javascript" language="javascript"></script>
    <title>
	Managing Your HDInsight Cluster and .Net Job Submissions using PowerShell - Carl's Blog - Site Home - MSDN Blogs
</title><script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/metrics.js" charset="utf-8" type="text/javascript"></script><style type="text/css"></style><script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/jquery-1_002.js"></script><script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/WebResource.axd"></script><script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/WebResource_003.axd"></script><script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/WebResource_002.axd"></script><script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/jquery.js" type="text/javascript"></script><link type="text/css" rel="stylesheet" href="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/UnifiedBaseballCard.css"><link type="text/css" rel="stylesheet" href="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/usercard.css"><script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/jquery_002.js" type="text/javascript"></script><script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/jquery_003.js" type="text/javascript"></script><script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/widgets.js" type="text/javascript"></script></head>
	<body spellcheck="true">
		<form name="aspnetForm" method="post" action="/b/carlnol/archive/2013/12/02/managing-your-hdinsight-cluster-and-net-job-submissions.aspx" onsubmit="javascript:return WebForm_OnSubmit();" id="aspnetForm">
<div>
<input name="__EVENTTARGET" id="__EVENTTARGET" value="" type="hidden">
<input name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" type="hidden">
<input name="ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_invisibleCaptcha_answer" id="ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_invisibleCaptcha_answer" value="3" type="hidden">
<input name="ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_invisibleCaptcha_encrypted" id="ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_invisibleCaptcha_encrypted" value="KoIYzvHqUjTLqg9uvPGwHPeyMjDqXGWXYTPwU+eqhW4=" type="hidden">
<input name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTM5OTAxNDYyNWRkvI787cXLvh9XHlDReEjVejxzcZ4=" type="hidden">
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['aspnetForm'];
if (!theForm) {
    theForm = document.aspnetForm;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>


<script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/a8fb5c65e90be47b953490942d6072e1-b821e8a36b9a76870897e9c1c693.js" type="text/javascript"></script>

<script type="text/javascript">
//<![CDATA[
function WebForm_OnSubmit() {
if (typeof(ValidatorOnSubmit) == "function" && ValidatorOnSubmit() == false) return false;
return true;
}
//]]>
</script>

<div>

	<input name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="84C00179" type="hidden">
</div>
			
            
                
            
            <div class="header-fragments-header"></div>
<div class="header-fragments"><div class="header-fragment-outer top-bar wireframe-header-fragment-outer wireframe-top-bar"><div class="header-fragment-inner top-bar wireframe-header-fragment-inner wireframe-top-bar"><div class="header-fragment welcome-message" id="header-fragment-247403536">


<!-- always render -->
</div><div class="header-fragment login-logout" id="header-fragment-247403537">





        <div class="navigation-list-header"></div>
        <ul class="navigation-list">

            <li class="navigation-item">
                <span id="ctl00_header_fragment_247403537__adbde5_ctl00_ctl02_ctl05_WLIDLoginButton1" class="internal-link live-id-button"><a href="https://login.live.com/login.srf?wa=wsignin1.0&amp;rpsnv=12&amp;ct=1418645063&amp;rver=6.0.5286.0&amp;wp=MBI&amp;wreply=http:%2F%2Fblogs.msdn.com%2Fb%2Fcarlnol%2Farchive%2F2013%2F12%2F02%2Fmanaging-your-hdinsight-cluster-and-net-job-submissions.aspx&amp;lc=1033&amp;id=271611">Sign in</a></span>
            </li>
        </ul>
        <div class="navigation-list-footer"></div>
    </div><div class="header-fragment user-welcome-without-login" id="header-fragment-247403538">

 &nbsp;<!-- always render -->

</div></div></div><div class="header-fragment-outer wireframe-header-fragment-outer site-banner"><div class="header-fragment-inner wireframe-header-fragment-inner site-banner"><div class="header-fragment site-banner" id="header-fragment-247403539">


<div class="site-banner-header"></div>
<div class="site-banner">
    
    
    
            <div class="site-logo"><a href="http://blogs.msdn.com/">
                    <img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/logo_msdn.png" alt="" style="border-width:0px;">
                </a></div>
        
</div>
<div class="site-banner-footer"></div></div></div></div><div class="header-fragment-outer wireframe-header-fragment-outer search"><div class="header-fragment-inner wireframe-header-fragment-inner search"><div class="header-fragment search" id="header-fragment-247403540">

<div class="field-list-header">
</div>
<fieldset class="field-list">
    <ul class="field-list">
        <li class="field-item"><span class="field-item-input">
            <input value="Search MSDN with Bing" style="color: rgb(170, 170, 170); font-style: italic;" title="Search MSDN with Bing" id="SearchTextBox_Header" name="SearchTextBox_Header" class="search empty" autocomplete="off" type="text">
            <input title="Search MSDN with Bing" id="SearchButton_Header" name="SearchButton_Header" class="search-button" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/trans.gif" type="image">
        <span style="background: white url(/Utility/images/MSDNTechnet/common.png) 0 -20px no-repeat;display:block;height:22px;overflow:hidden;width:47px;position:absolute;right:22px"></span><div style="display: none; text-align: left; border: 1px solid buttonshadow; position: absolute; z-index: 1000; padding: 2px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: MS Shell Dlg; font-size: 11px;" id="SearchFlyoutContainer"><div id="SuggestionContainer"><ul style="list-style: outside none none; padding: 4px 2px 0px 1px; cursor: pointer; margin: 1px; white-space: nowrap;"></ul></div></div></span></li>
        <li id="ctl00_header_fragment_247403540__adbde5_ctl00_SearchOptionsButtonWrapper" class="field-item"><span class="field-item-input">
            <a class="internal-link search-options" title="Change Search Scope">
                &nbsp;</a> </span></li>
    </ul>
</fieldset>
<div class="field-list-footer">
</div>
<script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/SearchBox_002.js" type="text/javascript" language="javascript"></script>

<script type="text/javascript" language="javascript">
    if ($.browser && $.browser.mozilla) {
        $('#SearchButton_Header').parent().append('<span style="background: white url(/Utility/images/MSDNTechnet/common.png) 0 -20px no-repeat;display:block;height:22px;overflow:hidden;width:47px;position:absolute;right:22px"></span>');
    } else {
        $('#SearchButton_Header').parent().append('<span style="background: white url(/Utility/images/MSDNTechnet/common.png) 0 -20px no-repeat;display:block;height:22px;overflow:hidden;width:47px;position:absolute;right:-17px"></span>');
    }
</script>
</div></div></div><div class="header-fragment-outer wireframe-header-fragment-outer group-navigation"><div class="header-fragment-inner wireframe-header-fragment-inner group-navigation"><div class="header-fragment group-navigation" id="header-fragment-247403541">

<script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/44a500773671f30bd4ba3b0c7bba2359-14e0c332a84e56b6d37629b4d8ca.js" type="text/javascript"></script>
    
<div id="ctl00_header_fragment_247403541__adbde5_ctl00_ctl00_ParentGroupListContainer" class="parent-container" style="width: 100%;">
<div class="parent-sub-container">
	
            <div class="navigation-list-header"></div>
            <ul class="navigation-list parent">
            <li class="navigation-item" style="display: none;">
                <a href="http://blogs.msdn.com/">MSDN Blogs</a>
            </li>
        
            <li class="navigation-item entry" style="">
				
						<a class="internal-link view-group" href="http://blogs.msdn.com/Microsoft_Blog_Images/"><span></span>Microsoft Blog Images</a>
					
            </li>
        
			
            <li class="navigation-item last">
				<a id="MoreLink" style="display: none;" onmouseover="Core_GroupNavigation_MoreShowNav(ctl00_header_fragment_247403541, true, this)" onmouseout="Core_GroupNavigation_MoreMouseOutPopup(ctl00_header_fragment_247403541, true, this)" href="#">More ...</a>
            </li>
            </ul>
            <div class="navigation-list-footer"></div>
        
</div>
</div>
<div id="ctl00_header_fragment_247403541__adbde5_ctl00_ctl00_GroupNavigationPopup" style="position:absolute;visibility:hidden;left:-5000px;"></div>
<div id="ctl00_header_fragment_247403541__adbde5_ctl00_ctl00_ParentMore" style="display: none;">
    <div class="content-list-header"></div>
    <ul id="ParentMoreListheader-fragment-247403541" class="content-list"></ul>
    <div class="content-list-footer"></div>
</div>
<div id="ctl00_header_fragment_247403541__adbde5_ctl00_ctl00_ChildMore" style="display: none;">
    <div class="content-list-header"></div>
    <ul id="ChildMoreListheader-fragment-247403541" class="content-list"></ul>
    <div class="content-list-footer"></div>
</div>
	
<script type="text/javascript">
    // <![CDATA[
    
    var Core_GroupNavigation_AjaxEndpoint = '/Utility/HeaderFragments/Core/GroupNavigationAjax.asmx';
        
    var ctl00_header_fragment_247403541={"wrapperId":"header-fragment-247403541","variableName":"ctl00_header_fragment_247403541","parameter":{"currentGroupId":0,"popupMenuId":"ctl00_header_fragment_247403541__adbde5_ctl00_ctl00_GroupNavigationPopup","popupParentMoreId":"ctl00_header_fragment_247403541__adbde5_ctl00_ctl00_ParentMore","popupChildMoreId":"ctl00_header_fragment_247403541__adbde5_ctl00_ctl00_ChildMore","popupWrapperID":"popup-ctl00_header_fragment_247403541__adbde5_ctl00_ctl00_GroupNavigationPopup","mouseInPopup":false,"popupPopulated":false,"errorHtml":"<div class=\"message error\">An error occured while attempting to load groups.</div>","loadingHtml":"<div class=\"message loading\">Loading...</div>","groupNavigationContentWrapperHtmlBlock":"<div id=\"popup-ctl00_header_fragment_247403541__adbde5_ctl00_ctl00_GroupNavigationPopup\">{GroupNavigationContent}</div>","groupNavigationListHtmlBlock":"<div class=\"multiple-column-list-header\"></div>\n<div class=\"multiple-column-list columns-{ColumnsCount}\">{Columns}</div>\n<div class=\"multiple-column-list-footer\"></div>","columnWrapperHtmlBlock":"<div class=\"multiple-column-item column-{ColumnId}\">{T1GroupsData}</div>","t1GroupHtmlBlock":"\r\n\t\t<div class=\"content-list-header\"></div>\r\n\t\t<div class=\"content-list-name{NameClass}\">{Name}</div>\r\n\t\t<ul class=\"content-list\">\r\n\t\t\t{Groups}\r\n\t\t</ul>\r\n\t\t<div class=\"content-list-footer\"></div>\r\n\t","t2GroupHtmlBlock":"<li class=\"content-item{ItemClass}\">{Item}</li>","viewAllHtmlBlock":"<a href=\"{Url}\" class=\"internal-link view-all\">{Text}</a>","linkHtmlBlock":"<a href=\"{Url}\" class=\"{MoreClass}\">{Name}</a>","searchResultItemHtmlBlock":"<li class=\"content-item\"><a href=\"{Url}\">{Name}</a></li>","viewMoreText":"and {MoreText} more..."}};

	$(document).ready(function() {
		Core_GroupNavigation_SetMenuItems("#ctl00_header_fragment_247403541__adbde5_ctl00_ctl00_ParentGroupListContainer", true, "ParentMoreListheader-fragment-247403541");
		Core_GroupNavigation_SetMenuItems("#ctl00_header_fragment_247403541__adbde5_ctl00_ctl00_ChildGroupListContainer", false, "ChildMoreListheader-fragment-247403541");
	});

	$(window).resize(function() {
		Core_GroupNavigation_SetMenuItems("#ctl00_header_fragment_247403541__adbde5_ctl00_ctl00_ParentGroupListContainer", true, "ParentMoreListheader-fragment-247403541");
		Core_GroupNavigation_SetMenuItems("#ctl00_header_fragment_247403541__adbde5_ctl00_ctl00_ChildGroupListContainer", false, "ChildMoreListheader-fragment-247403541");
	});
    // ]]>
</script></div></div></div></div>
<div class="header-fragments-footer"></div>
			
    <div class="content-fragment-page post" id="ctl00_content_ctl00_page"><div class="layout">
<div class="layout-header"></div>
<div class="layout-content header-top-content-left-sidebar-right" id="ctl00_content_ctl00_layout">
<div class="layout-region header" id="ctl00_content_ctl00_header">
<div class="layout-region-inner header"><div class="content-fragment blog-title full-border" id="fragment-186950">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-content">
<h1 class="title">
	    
			        
			    
	                Managing Your HDInsight Cluster and .Net Job Submissions using PowerShell
			    
	</h1></div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
<div class="content-fragment blog-bread-crumbs no-wrapper-with-spacing" id="fragment-186951">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-content">


<div class="breadcrumb-list-header"></div>
<div class="breadcrumb-list">
	<span class="breadcrumb-item"><a class="internal-link view-home" href="http://blogs.msdn.com/">MSDN Blogs</a></span>
  
	

	
			<span class="separator"> &gt; </span>
			<span class="breadcrumb-item">
		<a href="http://blogs.msdn.com/b/carlnol/">Carl's Blog</a>
			</span>
		
	
	
			<span class="separator"> &gt; </span>
			<span class="breadcrumb-item">
		<a href="http://blogs.msdn.com/b/carlnol/archive/2013/12/02/managing-your-hdinsight-cluster-and-net-job-submissions.aspx">Managing Your HDInsight Cluster and .Net Job Submissions using PowerShell</a>
			</span>
		

	
</div>
<div class="breadcrumb-list-footer"></div>
</div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
<div class="content-fragment raw-html no-wrapper" id="fragment-186952">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-content">
<div class="user-defined-markup"><div id="stb-breadcrumbs">
  <div class="breadcrumb-list">
    <span class="breadcrumb-item"><a href="http://blogs.technet.com/b/serverandtools/">Server &amp; Tools Blogs</a></span>
    <span class="separator"> &gt; </span>
    <span class="breadcrumb-item"><a href="http://blogs.msdn.com/b/business-intelligence/">Business Intelligence Blogs</a></span>
<span class="separator"> &gt; </span>
<span class="breadcrumb-item2">Carl Nolan's Blog</span>
  </div>
</div>
<div id="stb-header">
      <ul class="stb-nav"> 
    <li>
      <a href="#" class="menu-title">All About Business Intelligence<b><!--style element: drop-down arrow--></b></a>
      <ul class="stb-nav-drop">
        <b><!--style element: partial white border atop the drop-down menu--></b>					
        <li><a href="http://blogs.msdn.com/b/microsoft_business_intelligence1/">Microsoft Business Intelligence</a></li>
      </ul>
    </li>
    <li>
      <a href="#" class="menu-title">Power BI<b><!--style element: drop-down arrow--></b></a>
      <ul class="stb-nav-drop">
        <b><!--style element: partial white border atop the drop-down menu--></b>					
        <li><a href="http://blogs.msdn.com/b/powerbi/">Power BI</a></li>
        <li><a href="http://blogs.msdn.com/b/analysisservices/">Analysis Services and PowerPivot</a></li>
      </ul>
    </li>
    <li>
      <a href="#" class="menu-title">Reporting Services<b><!--style element: drop-down arrow--></b></a>
      <ul class="stb-nav-drop">
        <b><!--style element: partial white border atop the drop-down menu--></b>
        <li><a href="http://blogs.msdn.com/b/sqlrsteamblog/">Reporting Services</a></li>
        <li><a href="http://blogs.msdn.com/b/analysisservices/">Analysis Services and PowerPivot</a></li>
        <li><a href="http://blogs.technet.com/b/dataplatforminsider/">SQL Server</a></li>
        <li><a href="http://blogs.msdn.com/tags/reporting+services/" target="_blank">All MSDN Reporting Services Posts</a></li>
      </ul>
    </li>
    <li>
      <a href="#" class="menu-title">Analysis Services<b><!--style element: drop-down arrow--></b></a>
      <ul class="stb-nav-drop">
        <b><!--style element: partial white border atop the drop-down menu--></b>
        <li><a href="http://blogs.msdn.com/b/analysisservices/">Analysis Services and PowerPivot</a></li>
        <li><a href="http://blogs.msdn.com/b/as_emea/">AS_EMEA</a></li>
        <li><a href="http://blogs.msdn.com/b/analysisservices/archive/tags/analysis+services/">All MSDN Analysis Services Posts</a></li>
      </ul>
    </li>
    <li>
      <a href="#" class="menu-title">Information Management<b><!--style element: drop-down arrow--></b></a>
      <ul class="stb-nav-drop">
        <b><!--style element: partial white border atop the drop-down menu--></b>					
        <li><a href="http://blogs.msdn.com/b/mds/">Master Data Services</a></li>
        <li><a href="http://blogs.msdn.com/b/mattm/">SSIS</a></li>
        <li><a href="http://blogs.msdn.com/b/dqs/">Data Quality Services</a></li>
      </ul>
    </li>
    <li>
      <a href="#" class="menu-title">Big Data<b><!--style element: drop-down arrow--></b></a>
      <ul class="stb-nav-drop">
        <b><!--style element: partial white border atop the drop-down menu--></b>
        <li><a href="http://blogs.technet.com/b/dataplatforminsider/">SQL Server</a></li>
        <li><a href="http://blogs.msdn.com/b/carlnol/">Carl Nolan</a></li>
      </ul>
    </li>
    <li>
      <a href="#" class="menu-title">Data in the Cloud<b><!--style element: drop-down arrow--></b></a>
      <ul class="stb-nav-drop">
        <b><!--style element: partial white border atop the drop-down menu--></b>
        <li><a href="http://blogs.msdn.com/b/windowsazure">Microsoft Azure</a></li>
        <li><a href="http://blogs.technet.com/b/dataplatforminsider/">SQL Server</a></li>
        <li><a href="http://blogs.msdn.com/b/silverlining/">Silver Lining</a></li>
      </ul>
    </li>
  </ul>
<div class="description-container">
    <div class="description">
      <a href="http://blogs.msdn.com/b/carlnol/"><h2>Carl Nolan’s Blog</h2></a>
      <p class="tagline">Carl Nolan’s ramblings on development</p>
    </div>
  </div>
</div>

<script type="text/javascript">
$(document).ready(function() {

<!-- Begin drop-down menu -->
  $("#stb-header > .stb-nav")
    .mouseleave(function () {
      $(this)
        .find("a.menu-title")
          .removeClass("expanded")
        .end()
        .find(".stb-nav-drop")
          .removeClass("expanded");
    })
	.find("a.menu-title")
	.click(function(e) {
		  e.preventDefault();
		  e.stopImmediatePropagation();
		  
		  $(this).parents('li:first').find(".stb-nav-drop")
            .toggleClass("expanded")
          .end()
          .find("a.menu-title")
            .toggleClass("expanded")
          .end()
          .siblings()
            .find("a.menu-title")
              .removeClass("expanded")
            .end()
            .find(".stb-nav-drop")
              .removeClass("expanded");
	  });
});  
</script></div></div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
<div id="fragment-186953"></div>
</div>
</div>
<div class="layout-region right-sidebar" id="ctl00_content_ctl00_right-sidebar">
<div class="layout-region-inner right-sidebar"><div class="content-fragment search-form no-wrapper-with-spacing" id="fragment-186954">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-content">

<div class="field-list-header">
</div>
<fieldset class="field-list">
    <ul class="field-list">
        <li class="field-item search">
            <div style="display: none;" id="search-allblogs-container">
                <span class="field-item-input">
                    <input value="Search MSDN with Bing" style="color: rgb(170, 170, 170); font-style: italic;" title="Search MSDN with Bing" id="SearchTextBox_AllBlogs" name="SearchTextBox_AllBlogs" class="searchField" maxlength="64" size="45" autocomplete="off" type="text">
                    <input title="Search MSDN with Bing" id="SearchButton_AllBlogs" name="SearchButton_AllBlogs" class="search-button" type="button">
                <div style="display: none; text-align: left; border: 1px solid buttonshadow; position: absolute; z-index: 1000; padding: 2px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: MS Shell Dlg; font-size: 11px;" id="SearchFlyoutContainer"><div id="SuggestionContainer"><ul style="list-style: outside none none; padding: 4px 2px 0px 1px; cursor: pointer; margin: 1px; white-space: nowrap;"></ul></div></div></span>
            </div>
            <div id="search-thisblog-container">
                <span class="field-item-input">
                    <input value="Search MSDN with Bing" style="color: rgb(170, 170, 170); font-style: italic;" title="Search MSDN with Bing" id="SearchTextBox_ThisBlog" name="SearchTextBox_ThisBlog" class="searchField" maxlength="64" size="45" autocomplete="off" type="text">
                    <input title="Search MSDN with Bing" id="SearchButton_ThisBlog" name="SearchButton_ThisBlog" class="search-button" type="button">
                <div style="display: none; text-align: left; border: 1px solid buttonshadow; position: absolute; z-index: 1000; padding: 2px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: MS Shell Dlg; font-size: 11px;" id="SearchFlyoutContainer"><div id="SuggestionContainer"><ul style="list-style: outside none none; padding: 4px 2px 0px 1px; cursor: pointer; margin: 1px; white-space: nowrap;"></ul></div></div></span>
            </div>
        </li>
    </ul>
</fieldset>
<div class="field-list-footer">
    <div id="search-switch-container">
        <span style="display: inline-block">
            <input name="SearchTypeRadio" value="ThisBlog" id="ThisBlog" checked="checked" type="radio"><label for="ThisBlog" id="ThisBlogText">Search this blog</label></span>
        <span style="display: inline-block">
            <input name="SearchTypeRadio" value="AllBlogs" id="AllBlogs" type="radio"><label for="AllBlogs" id="AllBlogsText">Search all blogs</label></span>
    </div>
</div>
<script type="text/javascript">
var elmSearchAll = $('#search-allblogs-container').hide();
var elmSearchThis = $('#search-thisblog-container');

// try to get the blog id, if we fail, then we aren't on a blog and just use the regular search approach       
(14676 === -1) && $('#search-switch-container').hide();

$(document).ready(function() {
    $('#ThisBlog').click(function () {
        var self = $(this);
        if (self.is(':checked')) {
            elmSearchAll.hide();
            elmSearchThis.show();
        }
    });
    
    $('#AllBlogs').click(function () {
        var self = $(this);
        if (self.is(':checked')) {
            elmSearchThis.hide();
            elmSearchAll.show();
        }
    });
});
</script>
<script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/SearchBox.js" type="text/javascript" language="javascript"></script>
<script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/SearchBox_003.js" type="text/javascript" language="javascript"></script>
</div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
<div class="content-fragment html-content no-wrapper-with-spacing with-header" id="fragment-186955">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-header"><div>Top Server &amp; Tools Blogs</div></div>
<div class="content-fragment-content">
<div class="user-defined-markup"><div class="sxp-feed"><a href="http://weblogs.asp.net/scottgu">ScottGu's Blog</a></div>
<div class="sxp-feed"><a href="http://blogs.technet.com/b/in_the_cloud/">Brad Anderson’s "In the Cloud" Blog</a></div>
<div class="sxp-feed"><a href="http://blogs.msdn.com/b/somasegar/">Somasegar's Blog</a></div>
<div class="sxp-feed"><a href="http://blogs.msdn.com/b/bharry/">Brian Harry's Blog</a></div>
<div class="sxp-feed"><a href="http://blogs.msdn.com/b/stevengu/">Steve "Guggs" Guggenheimer's Blog</a></div></div></div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
<div class="content-fragment raw-html no-wrapper-with-spacing" id="fragment-186956">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-content">
<div class="user-defined-markup"><!-- SIDEBAR: METRO TILES -->
<ul class="sidebar-tiles">
  <li class="first">
    <a href="http://blogs.msdn.com/b/carlnol/rss.aspx" class="sidebar-tile-subscribe">Subscribe</a>
  </li>
  <li class="mid">
    <a href="https://twitter.com/mspowerbi" class="sidebar-tile-twitter">Twitter</a>  </li>
  <li class="last">
    <a href="http://www.facebook.com/microsoftbi" class="sidebar-tile-facebook">Facebook</a>
  </li>
</ul></div></div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
<div class="content-fragment blog-links no-wrapper-with-spacing with-header" id="fragment-186957">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-header"><div>Menu</div></div>
<div class="content-fragment-content">

		<div class="navigation-list-header"></div>
		<ul class="navigation-list">
	<li class="navigation-item"><a class="internal-link view-application" href="http://blogs.msdn.com/b/carlnol/"><span></span>Blog Home</a></li><li class="navigation-item"><a class="internal-link view-user-profile" href="http://blogs.msdn.com/b/carlnol/about.aspx"><span></span>About</a></li><li id="" rsscomments"""="" class="navigation-item"><a class="internal-link rss" href="http://blogs.msdn.com/b/carlnol/rsscomments.aspx"><span></span>RSS for comments</a></li><li class="navigation-item"><a class="internal-link rss" href="http://blogs.msdn.com/b/carlnol/rss.aspx"><span></span>RSS for posts</a></li>
		</ul>
		<div class="navigation-list-footer"></div>
	</div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
<div class="content-fragment raw-html no-wrapper-with-spacing with-header" id="fragment-186958">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-header"><div>About Carl Nolan</div></div>
<div class="content-fragment-content">
<div class="user-defined-markup"><div class="about">
I work for Microsoft Consulting Services in the UK. My primary focus is enterprise applications using C# and SQL Server.<br>
However I also have an interest in other programming paradigms, hence the interest in F#.<br>
A summary of my previous publications can be found <a href="http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-46-76-Documents/3731.Publications-List.pdf" target="_blank">here</a>.<br>
A list of posted code can be found <a title="Code" href="http://code.msdn.microsoft.com/site/search?f%5B0%5D.Type=User&amp;f%5B0%5D.Value=Carl%20Nolan" target="_blank">here</a>.<br>
</div></div></div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
<div class="content-fragment raw-html no-wrapper-with-spacing with-header" id="fragment-186959">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-header"><div>Twitter Feed</div></div>
<div class="content-fragment-content">
<div class="user-defined-markup"><!-- SIDEBAR: TWITTER -->
<div class="sidebar-twitter">
  <script charset="utf-8" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/widget.js"></script>
  <script>
  new TWTR.Widget({
    version: 2,
    type: 'profile',
    rpp: 2,
    interval: 30000,
    width: 220,
    height: 300,
    theme: {
      shell: {
        background: '#00aced',
        color: '#ffffff'
      },
      tweets: {
        background: '#ffffff',
        color: '#424242',
        links: '#00749e'
      }
    },
    features: {
      scrollbar: false,
      loop: false,
      live: false,
      behavior: 'all'
    }
  }).render().setUser('carl_nolan').start();
  </script>
</div></div></div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
<div class="content-fragment c-t-f-widget no-wrapper" id="fragment-186960">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-content">


     <!--
         
           localize text, such as translate this & powered by 
           
           
            -->
<div class="" id="MicrosoftTranslatorWidget" style="border: 2px solid rgb(58, 87, 112); direction: ltr; width: 276px; min-height: 83px; background-color: rgb(120, 173, 208); background-repeat: repeat-x; background-image: url(&quot;data:image/x-ms-bmp;base64,Qk2eAAAAAAAAADYAAAAoAAAAAQAAABoAAAABABgAAAAAAGgAAAAAAAAAAAAAAAAAAAAAAAAAoIJZ/5x/V/+Ze1T/lXhS/5F1T/+OcU3/im5L/4ZrSP+CaEb/f2RE/3thQf93Xj//dFo8/6CCWf+khVv/p4le/6uMYP+vj2P/spNl/7aWZ/+6mWr/vpxs/8Ggbv/Fo3H/yaZz/8yqdv8=&quot;);"><div id="MSTWContent"><div style="border-color: rgb(101, 147, 179);" id="MSTWHeader"><span class="MSTWBox"><span id="MSTWHeaderText" style="width: 160px;">Translate this page</span></span><span class="MSTWBox"><select name="MSTWMenu" id="MSTWMenu"><option value="ar">Arabic</option><option value="bg">Bulgarian</option><option value="ca">Catalan</option><option value="zh-chs">Chinese Simplified</option><option value="zh-cht">Chinese Traditional</option><option value="cs">Czech</option><option value="da">Danish</option><option value="nl">Dutch</option><option value="et">Estonian</option><option value="fi">Finnish</option><option value="fr">French</option><option value="de">German</option><option value="el">Greek</option><option value="ht">Haitian Creole</option><option value="he">Hebrew</option><option value="hi">Hindi</option><option value="mww">Hmong Daw</option><option value="hu">Hungarian</option><option value="id">Indonesian</option><option value="it">Italian</option><option value="ja">Japanese</option><option value="tlh">Klingon</option><option value="ko">Korean</option><option value="lv">Latvian</option><option value="lt">Lithuanian</option><option value="ms">Malay</option><option value="mt">Maltese</option><option value="no">Norwegian</option><option value="fa">Persian</option><option value="pl">Polish</option><option value="pt">Portuguese</option><option value="ro">Romanian</option><option value="ru">Russian</option><option value="sk">Slovak</option><option value="sl">Slovenian</option><option selected="selected" value="es">Spanish</option><option value="sv">Swedish</option><option value="th">Thai</option><option value="tr">Turkish</option><option value="uk">Ukrainian</option><option value="ur">Urdu</option><option value="vi">Vietnamese</option><option value="cy">Welsh</option></select><a href="javascript:%20Translate%20this%20page" style="background-repeat: repeat-x; background-image: url(&quot;data:image/x-ms-bmp;base64,Qk2GAAAAAAAAADYAAAAoAAAAAQAAABQAAAABABgAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAA6MOI/+XAhv/jvoT/4LyD/966gf/cuID/2bZ+/9ezff/VsXv/0q96/+jDiP/qxYn/7MeL/+/JjP/xy47/882P//bPkf/40pL/+tSU//3Wlf8=&quot;); border-color: rgb(101, 147, 179);" id="MSTWGoButton" title="Translate this page" class="MSTWButtonLink"><img id="MSTWGoImage" src="data:image/gif;base64,R0lGODlhGAASAHAAACH5BAEAAP8ALAAAAAAYABIAhwAAAP%2f%2f%2fwAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAg8AP8JHEiwoMGDCBMqXMiwIcMAARwihAhRYkGKFC0KxIjRIkeODj9%2bfCiyYsOSHkFq7KhxY8SW%0d%0aMGPKRBgQADs%3d" style="border-width:0px;"></a></span></div><div id="MSTWFooter"><span id="MSTWBrand" class="MSTWBox"><a id="MSTWBrandLink" title="Microsoft® Translator" href="http://www.bing.com/translator?ref=MSTWidget" target="_blank"><span style="font-family: Segoe UI; direction: ltr;">Microsoft<sup style="vertical-align: super; font-size: 70%;">®</sup> Translator</span></a></span><span id="MSTWGetShare" class="MSTWBox"><a style="border-color: rgb(101, 147, 179);" id="MSTWGetButton" title="Get this widget for your own site" class="MSTWButtonLink" href="http://www.microsofttranslator.com/widget/?ref=MSTWidget" target="_blank"><img id="MSTWGetImage" src="data:image/gif;base64,R0lGODlhGAASAPcAAAAAAP%2f%2f%2fwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAP8ALAAAAAAYABIA%0d%0aAAhBAP8JHEiwoMGDCBMqXMiwocOHCAMEGCgRYkWCFxlmxDhx4caCH0F2TBiSI8mRJw%2bWVIny38qI%0d%0aI19CnEmzpk2DAQEAOw%3d%3d" style="border-width:0px;"></a><a href="mailto:?charset=utf-8&amp;subject=Check%20out%20this%20page%20in%20Spanish%20translated%20from%20English&amp;body=Translated%3A%20http%3A%2F%2Fblogs.msdn.com%2Fb%2Fcarlnol%2Farchive%2F2013%2F12%2F02%2Fmanaging-your-hdinsight-cluster-and-net-job-submissions.aspx%23mstto%3Des%0D%0AOriginal%3A%20http%3A%2F%2Fblogs.msdn.com%2Fb%2Fcarlnol%2Farchive%2F2013%2F12%2F02%2Fmanaging-your-hdinsight-cluster-and-net-job-submissions.aspx%0D%0A%0D%0AAutomatic%20translation%20powered%20by%20Microsoft%C2%AE%20Translator%0D%0Ahttp%3A%2F%2Fwww.bing.com%2Ftranslator" style="border-color: rgb(101, 147, 179);" id="MSTWShareButton" title="Share" class="MSTWButtonLink"><img id="MSTWShareImage" src="data:image/gif;base64,R0lGODlhGAASAPcAAAAAAP%2f%2f%2fwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%0d%0aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAP8ALAAAAAAYABIA%0d%0aAAhHAP8JHEiwoMGDCBMqXMiwocOHBQNInEiRokKJFwNc%2fKfxoMaOCDuCHChyo8CRIEcaLGmxZMKP%0d%0aITlmnPmyok2MEHPq3MlTYUAAOw%3d%3d" style="border-width:0px;"></a></span></div><div id="MSTWHidden" style="display: none;"><span id="MSTWCheckOut">Check out this page in {0} translated from {1}</span><span id="MSTWTranslatedFrom">translated from</span><span id="MSTWOriginal">Original:</span><span id="MSTWTranslated">Translated:</span><span id="MSTWPoweredBy">Automatic translation powered by Microsoft® Translator</span><span id="MSTWStart">Start translating</span><span id="MSTWStop">Stop translating</span><span id="MSTWClose">Close</span><span id="MSTWCloseShowOrig">Close and show original page</span><span id="MSTWLangNotSup"></span><span id="MSTWSelect">Select</span></div></div></div>
</div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
<div class="content-fragment blog-post-list no-wrapper-with-spacing with-header" id="fragment-186961">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-header"><div>Recent Posts</div></div>
<div class="content-fragment-content">

	    <div class="content-list-header simple"></div>
        <ul class="content-list simple">
	
		<li class="content-item">
			<div class="abbreviated-post-header"></div>
			<div class="abbreviated-post">
				<h4 class="post-name"><a class="internal-link view-post" href="http://blogs.msdn.com/b/carlnol/archive/2014/04/02/pushing-hadoop-cluster-configuration-changes-using-powershell.aspx"><span></span>Pushing Hadoop Cluster Configuration Changes using PowerShell</a></h4>
				
            <div class="post-date">
		        <span class="label">Posted</span>
		        <span class="value">8 months ago</span>
	        </div>
                <div class="post-author">
                    <span class="fiji-post-author-by">by</span>
                    <span class="avatar"><a href="http://blogs.msdn.com/257457/ProfileUrlRedirect.ashx"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/avatar.jpg" alt="" style="border-width:0px;max-height:32px;max-width:32px;"></a></span>
                    
                    <span class="user-name"><a class="internal-link view-user-profile" href="http://blogs.msdn.com/257457/ProfileUrlRedirect.ashx"><span></span>Carl Nolan</a></span>
                    
                </div>
	            <div class="post-attributes">
		                <div class="attribute-list-header"></div>
                        <ul class="attribute-list">
                            <span class="attribute-value">2</span>
                            <span class="attribute-name">Comments</span>
                        </ul>
                        <div class="attribute-list-footer"></div>
                    </div>
			</div>
			<div class="abbreviated-post-footer"></div>
		</li>
	
		<li class="content-item">
			<div class="abbreviated-post-header"></div>
			<div class="abbreviated-post">
				<h4 class="post-name"><a class="internal-link view-post" href="http://blogs.msdn.com/b/carlnol/archive/2014/03/19/deploying-hadoop-rack-awareness-with-powershell.aspx"><span></span>Deploying Hadoop Rack Awareness with PowerShell</a></h4>
				
            <div class="post-date">
		        <span class="label">Posted</span>
		        <span class="value">8 months ago</span>
	        </div>
                <div class="post-author">
                    <span class="fiji-post-author-by">by</span>
                    <span class="avatar"><a href="http://blogs.msdn.com/257457/ProfileUrlRedirect.ashx"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/avatar.jpg" alt="" style="border-width:0px;max-height:32px;max-width:32px;"></a></span>
                    
                    <span class="user-name"><a class="internal-link view-user-profile" href="http://blogs.msdn.com/257457/ProfileUrlRedirect.ashx"><span></span>Carl Nolan</a></span>
                    
                </div>
	            <div class="post-attributes">
		                <div class="attribute-list-header"></div>
                        <ul class="attribute-list">
                            <span class="attribute-value">2</span>
                            <span class="attribute-name">Comments</span>
                        </ul>
                        <div class="attribute-list-footer"></div>
                    </div>
			</div>
			<div class="abbreviated-post-footer"></div>
		</li>
	
		<li class="content-item">
			<div class="abbreviated-post-header"></div>
			<div class="abbreviated-post">
				<h4 class="post-name"><a class="internal-link view-post" href="http://blogs.msdn.com/b/carlnol/archive/2014/03/14/implementing-hadoop-rack-awareness-with-powershell.aspx"><span></span>Implementing Hadoop Rack Awareness with PowerShell</a></h4>
				
            <div class="post-date">
		        <span class="label">Posted</span>
		        <span class="value">9 months ago</span>
	        </div>
                <div class="post-author">
                    <span class="fiji-post-author-by">by</span>
                    <span class="avatar"><a href="http://blogs.msdn.com/257457/ProfileUrlRedirect.ashx"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/avatar.jpg" alt="" style="border-width:0px;max-height:32px;max-width:32px;"></a></span>
                    
                    <span class="user-name"><a class="internal-link view-user-profile" href="http://blogs.msdn.com/257457/ProfileUrlRedirect.ashx"><span></span>Carl Nolan</a></span>
                    
                </div>
	            <div class="post-attributes">
		                <div class="attribute-list-header"></div>
                        <ul class="attribute-list">
                            <span class="attribute-value">0</span>
                            <span class="attribute-name">Comments</span>
                        </ul>
                        <div class="attribute-list-footer"></div>
                    </div>
			</div>
			<div class="abbreviated-post-footer"></div>
		</li>
	
		<li class="content-item">
			<div class="abbreviated-post-header"></div>
			<div class="abbreviated-post">
				<h4 class="post-name"><a class="internal-link view-post" href="http://blogs.msdn.com/b/carlnol/archive/2013/12/16/managing-your-hdinsight-cluster-using-powershell-update.aspx"><span></span>Managing Your HDInsight Cluster using PowerShell – Update</a></h4>
				
            <div class="post-date">
		        <span class="label">Posted</span>
		        <span class="value">11 months ago</span>
	        </div>
                <div class="post-author">
                    <span class="fiji-post-author-by">by</span>
                    <span class="avatar"><a href="http://blogs.msdn.com/257457/ProfileUrlRedirect.ashx"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/avatar.jpg" alt="" style="border-width:0px;max-height:32px;max-width:32px;"></a></span>
                    
                    <span class="user-name"><a class="internal-link view-user-profile" href="http://blogs.msdn.com/257457/ProfileUrlRedirect.ashx"><span></span>Carl Nolan</a></span>
                    
                </div>
	            <div class="post-attributes">
		                <div class="attribute-list-header"></div>
                        <ul class="attribute-list">
                            <span class="attribute-value">0</span>
                            <span class="attribute-name">Comments</span>
                        </ul>
                        <div class="attribute-list-footer"></div>
                    </div>
			</div>
			<div class="abbreviated-post-footer"></div>
		</li>
	
		</ul>
		<div class="content-list-footer simple"></div>
	</div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
<div class="content-fragment tag-cloud no-wrapper-with-spacing with-header" id="fragment-186962">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-header"><div>Tags</div></div>
<div class="content-fragment-content">
<div class="tag-list-header"></div><ul class="tag-list">
<li class="tag-item level-1"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/-Net/" rel="tag">.Net</a></li>
<li class="tag-item level-2"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/-Net+Programming/" rel="tag">.Net Programming</a></li>
<li class="tag-item level-4"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/Binary+Streaming/" rel="tag">Binary Streaming</a></li>
<li class="tag-item level-3"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/C_2300_/" rel="tag">C#</a></li>
<li class="tag-item level-1"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/F_2300_/" rel="tag">F#</a></li>
<li class="tag-item level-1"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/FSharp/" rel="tag">FSharp</a></li>
<li class="tag-item level-4"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/FSharpChart/" rel="tag">FSharpChart</a></li>
<li class="tag-item level-1"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/Hadoop/" rel="tag">Hadoop</a></li>
<li class="tag-item level-2"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/Hadoop+on+Azure/" rel="tag">Hadoop on Azure</a></li>
<li class="tag-item level-2"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/Hadoop+Streaming/" rel="tag">Hadoop Streaming</a></li>
<li class="tag-item level-3"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/Hadoop-Net/" rel="tag">Hadoop.Net</a></li>
<li class="tag-item level-5"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/IEnumerable/" rel="tag">IEnumerable</a></li>
<li class="tag-item level-6"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/Machine+Learning/" rel="tag">Machine Learning</a></li>
<li class="tag-item level-2"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/MapReduce/" rel="tag">MapReduce</a></li>
<li class="tag-item level-6"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/Matrix/" rel="tag">Matrix</a></li>
<li class="tag-item level-4"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/Parallel+Processing/" rel="tag">Parallel Processing</a></li>
<li class="tag-item level-4"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/PowerShell/" rel="tag">PowerShell</a></li>
<li class="tag-item level-6"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/Recommendations/" rel="tag">Recommendations</a></li>
<li class="tag-item level-5"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/Sorting/" rel="tag">Sorting</a></li>
<li class="tag-item level-5"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/SQL+Server/" rel="tag">SQL Server</a></li>
<li class="tag-item level-6"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/Task+Parallel+Library/" rel="tag">Task Parallel Library</a></li>
<li class="tag-item level-5"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/TSQL/" rel="tag">TSQL</a></li>
<li class="tag-item level-6"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/Vector/" rel="tag">Vector</a></li>
<li class="tag-item level-6"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/WPF/" rel="tag">WPF</a></li>
<li class="tag-item level-4"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/XML+Streaming/" rel="tag">XML Streaming</a></li>
</ul>
<div class="tag-list-footer"></div>
</div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
<div class="content-fragment blog-archive-list no-wrapper-with-spacing with-header" id="fragment-186963">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-header"><div>Archives</div></div>
<div class="content-fragment-content">

		<div class="content-list-header"></div>
		<div class="content-list-name">Archives</div>
		<ul class="content-list">
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2014/04.aspx">April 2014</a> (1)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2014/03.aspx">March 2014</a> (2)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2013/12.aspx">December 2013</a> (2)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2013/09.aspx">September 2013</a> (1)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2013/06.aspx">June 2013</a> (2)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2013/02.aspx">February 2013</a> (2)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2013/01.aspx">January 2013</a> (1)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2012/12.aspx">December 2012</a> (2)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2012/11.aspx">November 2012</a> (1)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2012/10.aspx">October 2012</a> (2)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2012/07.aspx">July 2012</a> (4)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2012/06.aspx">June 2012</a> (5)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2012/05.aspx">May 2012</a> (1)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2012/04.aspx">April 2012</a> (3)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2012/02.aspx">February 2012</a> (3)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2012/01.aspx">January 2012</a> (5)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2011/12.aspx">December 2011</a> (6)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2011/11.aspx">November 2011</a> (7)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2011/10.aspx">October 2011</a> (8)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2011/09.aspx">September 2011</a> (1)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2011/08.aspx">August 2011</a> (1)</li>
	
		<li style="display: none;" class="content-item"><a class="internal-link view-post-archive-list" href="http://blogs.msdn.com/b/carlnol/archive/2011/07.aspx">July 2011</a> (11)</li>
	
		</ul>
		<div class="content-list-footer"></div>
	
</div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
<div class="content-fragment raw-html no-wrapper-with-spacing" id="fragment-186964">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-content">
<div class="user-defined-markup"><script>
    $(document).ready(function() {
      $('.layout-region.right-sidebar .blog-archive-list ul.content-list li.content-item').hide();
      if ($('.layout-region.right-sidebar .blog-archive-list ul.content-list li.content-item').length < 1) {
        $('#ArchiveMoreLink,#ArchiveLessLink').hide();
      }
      if ($('.layout-region.right-sidebar .blog-archive-list ul.content-list li.content-item:visible').length == $('.layout-region.right-sidebar .blog-archive-list ul.content-list li.content-item').length) {
        $('#ArchiveMoreLink,#ArchiveLessLink').hide();
      }
    });
</script>
<a id="ArchiveMoreLink" href="#" onclick="$('.layout-region.right-sidebar .blog-archive-list ul.content-list li.content-item').show(); $('#ArchiveLessLink').show(); $('#ArchiveMoreLink').hide(); return false;">More <span class="arrowhead">▼</span></a>
<a id="ArchiveLessLink" href="#" style="display:none" onclick="$('.layout-region.right-sidebar .blog-archive-list ul.content-list li.content-item').hide(); $('#ArchiveMoreLink').show(); $('#ArchiveLessLink').hide(); return false;">Less <span class="arrowhead">▲</span></a></div></div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
</div>
</div>
<div class="layout-region content" id="ctl00_content_ctl00_content">
<div class="layout-region-inner content"><div class="content-fragment blog-post no-wrapper-with-spacing" id="fragment-186965">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-content">

<div class="full-post-header"></div>
<div class="full-post">
	<h3 class="post-name">Managing Your HDInsight Cluster and .Net Job Submissions using PowerShell</h3>
	
	        <div class="post-rating">
	            Rate This<br>
	    <span class="rating readonly" id="ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl01" title="Rated Excellent [5 out of 5]."><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/star-left-on.png" style="border-width: 0px;" align="absmiddle" border="0"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/star-right-on.png" style="border-width: 0px;" align="absmiddle" border="0"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/star-left-on.png" style="border-width: 0px;" align="absmiddle" border="0"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/star-right-on.png" style="border-width: 0px;" align="absmiddle" border="0"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/star-left-on.png" style="border-width: 0px;" align="absmiddle" border="0"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/star-right-on.png" style="border-width: 0px;" align="absmiddle" border="0"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/star-left-on.png" style="border-width: 0px;" align="absmiddle" border="0"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/star-right-on.png" style="border-width: 0px;" align="absmiddle" border="0"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/star-left-on.png" style="border-width: 0px;" align="absmiddle" border="0"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/star-right-on.png" style="border-width: 0px;" align="absmiddle" border="0"></span><input value="5" id="ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl01_Value" type="hidden">
	        </div>
	    
    <div class="post-author">
        <span class="avatar"><a href="http://blogs.msdn.com/257457/ProfileUrlRedirect.ashx"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/avatar.jpg" alt="" style="border-width:0px;max-height:32px;max-width:32px;"></a></span>
        
        <span data-profile-rendered="true" class="profile-usercard-hover" data-profile-userid="a429acc118cd4d78adbc574a6fbaa9e9">
            <span class="user-name"><a class="internal-link view-user-profile" href="http://blogs.msdn.com/257457/ProfileUrlRedirect.ashx"><span></span>Carl Nolan</a></span>
        
            
        <div class="profile-usercard">            <div class="profile-header">                <span class="profile-userimage">                                            <img src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAA0JCgsKCA0LCgsODg0PEyAVExISEyccHhcgLikxMC4pLSwzOko+MzZGNywtQFdBRkxOUlNSMj5aYVpQYEpRUk//2wBDAQ4ODhMREyYVFSZPNS01T09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0//wAARCAAsACwDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDrgtLsPrSZpQaAMvVHu5bkWVrcm2+QO0iqC3JIwM9OlJp3220nS3urw3SyZ2s6gMpxnqOo4NTX6x/aEZgpLrtI78cj+ZplkoN4hKgOuWJPXGMf1rJyfPY3UI+zuagLU7cfSjcaTca2MDDGuWePvke2KoXfi2BGMdjC9xIO5+VR+NYGqavYtZtFYwgSPwWx0H51iNKywxwD5Qw3MfXNbU6cXrIlt9DT/t2eHUri6kSCZ58bwM8egB9q0T4kjivLW4toxzHmVWJAyeCM+1cxKiJJtjlEgwPmUEDP40inHFDhFy5rFczUbHocfimJ/wDliynGeWp//CTQdxg/WuJjkt4b23XLNbsEaRSwOCeD0rqjoenn/lm4/wCBmpmop6Eq5w97NHLcyNCu2PPyj2qFmZ2+bggAfhTGGBxxVzUQBftgAfKnT/dFUn0Arj60ppp6UUwEyS3WvRdLuTPplvK4+Zoxn3NebjrXfaOx/sm1/wCuYrOewH//2Q==" alt="Avatar of Carl Nolan">                                    </span>                <div>                    <p title="Carl Nolan" class="profile-display-name">Carl Nolan</p>                                    <p class="profile-company">Microsoft</p>                                    <p class="profile-affiliations">MSFT</p>                </div>            </div>            <div class="profile-points-bar">                <span class="profile-points">19,812<span class="points-label"> Points</span></span>                <span class="profile-count profile-bronze-points"><span class="profile-bronze-img" title="Achievements Earned"></span><span>9</span></span>                <span class="profile-count profile-silver-points"><span class="profile-silver-img" title="Achievements Earned"></span><span>4</span></span>                <span class="profile-count profile-gold-points"><span class="profile-gold-img" title="Achievements Earned"></span><span>4</span></span>                        </div>            <div class="profile-achievements-header">                <span class="profile-achievements-title">Recent Achievements</span>            </div>            <div class="profile-achievements-recent">                <div class="profile-achievements-centering">                                                                <span class="profile-achievement profile-achievement-Gold"><span>Ratings Board President</span></span>                                            <span class="profile-achievement profile-achievement-Silver"><span>Blog Conversation Starter</span></span>                                            <span class="profile-achievement profile-achievement-Bronze"><span>First Forums Reply</span></span>                                                            </div>            </div>            <div class="profile-footer">                                <a href="https://social.msdn.microsoft.com/profile/carl%20nolan/?ws=usercard-hover" class="profile-usercard-profileLink" target="_blank">View Profile</a>            </div>        </div></span>
    </div>
    <div class="post-date">
        <span class="value">
            2 Dec 2013 1:56 AM
        </span>
    </div>
    <div class="post-attributes">
        <div class="attribute-list-header"></div>
        <ul class="attribute-list">
             <li class="attribute-item post-reply-count">
                <span class="attribute-name">Comments</span>
                <span class="attribute-value"><a href="#comments" class="internal-link view-replies"><span></span>3</a></span>
             </li>
        </ul>
        <div class="attribute-list-footer"></div>
    </div>
    <div class="post-content user-defined-markup"><p><span lang="EN-US"><span style="font-size: 11pt;">This
 post explains how best to manage an HDInsight cluster using a 
management console and Windows PowerShell. The goal is to outline how to
 create a simple cluster, provide a mechanism for managing an elastic 
service, and demonstrate how to customize the cluster creation.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Before
 provisioning a cluster one need to ensure the Azure subscription has 
been correctly configured and a management station has been setup.</span></span></p>
<h1 style="margin: 24pt 0cm 18pt; line-height: normal; list-style-type: disc;"><a name="_Toc373503054"></a><span lang="EN-US"><span style="font-size: 18pt;">Managing Your HDInsight Cluster</span></span></h1>
<h2 style="margin: 18pt 0cm; line-height: normal; list-style-type: disc;"><a name="_Toc373503055"></a><a name="_Toc359333205"></a><span style="mso-bookmark: _toc373503055;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 16pt;">Prepare Azure Subscription Storage</span></span></span></h2>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Under
 the subscription in which the HDInsight is going to be running one 
needs a storage account defined, and a management certificate uploaded.</span></span></p>
<h3 style="margin: 18pt 0cm 12pt; line-height: normal; list-style-type: disc;"><a name="_Toc373503056"></a><a name="_Toc359333206"></a><span style="mso-bookmark: _toc373503056;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 14pt;">Create a Storage Account</span></span></span></h3>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><a href="http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-46-76-metablogapi/3124.image_5F00_03C8BE32.png"><img style="border: 0px currentcolor; display: inline; background-image: none;" title="image" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/3835.png" alt="image" border="0" height="310" width="400"></a></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Next, under the storage account management create a new default container:</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><a href="http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-46-76-metablogapi/3107.image_5F00_778467BF.png"><img style="border: 0px currentcolor; display: inline; background-image: none;" title="image" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/6175.png" alt="image" border="0" height="325" width="400"></a></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">At this point the Azure subscription is ready.</span></span></p>
<h2 style="margin: 18pt 0cm; line-height: normal; list-style-type: disc;"><a name="_Toc373503057"></a><a name="_Toc359333207"></a><a name="_Ref356565353"></a><span style="mso-bookmark: _toc359333207;"><span style="mso-bookmark: _toc373503057;"><span lang="EN-US"><span style="font-size: 16pt;">Setting Up Your Environment</span></span></span></span></h2>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Once the Azure subscription has been configured, the next step is to configure your management environment.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">The first step is to install and configure Windows Azure PowerShell. </span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Windows
 Azure PowerShell is the scripting environment that allows you to 
control and automate the deployment and management of your workloads in 
Windows Azure. This includes provisioning virtual machines, setting up 
virtual networks and cross-premises networks, and managing cloud 
services in Windows Azure.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">To
 use the cmdlets in Windows Azure PowerShell you will need to download 
and import the modules, as well as import and configure information that
 provides connectivity to Windows Azure through your subscription. For 
instructions, see </span></span><span style="font-size: 11pt;"><span lang="EN-US"><a href="http://msdn.microsoft.com/en-us/library/windowsazure/jj554332.aspx"><span style="mso-ansi-language: en;" lang="EN">Get Started with Windows Azure Cmdlets</span></a></span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">.</span></span></p>
<h3 style="margin: 18pt 0cm 12pt; line-height: normal; list-style-type: disc;"><a name="_Toc373503058"></a><a name="_Toc359333208"></a><span style="mso-bookmark: _toc373503058;"><span lang="EN-US"><span style="font-size: 14pt;">Prepare the Work Environment</span></span></span></h3>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">The basic process for running the </span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">cmdlets by using the Windows Azure PowerShell command shell is as follows:</span></span></p>
<p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 36pt; line-height: normal; text-indent: -18pt; list-style-type: disc; mso-list: l3 level1 lfo3;"><span style="mso-fareast-font-family: symbol; mso-bidi-font-family: symbol;" lang="EN-US"><span style="mso-list: ignore;"><span style="font-size: 11pt;">·</span><span style="line-height: normal; font-size-adjust: none; font-stretch: normal;"><span style="font-size: 7pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span></span><span lang="EN-US"><span style="font-size: 11pt;">Upload a Management Certificate. </span></span><span style="font-size: 11pt;"><span style="mso-ansi-language: en;" lang="EN">For more information about how to create and upload a management certificate, see </span><span lang="EN-US"><a href="http://msdn.microsoft.com/en-us/library/windowsazure/gg551721.aspx"><span style="mso-ansi-language: en;" lang="EN">How to: Manage Management Certificates in Windows Azure</span></a></span><span style="mso-ansi-language: en;" lang="EN"> and the section entitled “</span><span style="mso-ansi-language: en;" lang="EN">Create a Certificate</span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">”.</span></span></p>
<p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 36pt; line-height: normal; text-indent: -18pt; list-style-type: disc; mso-list: l3 level1 lfo3;"><span style="mso-fareast-font-family: symbol; mso-bidi-font-family: symbol; mso-ansi-language: en;" lang="EN"><span style="mso-list: ignore;"><span style="font-size: 11pt;">·</span><span style="line-height: normal; font-size-adjust: none; font-stretch: normal;"><span style="font-size: 7pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Install the Windows Azure module for Windows PowerShell. The install can be found on the </span></span><span style="font-size: 11pt;"><span lang="EN-US"><a href="http://www.windowsazure.com/en-us/downloads/?fb=en-us"><span style="mso-ansi-language: en;" lang="EN">Windows Azure Downloads</span></a></span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;"> page, under Windows.</span></span></p>
<p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 36pt; line-height: normal; text-indent: -18pt; list-style-type: disc; mso-list: l3 level1 lfo3;"><span style="mso-fareast-font-family: symbol; mso-bidi-font-family: symbol;" lang="EN-US"><span style="mso-list: ignore;"><span style="font-size: 11pt;">·</span><span style="line-height: normal; font-size-adjust: none; font-stretch: normal;"><span style="font-size: 7pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span></span><span lang="EN-US"><span style="font-size: 11pt;">Finally </span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">set the Windows PowerShell execution policy. To achieve this run the <strong style="mso-bidi-font-weight: normal;">Windows Azure PowerShell </strong>as an Administrator and execute the following command:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">Set-ExecutionPolicy RemoteSigned</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">The
 Windows PowerShell execution policy determines the conditions under 
which configuration files and scripts are run. The Windows Azure 
PowerShell cmdlets need the execution policy set to a value of 
RemoteSigned, Unrestricted, or Bypass.</span></span></p>
<h3 style="margin: 18pt 0cm 12pt; line-height: normal; list-style-type: disc;"><a name="_Toc373503059"></a><a name="_Toc359333209"></a><a name="_Ref356564342"></a><span style="mso-bookmark: _toc359333209;"><span style="mso-bookmark: _toc373503059;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 14pt;">Create a Certificate</span></span></span></span></h3>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">From a Visual Studio Command Prompt run the following:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="mso-fareast-language: en-gb;"><span style="font-size: 10pt;">makecert -sky exchange -r -n "CN=&lt;CertificateName&gt;" -pe -a sha1 -len 2048 -ss My "&lt;CertificateName&gt;.cer"</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">&nbsp;</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Where&lt;
 CertificateName&gt; is the name that you want to use for the 
certificate. It must have a .cer extension. The command loads the 
private key into your user store, indicated by the “-ss My” switch.<span style="mso-spacerun: yes;">&nbsp;</span>In the certmgr.msc, it appears in the path of Certificates -Current User\Personal\Certificates.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Upload the new certification to Azure:</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><a href="http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-46-76-metablogapi/6712.image_5F00_1684A855.png"><img style="border: 0px currentcolor; display: inline; background-image: none;" title="image" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/4174.png" alt="image" border="0" height="310" width="400"></a></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">If one needs to connect from several machines the same certificate should be installed into the user store on that machine also.</span></span></p>
<h3 style="margin: 18pt 0cm 12pt; line-height: normal; list-style-type: disc;"><a name="_Toc373503060"></a><a name="_Toc359333210"></a><a name="_Ref358016929"></a><span style="mso-bookmark: _toc359333210;"><span style="mso-bookmark: _toc373503060;"><span lang="EN-US"><span style="font-size: 14pt;">Configure Connectivity</span></span></span></span></h3>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">There
 are two ways one can configure connectivity between your workstation 
and Windows Azure. Either manually by configuring the management 
certificate and subscription details with the <strong><span style="mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi;">Set-AzureSubscription</span></strong> and <strong><span style="mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi;">Select-AzureSubscription</span></strong>
 cmdlets, or automatically by downloading the PublishSettings file from 
Windows Azure and importing it. The settings for Windows Azure 
PowerShell are stored in: <strong><span style="mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi;">&lt;user&gt;\AppData\Roaming\Windows Azure PowerShell</span></strong>.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">The
 PublishSettings file method works well when you are responsible for a 
limited number of subscriptions, but it adds a certificate to any 
subscription that you are an administrator or co-administrator for. This
 can be achieved by:</span></span></p>
<p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 36pt; line-height: normal; text-indent: -18pt; list-style-type: disc; mso-list: l2 level1 lfo4;"><span style="mso-fareast-font-family: symbol; mso-bidi-font-family: symbol; mso-ansi-language: en;" lang="EN"><span style="mso-list: ignore;"><span style="font-size: 11pt;">·</span><span style="line-height: normal; font-size-adjust: none; font-stretch: normal;"><span style="font-size: 7pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Execute the following command:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">Get-AzurePublishSettingsFile</span></p>
<p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 36pt; line-height: normal; text-indent: -18pt; list-style-type: disc; mso-list: l2 level1 lfo4;"><span style="mso-fareast-font-family: symbol; mso-bidi-font-family: symbol; mso-ansi-language: en;" lang="EN"><span style="mso-list: ignore;"><span style="font-size: 11pt;">·</span><span style="line-height: normal; font-size-adjust: none; font-stretch: normal;"><span style="font-size: 7pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Save the .publishSettings file locally.</span></span></p>
<p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 36pt; line-height: normal; text-indent: -18pt; list-style-type: disc; mso-list: l2 level1 lfo4;"><span style="mso-fareast-font-family: symbol; mso-bidi-font-family: symbol; mso-ansi-language: en;" lang="EN"><span style="mso-list: ignore;"><span style="font-size: 11pt;">·</span><span style="line-height: normal; font-size-adjust: none; font-stretch: normal;"><span style="font-size: 7pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Import the downloaded .publishSettings file by running the PowerShell command:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">Import-AzurePublishSettingsFile&lt; publishSettings-file&gt; </span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Security
 note: This file contains an encoded management certificate that will 
serve as your credentials to administer all aspects of your 
subscriptions and related services. Store this file in a secure 
location, or delete it after you follow these steps.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">In
 complex or shared development environments, it might be desirable to 
manually configure the publish settings and subscription information, 
including any management certificates, for your Windows Azure 
subscriptions. This is achieved by running the following script:</span></span></p>
<p class="CodeLineCxSpFirst" style="margin: 3pt 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$mySubID = "&lt;subscritionID&gt;"</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$certThumbprint = "&lt;Thumbprint&gt;"</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$myCert = Get-Item cert:\CurrentUser\My\$certThumbprint</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$mySubName = "&lt;SubscriptionName&gt;"</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$myStoreAcct = "&lt;StorageAccount&gt;"</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">&nbsp;</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">Set-AzureSubscription -SubscriptionName $mySubName -Certificate $myCert -SubscriptionID $mySubID</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">&nbsp;</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">Select-AzureSubscription -Default $mySubName</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">Set-AzureSubscription –SubscriptionName $mySubName -CurrentStorageAccount $myStoreAcct</span></p>
<p class="CodeLineCxSpLast" style="margin: 0cm 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">You can view the details of the Azure Subscription run the command:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">Get-AzureSubscription –Default</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Or:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">Get-AzureSubscription -Current</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">This script uses the <strong style="mso-bidi-font-weight: normal;">Set-AzureSubscription</strong>
 cmdlet. This cmdlet can be used to configure a default Windows Azure 
subscription, set a default storage account, or a custom Windows Azure 
service endpoint:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">Set-AzureSubscription -DefaultSubscription $mySubName</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">You can also just select a subscription for the current session using:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">Select-AzureSubscription -SubscriptionName $mySubName</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">When managing your cluster and you have multiple subscription it is advisable to set the default subscription.</span></span></p>
<h3 style="margin: 18pt 0cm 12pt; line-height: normal; list-style-type: disc;"><a name="_Toc373503061"></a><a name="_Toc359333211"></a><a name="_Ref356565468"></a><span style="mso-bookmark: _toc359333211;"><span style="mso-bookmark: _toc373503061;"><span lang="EN-US"><span style="font-size: 14pt;">Install HDInsight cmdlets</span></span></span></span></h3>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Ensure the HDInsight binaries are accessible and loaded. They can be downloaded from:</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><a href="http://www.microsoft.com/en-gb/download/details.aspx?id=40724"><span style="font-size: 11pt;">http://www.microsoft.com/en-gb/download/details.aspx?id=40724</span></a><span style="mso-spacerun: yes;"><span style="font-size: 11pt;">&nbsp;</span></span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Once downloaded and installed </span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">they are ready to be loaded into Azure PowerShell environment:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">Import-Module
 "C:\Program Files (x86)\Windows Azure HDInsight 
PowerShell\Microsoft.WindowsAzure.Management.HDInsight.Cmdlet\Microsoft.WindowsAzure.Management.HDInsight.Cmdlet.dll"</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Assuming the Windows Azure HDInsight PowerShell Tools were installed to the default directory.</span></span></p>
<h2 style="margin: 18pt 0cm; line-height: normal; list-style-type: disc;"><a name="_Toc373503062"></a><a name="_Toc359333212"></a><a name="_Ref356565162"></a><span style="mso-bookmark: _toc359333212;"><span style="mso-bookmark: _toc373503062;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 16pt;">Cluster Provisioning</span></span></span></span></h2>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">There
 are various ways one can provision a new cluster. If using the 
Management Portal there is a simple UX process once can follow:</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><a href="http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-46-76-metablogapi/1526.image_5F00_70D84EA8.png"><img style="border: 0px currentcolor; display: inline; background-image: none;" title="image" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/1172.png" alt="image" border="0" height="172" width="400"></a></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">However
 for an automated process it is recommended that PowerShell is utilized.
 In running the script to be presented one has to remember load the 
HDInsight management binaries, as outlined in the “</span></span><span style="font-size: 11pt;"><span lang="EN-US">Install HDInsight cmdlets</span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">” step.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">The following sections present a series of scripts for automating cluster management. Further examples can also be found at </span></span><span lang="EN-US"><span style="font-size: 11pt;"><a href="http://hadoopsdk.codeplex.com/wikipage?title=PowerShell%20Cmdlets%20for%20Cluster%20Management&amp;referringTitle=Cluster%20Management">Microsoft .Net SDK for Hadoop - PowerShell Cmdlets for Cluster Management</a>.</span></span></p>
<h3 style="margin: 18pt 0cm 12pt; line-height: normal; list-style-type: disc;"><a name="_Toc373503063"></a><a name="_Toc359333213"></a><span style="mso-bookmark: _toc373503063;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 14pt;">Provision Base Cluster</span></span></span></h3>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Firstly
 one need access to the Subscription Id and Certificate, for the current
 Azure Subscription, which was registered in the “</span></span><span style="font-size: 11pt;"><span lang="EN-US">Setting Up Your Environment</span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">” step.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">When running these scripts the italicized variables will first need to be defined.</span></span></p>
<p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 36pt; line-height: normal; text-indent: -18pt; list-style-type: disc; mso-list: l1 level1 lfo5;"><span style="mso-fareast-font-family: 'Segoe UI'; mso-bidi-font-family: 'Segoe UI'; mso-ansi-language: en;" lang="EN"><span style="mso-list: ignore;"><span style="font-size: 11pt;">1.</span><span style="line-height: normal; font-size-adjust: none; font-stretch: normal;"><span style="font-size: 7pt;">&nbsp;&nbsp;&nbsp; </span></span></span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">In
 this version you need to explicitly specify subscription information 
for cmdlets. The plan is after the cmdlets are integrated with Azure 
PowerShell tools this step won’t be necessary. Once can get the Default 
or Current subscription:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="mso-spacerun: yes;"><span style="font-size: 10pt;">&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt;">$subscriptionInfo = Get-AzureSubscription -Default</span></p>
<p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 36pt; line-height: normal; text-indent: -18pt; list-style-type: disc; mso-list: l1 level1 lfo5;"><span style="mso-fareast-font-family: 'Segoe UI'; mso-bidi-font-family: 'Segoe UI'; mso-ansi-language: en;" lang="EN"><span style="mso-list: ignore;"><span style="font-size: 11pt;">2.</span><span style="line-height: normal; font-size-adjust: none; font-stretch: normal;"><span style="font-size: 7pt;">&nbsp;&nbsp;&nbsp; </span></span></span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Once the Subscription Information has been obtained the properties of the Subscription are accessible:</span></span></p>
<p class="CodeLineCxSpFirst" style="margin: 3pt 0cm 0pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">$subName = $subscriptionInfo | %{ $_.SubscriptionName }</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">$subId = $subscriptionInfo | %{ $_.SubscriptionId }</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">$cert = $subscriptionInfo | %{ $_.Certificate }</span></p>
<p class="CodeLineCxSpLast" style="margin: 0cm 0cm 3pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">$storeAccount = $subscriptionInfo | %{ $_.CurrentStorageAccountName }</span></p>
<p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 36pt; line-height: normal; text-indent: -18pt; list-style-type: disc; mso-list: l1 level1 lfo5;"><span style="mso-fareast-font-family: 'Segoe UI'; mso-bidi-font-family: 'Segoe UI'; mso-ansi-language: en;" lang="EN"><span style="mso-list: ignore;"><span style="font-size: 11pt;">3.</span><span style="line-height: normal; font-size-adjust: none; font-stretch: normal;"><span style="font-size: 7pt;">&nbsp;&nbsp;&nbsp; </span></span></span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Get the Storage Account Key so you can use it later.</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">$key = Get-AzureStorageKey $storeAccount | %{ $_.Primary }</span></p>
<p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 36pt; line-height: normal; text-indent: -18pt; list-style-type: disc; mso-list: l1 level1 lfo5;"><span style="mso-fareast-font-family: 'Segoe UI'; mso-bidi-font-family: 'Segoe UI'; mso-ansi-language: en;" lang="EN"><span style="mso-list: ignore;"><span style="font-size: 11pt;">4.</span><span style="line-height: normal; font-size-adjust: none; font-stretch: normal;"><span style="font-size: 7pt;">&nbsp;&nbsp;&nbsp; </span></span></span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Next get the Storage Account information:</span></span></p>
<p class="CodeLineCxSpFirst" style="margin: 3pt 0cm 0pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">$storageAccountInfo = Get-AzureStorageAccount $storeAccount</span></p>
<p class="CodeLineCxSpLast" style="margin: 0cm 0cm 3pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">$location = $storageAccountInfo | %{ $_.Location }</span></p>
<p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 36pt; line-height: normal; text-indent: -18pt; list-style-type: disc; mso-list: l1 level1 lfo5;"><span style="mso-fareast-font-family: 'Segoe UI'; mso-bidi-font-family: 'Segoe UI'; mso-ansi-language: en;" lang="EN"><span style="mso-list: ignore;"><span style="font-size: 11pt;">5.</span><span style="line-height: normal; font-size-adjust: none; font-stretch: normal;"><span style="font-size: 7pt;">&nbsp;&nbsp;&nbsp; </span></span></span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Define the PS Credentials to be used when creating the cluster:</span></span></p>
<p class="CodeLineCxSpFirst" style="margin: 3pt 0cm 0pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">$hadoopUsername = "Hadoop"</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">$clusterUsername = "Admin"</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">$clusterPassword = "<em style="mso-bidi-font-style: normal;">MyPassword</em>"</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">$secpasswd = ConvertTo-SecureString $clusterPassword -AsPlainText -Force</span></p>
<p class="CodeLineCxSpLast" style="margin: 0cm 0cm 3pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">$clusterCreds = New-Object System.Management.Automation.PSCredential($clusterUsername, $secpasswd)</span></p>
<p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 36pt; line-height: normal; text-indent: -18pt; list-style-type: disc; mso-list: l1 level1 lfo5;"><span style="mso-fareast-font-family: 'Segoe UI'; mso-bidi-font-family: 'Segoe UI'; mso-ansi-language: en;" lang="EN"><span style="mso-list: ignore;"><span style="font-size: 11pt;">6.</span><span style="line-height: normal; font-size-adjust: none; font-stretch: normal;"><span style="font-size: 7pt;">&nbsp;&nbsp;&nbsp; </span></span></span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Define the final cluster creation parameters:</span></span></p>
<p class="CodeLineCxSpFirst" style="margin: 3pt 0cm 0pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">$clusterName = </span><em style="mso-bidi-font-style: normal;"><span style="font-size: 10pt;">$Cluster</span></em></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">$numberNodes = </span><em style="mso-bidi-font-style: normal;"><span style="font-size: 10pt;">$Hosts</span></em></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">$containerDefault = $StorageContainer</span></p>
<p class="CodeLineCxSpLast" style="margin: 0cm 0cm 3pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">$blobStorage = "$storeAccount.blob.core.windows.net"</span></p>
<p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 36pt; line-height: normal; text-indent: -18pt; list-style-type: disc; mso-list: l1 level1 lfo5;"><span style="mso-fareast-font-family: 'Segoe UI'; mso-bidi-font-family: 'Segoe UI'; mso-ansi-language: en;" lang="EN"><span style="mso-list: ignore;"><span style="font-size: 11pt;">7.</span><span style="line-height: normal; font-size-adjust: none; font-stretch: normal;"><span style="font-size: 7pt;">&nbsp;&nbsp;&nbsp; </span></span></span></span><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Finally create new cluster. The cmdlet will return Cluster object in about 10-15 minutes when cluster is finished provisioning:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 36pt; line-height: 11pt; list-style-type: disc; mso-add-space: auto;"><span style="font-size: 10pt;">New-AzureHDInsightCluster
 -Subscription $subId -Certificate $cert -Name $clusterName -Location 
$location -DefaultStorageAccountName $blobStorage 
-DefaultStorageAccountKey $key -DefaultStorageContainerName 
$containerDefault -Credential $clusterCreds -ClusterSizeInNodes 
$numberNodes</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Once the cluster has been created you will see the results displayed on the screen:</span></span></p>
<p class="CodeLineCxSpFirst" style="margin: 3pt 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">Name<span style="mso-spacerun: yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>: carlhdinsighttest</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">ConnectionUrl<span style="mso-spacerun: yes;">&nbsp;&nbsp;&nbsp;&nbsp; </span>: https://carlhdinsighttest.azurehdinsight.net</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">State<span style="mso-spacerun: yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>: Running</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">CreateDate<span style="mso-spacerun: yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>: 07/11/2013 14:16:37</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">UserName<span style="mso-spacerun: yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>: Username</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">Location<span style="mso-spacerun: yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>: Location</span></p>
<p class="CodeLineCxSpLast" style="margin: 0cm 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">ClusterSizeInNodes : 4</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">You will also be able to see the cluster in the management portal:</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><a href="http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-46-76-metablogapi/0131.image_5F00_3BF2FB7E.png"><img style="margin: 0px; border: 0px currentcolor; display: inline; background-image: none;" title="image" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/4073.png" alt="image" border="0" height="256" width="400"></a></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">If
 the subscription one is managing is not the configured default, before 
creating the cluster, one should execute the following command:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">Set-AzureSubscription -DefaultSubscription $mySubName</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">To
 create a script that enables one to pass in parameters, such as the 
number of required hosts, you can define a Param statement as the first 
line of the script:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">Param($Hosts = 4, [string] $Cluster = $(throw "Cluster Name Required."), [string] $StorageContainer = "hadooproot")</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">The complete script would thus be as follows:</span></span></p>
<div style="padding: 1pt 4pt; border: 1pt solid windowtext; line-height: normal; list-style-type: disc; mso-border-alt: solid windowtext .5pt; mso-element: para-border-div;">
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Param($Hosts = 4, [string] $Cluster = $(throw "Cluster Name Required."), [string] $StorageContainer = "hadooproot")</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Import the management module and assemblies</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Import-Module
 "C:\Program Files (x86)\Windows Azure HDInsight 
PowerShell\Microsoft.WindowsAzure.Management.HDInsight.Cmdlet\Microsoft.WindowsAzure.Management.HDInsight.Cmdlet.dll"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Add-Type –AssemblyName System.Web</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Get the subscription information and set variables</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$subscriptionInfo = Get-AzureSubscription -Default</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$subName = $subscriptionInfo | %{ $_.SubscriptionName }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$subId = $subscriptionInfo | %{ $_.SubscriptionId }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$cert = $subscriptionInfo | %{ $_.Certificate }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$storeAccount = $subscriptionInfo | %{ $_.CurrentStorageAccountName }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$key = Get-AzureStorageKey $storeAccount | %{ $_.Primary }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$storageAccountInfo = Get-AzureStorageAccount $storeAccount</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$location = $storageAccountInfo | %{ $_.Location }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$hadoopUsername = "Hadoop"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterUsername = "Admin"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterPassword = "mypassword"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$secpasswd = ConvertTo-SecureString $clusterPassword -AsPlainText -Force</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterCreds = New-Object System.Management.Automation.PSCredential($clusterUsername, $secpasswd)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterName = $Cluster</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$numberNodes = $Hosts</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$containerDefault = $StorageContainer</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$blobStorage = "$storeAccount.blob.core.windows.net"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Create the cluster</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Creating '$numbernodes' Node Cluster named: $clusterName" -f yellow</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Storage Account '$storeAccount' and Container '$containerDefault'" -f yellow</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "User '$clusterUsername' Password '$clusterPassword'" -f green</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">New-AzureHDInsightCluster
 -Subscription $subId -Certificate $cert -Name $clusterName -Location 
$location -DefaultStorageAccountName $blobStorage 
-DefaultStorageAccountKey $key -DefaultStorageContainerName 
$containerDefault -Credential $clusterCreds -ClusterSizeInNodes 
$numberNodes</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Created '$numberNodes' Node Cluster: $clusterName" -f yellow</span></span></p>
</div>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">The script can then be executed as follows:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">. "C:\Scripts\ClusterCreate.ps1" -Hosts 4 -Cluster "carlhdinsighttest" -StorageContainer "hadooproot"</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Of course other variables can also be passed in.</span></span></p>
<h3 style="margin: 18pt 0cm 12pt; line-height: normal; list-style-type: disc;"><a name="_Toc373503064"></a><a name="_Toc359333214"></a><span style="mso-bookmark: _toc373503064;"><span lang="EN-US"><span style="font-size: 14pt;">Manage Cluster</span></span></span></h3>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">One can view your current clusters within the current subscription using the following command:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">Get-AzureHDInsightCluster -Subscription $subId -Certificate $cert</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en; mso-fareast-language: en-gb;" lang="EN"><span style="font-size: 11pt;">To view the details of a specific cluster use the following command:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="mso-fareast-language: en-gb;"><span style="font-size: 10pt;">Get-AzureHDInsightCluster $clusterName -Subscription $subId -Certificate $cert</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">To delete the cluster run the command:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="mso-fareast-language: en-gb;"><span style="font-size: 10pt;">Remove-AzureHDInsightCluster $clusterName -Subscription $subId -Certificate $cert</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Thus a script one could use to delete clusters would be:</span></span></p>
<div style="padding: 1pt 4pt; border: 1pt solid windowtext; line-height: normal; list-style-type: disc; mso-border-alt: solid windowtext .5pt; mso-element: para-border-div;">
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Param($Cluster = $(throw "Cluster Name Required."))</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Import the management module</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Import-Module
 "C:\Program Files (x86)\Windows Azure HDInsight 
PowerShell\Microsoft.WindowsAzure.Management.HDInsight.Cmdlet\Microsoft.WindowsAzure.Management.HDInsight.Cmdlet.dll"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Get the subscription information and set variables</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$subscriptionInfo = Get-AzureSubscription -Default</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$subName = $subscriptionInfo | %{ $_.SubscriptionName }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$subId = $subscriptionInfo | %{ $_.SubscriptionId }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$cert = $subscriptionInfo | %{ $_.Certificate }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$storeAccount = $subscriptionInfo | %{ $_.CurrentStorageAccountName }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterName = $Cluster</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Delete the cluster</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Deleting Cluster named: $clusterName" -f yellow</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Remove-AzureHDInsightCluster $clusterName -Subscription $subId -Certificate $cert</span></span></p>
</div>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">The script can then be executed as follows:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">. "C:\Scripts\ClusterDelete.ps1" -Cluster "carlhdinsighttest"</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">There are few word that need to be mentioned around versioning and cluster name.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span class="MsoSubtleEmphasis"><span lang="EN-US"><span style="font-size: 11pt;">When
 a cluster is currently provisioned you will always get the latest 
build. However if there are breaking changes between your current build 
and latest build currently executing code could break. Future versions 
of the cluster provisioning may allow for a version number to be 
specified.</span></span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span class="MsoSubtleEmphasis"><span lang="EN-US"><span style="font-size: 11pt;">Also,
 when you delete a cluster there is no guarantee that when you recreate 
the cluster the name will be available. To ensure that your name is not 
going to be used abstract cluster names should be used.</span></span></span></p>
<h3 style="margin: 18pt 0cm 12pt; line-height: normal; list-style-type: disc;"><a name="_Toc373503065"></a><a name="_Toc359333215"></a><a name="_Ref359312012"></a><span style="mso-bookmark: _toc359333215;"><span style="mso-bookmark: _toc373503065;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 14pt;">Provision Customized Cluster</span></span></span></span></h3>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">You
 can also provision cluster and configure it to connect to more than one
 Azure Blob storage or custom Hive and Oozie meta-stores.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><em><span style="mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi;" lang="EN-US"><span style="font-size: 11pt;">This
 advanced feature allows you to separate the lifetime of your data and 
metadata from the lifetime of the cluster. This not only includes job 
submission details but also allows one to retain Hive metadata, and 
hence table definitions, as long as Hive External tables are used.</span></span></em></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Using
 the same principal of defining the italicized variables first, the 
first step is to get the subscription details and the storage key of the
 storage accounts you want to connect your cluster to, in this case 2 
storage accounts:</span></span></p>
<p class="CodeLineCxSpFirst" style="margin: 3pt 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$subscriptionInfo = Get-AzureSubscription -Default</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">&nbsp;</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$subName = $subscriptionInfo | %{ $_.SubscriptionName }</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$subId = $subscriptionInfo | %{ $_.SubscriptionId }</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$cert = $subscriptionInfo | %{ $_.Certificate }</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$storeAccount = $subscriptionInfo | %{ $_.CurrentStorageAccountName }</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$storeAccountBck = $storeAccount + "<em style="mso-bidi-font-style: normal;">bck</em>" # Assume same name with bck suffix</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">&nbsp;</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$key = Get-AzureStorageKey $storeAccount | %{ $_.Primary }</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$keyBck = Get-AzureStorageKey $storeAccountBck | %{ $_.Primary }</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">&nbsp;</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$storageAccountInfo = Get-AzureStorageAccount $storeAccount</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$location = $storageAccountInfo | %{ $_.Location }</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">&nbsp;</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$hadoopUsername = "Hadoop"</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$clusterUsername = "Admin"</span><span style="mso-tab-count: 1;"><span style="font-size: 10pt;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$clusterPassword = "<em style="mso-bidi-font-style: normal;">Password</em>"</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">&nbsp;</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$secpasswd = ConvertTo-SecureString $clusterPassword -AsPlainText -Force</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$clusterCreds = New-Object System.Management.Automation.PSCredential($clusterUsername, $secpasswd)</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">&nbsp;</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$clusterName = $Cluster</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$numberNodes = $Hosts</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$containerDefault = $StorageContainer</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$blobStorage = "$storeAccount.blob.core.windows.net"</span></p>
<p class="CodeLineCxSpLast" style="margin: 0cm 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$blobStorageBck = "$storeAccountBck.blob.core.windows.net"</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">In
 this instance I have assumed that the secondary (backup) storage 
account has the same name as the original with a “bck” prefix. This 
however can be configured for your environment.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">The next step is to create your custom SQL Azure Database and Server following this <a href="http://blogs.msdn.com/b/windowsazure/archive/2013/02/07/windows-azure-sql-database-management-with-powershell.aspx">blog post</a> or get credentials to the existing one</span></span><span style="line-height: 11pt; mso-bidi-font-family: 'Segoe UI'; mso-ansi-language: en;" lang="EN"><span style="font-size: 9.5pt;">.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">To create a SQL Database one can easily use the management portal:</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><a href="http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-46-76-metablogapi/0564.image_5F00_5294881E.png"><img style="border: 0px currentcolor; display: inline; background-image: none;" title="image" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/4645.png" alt="image" border="0" height="295" width="400"></a><span style="mso-fareast-font-family: wingdings; mso-bidi-font-family: wingdings; mso-ansi-language: en; mso-bidi-font-size: 9.5pt;" lang="EN"><span style="mso-list: ignore;"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/PicExportError" alt="*" height="10" width="10"><span style="line-height: normal; font-size-adjust: none; font-stretch: normal;"><span style="font-size: 7pt;">&nbsp; </span></span></span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Using
 this connectivity information you can create cluster config object, 
pipe in additional storage and meta-stores configuration, and then 
finally pipe this config object into the New-AzureHDInsightCluster 
cmdlet to create a cluster based on this custom configuration.</span></span></p>
<p class="CodeLineCxSpFirst" style="margin: 3pt 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">New-AzureHDInsightClusterConfig -ClusterSizeInNodes $numberNodes</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="mso-spacerun: yes;"><span style="font-size: 10pt;">&nbsp;</span></span><span style="font-size: 10pt;"><span style="mso-spacerun: yes;">&nbsp;</span>|
 Set-AzureHDInsightDefaultStorage -StorageAccountName $blobStorage 
-StorageAccountKey $key -StorageContainerName $containerDefault</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="mso-spacerun: yes;"><span style="font-size: 10pt;">&nbsp;</span></span><span style="font-size: 10pt;"><span style="mso-spacerun: yes;">&nbsp;</span>| Add-AzureHDInsightStorage -StorageAccountName $blobStorageBck -StorageAccountKey $keyBck</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="mso-spacerun: yes;"><span style="font-size: 10pt;">&nbsp;</span></span><span style="font-size: 10pt;"><span style="mso-spacerun: yes;">&nbsp;</span>|
 Add-AzureHDInsightMetastore -SqlAzureServerName $sqlServer 
-DatabaseName $databaseOozie -Credential $databaseCreds -MetastoreType 
OozieMetastore</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="mso-spacerun: yes;"><span style="font-size: 10pt;">&nbsp;</span></span><span style="font-size: 10pt;"><span style="mso-spacerun: yes;">&nbsp;</span>|
 Add-AzureHDInsightMetastore -SqlAzureServerName $sqlServer 
-DatabaseName $databaseHive -Credential $databaseCreds -MetastoreType 
HiveMetastore</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="mso-spacerun: yes;"><span style="font-size: 10pt;">&nbsp;</span></span><span style="font-size: 10pt;"><span style="mso-spacerun: yes;">&nbsp;</span>|
 New-AzureHDInsightCluster -Subscription $subId -Certificate $cert 
-Credential $clusterCreds -Name $clusterName -Location $location</span></p>
<p class="CodeLineCxSpLast" style="margin: 0cm 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">In
 this instance I have again assumed that the Oozie and Hive database 
servers are the same and that the credentials are shared. S before this 
can easily be configured for your environment.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">As
 before one can use the PowerShell Param option to create a script that 
enables passing in parameters; such as number hosts, cluster name, etc.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">A complete configurable script would be as follows:</span></span></p>
<div style="padding: 1pt 4pt; border: 1pt solid windowtext; line-height: normal; list-style-type: disc; mso-border-alt: solid windowtext .5pt; mso-element: para-border-div;">
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Param($Hosts = 4, [string] $Cluster = $(throw "Cluster Name Required."), [string] $StorageContainer = "hadooproot")</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Import the management module and assemblies</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Import-Module
 "C:\Program Files (x86)\Windows Azure HDInsight 
PowerShell\Microsoft.WindowsAzure.Management.HDInsight.Cmdlet\Microsoft.WindowsAzure.Management.HDInsight.Cmdlet.dll"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Add-Type –AssemblyName System.Web</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Get the subscription information and set variables</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$subscriptionInfo = Get-AzureSubscription -Default</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$subName = $subscriptionInfo | %{ $_.SubscriptionName }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$subId = $subscriptionInfo | %{ $_.SubscriptionId }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$cert = $subscriptionInfo | %{ $_.Certificate }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$storeAccount = $subscriptionInfo | %{ $_.CurrentStorageAccountName }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$storeAccountBck = $storeAccount + "bck" # Assume same name with bck suffix</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$key = Get-AzureStorageKey $storeAccount | %{ $_.Primary }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$keyBck = Get-AzureStorageKey $storeAccountBck | %{ $_.Primary }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$storageAccountInfo = Get-AzureStorageAccount $storeAccount</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$location = $storageAccountInfo | %{ $_.Location }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$hadoopUsername = "Hadoop"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterUsername = "Admin"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterPassword = "Password"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$secpasswd = ConvertTo-SecureString $clusterPassword -AsPlainText -Force</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterCreds = New-Object System.Management.Automation.PSCredential($clusterUsername, $secpasswd)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterName = $Cluster</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$numberNodes = $Hosts</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$containerDefault = $StorageContainer</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$blobStorage = "$storeAccount.blob.core.windows.net"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$blobStorageBck = "$storeAccountBck.blob.core.windows.net"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Define variables for the SQL database connectivity</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$sqlServer = "servername.database.windows.net"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$sqlUsername = "SqlUsername"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$sqlPassword = "SqlPassword"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$sqlpasswd = ConvertTo-SecureString $sqlPassword -AsPlainText -Force</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$databaseCreds = New-Object System.Management.Automation.PSCredential($sqlUsername, $sqlpasswd)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$databaseHive = "HiveDatabaseName"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$databaseOozie = "OozieDatabaseName"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Create the cluster</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Creating '$numberNodes' Node Cluster named: $clusterName" -f yellow</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Storage Account '$storeAccount' and Container '$containerDefault'" -f yellow</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Storage Account Backup '$storeAccountBck'" -f yellow</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "User '$clusterUsername' Password '$clusterPassword'" -f green</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">New-AzureHDInsightClusterConfig
 -ClusterSizeInNodes $numberNodes | Set-AzureHDInsightDefaultStorage 
-StorageAccountName $blobStorage -StorageAccountKey $key 
-StorageContainerName $containerDefault | Add-AzureHDInsightStorage 
-StorageAccountName $blobStorageBck -StorageAccountKey $keyBck | 
Add-AzureHDInsightMetastore -SqlAzureServerName $sqlServer -DatabaseName
 $databaseOozie -Credential $databaseCreds -MetastoreType OozieMetastore
 | Add-AzureHDInsightMetastore -SqlAzureServerName $sqlServer 
-DatabaseName $databaseHive -Credential $databaseCreds -MetastoreType 
HiveMetastore | New-AzureHDInsightCluster -Subscription $subId 
-Certificate $cert -Credential $clusterCreds -Name $clusterName 
-Location $location</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Created '$numberNodes' Node Cluster: $clusterName" -f yellow</span></span></p>
</div>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">The script can then be executed as follows:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">. "C:\Scripts\ClusterCreateCustom.ps1" -Hosts 4 -Cluster "carlhdinsighttest" -StorageContainer "hadooproot"</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Of course other variables can also be passed in.</span></span></p>
<h1 style="margin: 24pt 0cm 18pt; line-height: normal; list-style-type: disc;"><a name="_Toc373503066"></a><a name="_Toc359333216"></a><span style="mso-bookmark: _toc373503066;"><span lang="EN-US"><span style="font-size: 18pt;">Job Submission</span></span></span></h1>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">In
 addition to managing the HDInsight cluster the Microsoft .Net SDK for 
Hadoop also allows one to write MapReduce jobs utilizing the .Net 
Framework. Under the covers this is employing the Hadoop Streaming 
interface. The documentation for creating such jobs can be found at:</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><a href="http://hadoopsdk.codeplex.com/wikipage?title=Map%2fReduce"><span style="font-size: 11pt;">http://hadoopsdk.codeplex.com/wikipage?title=Map%2fReduce</span></a></span></p>
<h2 style="margin: 18pt 0cm; line-height: normal; list-style-type: disc;"><a name="_Toc373503067"></a><a name="_Toc359333217"></a><span style="mso-bookmark: _toc373503067;"><span lang="EN-US"><span style="font-size: 16pt;">MRRunner Support</span></span></span></h2>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">To
 submit such jobs there is a command-line utility called MRRunner that 
should be utilized. To support the MRRunner utility you should have an 
assembly (a .net DLL or EXE) that defines at least one implementation of
 HadoopJob&lt;&gt;.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">If the Dll contains only one implementation of Hadoop&lt;&gt;, you can run the job with:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">MRRunner -dll MyDll </span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">If the Dll contains multiple implementations of HadoopJob&lt;&gt;, then you need to indicate the one you wish to run:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">MRRunner -dll MyDll -class MyClass </span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">To supply options to your job, pass them as trailing arguments on the command-line, after a double-hyphen:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">MRRunner -dll MyDll -class MyClass -- extraArg1 extraArg2 </span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">These additional arguments are provided to your job via a context object that is available to all methods on HadoopJob&lt;&gt;.</span></span></p>
<h2 style="margin: 18pt 0cm; line-height: normal; list-style-type: disc;"><a name="_Toc373503068"></a><a name="_Toc359333218"></a><span style="mso-bookmark: _toc373503068;"><span lang="EN-US"><span style="font-size: 16pt;">Local PowerShell Submission</span></span></span></h2>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Of course one can submit job directly from a .Net executable and thus PowerShell scripts.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">MapReduceJob
 is a property on Hadoop connection object. It provides access to 
implementation of IStreamingJobExecutor interface which handles the 
creation and execution of Hadoop Streaming jobs. Depending on how the 
connection object was created it can execute jobs locally using Hadoop 
command-line or against remote cluster using WebHCat client library. </span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Under the covers the MRRunner utility will invoke LocalStreamingJobExecutor implementation on your behalf.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Alternatively one can invoke the executor directly and request it execute a Hadoop Job:</span></span></p>
<p class="CodeLineCxSpFirst" style="margin: 3pt 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="mso-spacerun: yes;"><span style="font-size: 10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt;">var hadoop = Hadoop.Connect();</span></p>
<p class="CodeLineCxSpLast" style="margin: 0cm 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="mso-spacerun: yes;"><span style="font-size: 10pt;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt;">hadoop.MapReduceJob.ExecuteJob&lt;JobType&gt;(arguments);</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Utilizing this approach one can thus integrate Job Submission into cluster management scripts:</span></span></p>
<div style="padding: 1pt 4pt; border: 1pt solid windowtext; line-height: normal; list-style-type: disc; mso-border-alt: solid windowtext .5pt; mso-element: para-border-div;">
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Define Base Paths</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$BasePath = "C:\Users\Carl\Projects"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$dllPath = $BasePath + "\WordCountSampleApplication\Debug"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$submitterDll = $dllPath + "\WordCount.dll"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$hadoopcmd = $env:HADOOP_HOME + "/bin/hadoop.cmd"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Add submission file references</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Add-Type -Path ($dllPath + "\microsoft.hadoop.mapreduce.dll")</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Define the Type for the Job</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$submitterAssembly = [System.Reflection.Assembly]::LoadFile($submitterDll)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">[Type] $jobType = $submitterAssembly.GetType("WordCountSampleApplication.WordCount", 1)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Connect and Run the Job</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$hadoop = [Microsoft.Hadoop.MapReduce.Hadoop]::Connect()</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$job = $hadoop.MapReduceJob</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$result = $job.ExecuteJob($jobType)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Job Run Information"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Job Id: " $result.Id</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Exit Code: " $result.Info.ExitCode</span></span></p>
</div>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">The only challenge becomes managing the generic objects within PowerShell.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">In
 this case I have used a version of the WordCount sample that comes with
 the SDK. I have removed the Driver entry point and compiled the 
assembly into a DLL rather than an EXE.</span></span></p>
<h2 style="margin: 18pt 0cm; line-height: normal; list-style-type: disc;"><a name="_Toc373503069"></a><a name="_Toc359333219"></a><span style="mso-bookmark: _toc373503069;"><span lang="EN-US"><span style="font-size: 16pt;">Remote PowerShell Submission</span></span></span></h2>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Of
 course the ultimate goal is to submit the job from your management 
console. The process for this is very similar to the Local submission, 
with the inclusion of the connection information for the Azure cluster.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">To
 provide flexibility in the job configuration allowing for a 
configuration object to be defined in the PowerShell script and for the 
mappers and reducers to be defined is desirable. This the full 
submission script would be as follows:</span></span></p>
<div style="padding: 1pt 4pt; border: 1pt solid windowtext; line-height: normal; list-style-type: disc; mso-border-alt: solid windowtext .5pt; mso-element: para-border-div;">
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Param($Cluster
 = $(throw "Cluster Name Required."), [string] $StorageContainer = 
"hadooproot", [string] $InputPath = $(throw "Input Path Required."), 
[string] $OutputFolder = $(throw "Output Path Required."), [string] $Dll
 = $(throw "MapReduce Dll Path Required."), [string] $Mapper = $(throw 
"Mapper Type Required."), [string] $Reducer = $Null, [string] $Combiner =
 $Null)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Define all local variable names for script execution</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$submitterDll = $Dll</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$dllPath = Split-Path $submitterDll -parent</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$dllFile = Split-Path $submitterDll -leaf</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Import the management module and assemblies</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Import-Module
 "C:\Program Files (x86)\Windows Azure HDInsight 
PowerShell\Microsoft.WindowsAzure.Management.HDInsight.Cmdlet\Microsoft.WindowsAzure.Management.HDInsight.Cmdlet.dll"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Add-Type -Path ($dllPath + "\microsoft.hadoop.mapreduce.dll")</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Add-Type -Path ($dllPath + "\microsoft.hadoop.webclient.dll")</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Get the subscription information and set variables</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$subscriptionInfo = Get-AzureSubscription -Default</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$subName = $subscriptionInfo | %{ $_.SubscriptionName }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$subId = $subscriptionInfo | %{ $_.SubscriptionId }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$cert = $subscriptionInfo | %{ $_.Certificate }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$storeAccount = $subscriptionInfo | %{ $_.CurrentStorageAccountName }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$key = Get-AzureStorageKey $storeAccount | %{ $_.Primary }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$storageAccountInfo = Get-AzureStorageAccount $storeAccount</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterUsername = "Admin"</span><span style="mso-tab-count: 7;"><span style="font-size: 8pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 </span></span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterPassword = "Password"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$hadoopUsername = "Hadoop"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$containerDefault = $StorageContainer</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterName = $Cluster</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterHttp = "https://$clusterName.azurehdinsight.net"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$blobStorage = "$storeAccount.blob.core.windows.net"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Define the Types for the Job (Mapper. Reducer, Combiner)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$submitterAssembly = [System.Reflection.Assembly]::LoadFile($submitterDll)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">[Type] $mapperType = $submitterAssembly.GetType($Mapper, 1)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">[Type] $reducerType = $Null</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">if ($Reducer) { $reducerType = $submitterAssembly.GetType($Reducer, 1) }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">[Type] $combinerType = $Null</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">if ($Combiner) { $combinerType = $submitterAssembly.GetType($Combiner, 1) }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Define the configuration properties</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$config = New-Object Microsoft.Hadoop.MapReduce.HadoopJobConfiguration</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">[Boolean] $config.Verbose = $True</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$config.InputPath = $InputPath</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$config.OutputFolder = $OutputFolder</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Define the connection properties</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">[Boolean] $createContinerIfNotExist = $True</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">[Uri] $clusterUri = New-Object System.Uri $clusterHttp</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Connect and Run the Job</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Executing Job Dll '$dllFile' on Cluster $clusterName" -f yellow</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$hadoop
 = [Microsoft.Hadoop.MapReduce.Hadoop]::Connect($clusterUri, 
$clusterUsername, $hadoopUsername, $clusterPassword, $blobStorage, $key,
 $containerDefault, $createContinerIfNotExist)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$job = $hadoop.MapReduceJob</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$result = $job.Execute($mapperType, $reducerType, $combinerType, $config)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Job Run Information" -f yellow</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Job Id: " $result.Id</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Exit Code: " $result.Info.ExitCode</span></span></p>
</div>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">The HadoopJobConfiguration allows for the definition of input and output files, along with other job parameters.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">To
 execute the job one has to provide the types for the Mapper, Reducer, 
and Combiner. If a Reducer or Combiner are not needed then the parameter
 value of $Null can be used:</span></span></p>
<p class="CodeLine" style="margin: 3pt 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">.
 "C:\Scripts\JobSubmissionAzure.ps1" -Cluster "carlhdinsighttest" 
-StorageContainer "hadooproot" -InputPath "/wordcount/input" 
-OutputFolder "/wordcount/output" -Dll 
"C:\Projects\WordCountSampleApplication\ \Debug\WordCount.dll" -Mapper 
"WordCountSampleApplication.WordCountMapper" -Reducer 
"WordCountSampleApplication.WordCountReducer" -Combiner 
"WordCountSampleApplication.WordCountReducer"</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">One has to remember in this case as we are submitting the job to an Azure cluster the default file system will be WASB.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">To run this sample I uploaded some text files to the appropriate Azure storage location:</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><a href="http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-46-76-metablogapi/6761.image_5F00_5EBB23A7.png"><img style="margin: 0px; border: 0px currentcolor; display: inline; background-image: none;" title="image" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/7752.png" alt="image" border="0" height="106" width="400"></a></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">The output then will show up in the wordcount/output container.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">After
 running this job, from within the management portal, you should see the
 metrics for the number of mapper and reducers executed be updated:</span></span><span style="mso-ansi-language: en-gb; mso-fareast-language: en-gb; mso-no-proof: yes;"><span style="font-size: 11pt;">&nbsp;</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><a href="http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-46-76-metablogapi/8787.image_5F00_00A916DD.png"><img style="margin: 0px; border: 0px currentcolor; display: inline; background-image: none;" title="image" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/0410.png" alt="image" border="0" height="199" width="400"></a></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span class="MsoSubtleEmphasis"><span lang="EN-US"><span style="font-size: 11pt;">Unfortunately
 at this point in time you will not see your job within the job history 
when managing the cluster. For this you will have to use the standard 
Hadoop UI interfaces; accessible by connecting to the head node of the 
cluster.</span></span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">As
 an alternative to his approach one could define a HadoopJob class 
configuration within the code; in addition to the mappers and reducers, 
such as:</span></span></p>
<p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal; list-style-type: disc; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt;"><span style="mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: en-gb; mso-fareast-language: en-gb;"><span style="font-size: 10pt;">class</span></span><span style="font-size: 10pt;"><span style="mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: en-gb; mso-fareast-language: en-gb;">&nbsp;</span><span style="mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: en-gb; mso-fareast-language: en-gb;">WordCount</span><span style="mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: en-gb; mso-fareast-language: en-gb;"> : </span><span style="mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: en-gb; mso-fareast-language: en-gb;">HadoopJob</span><span style="mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: en-gb; mso-fareast-language: en-gb;">&lt;</span><span style="mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: en-gb; mso-fareast-language: en-gb;">WordCountMapper</span><span style="mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: en-gb; mso-fareast-language: en-gb;">, </span><span style="mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: en-gb; mso-fareast-language: en-gb;">WordCountReducer</span><span style="mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: en-gb; mso-fareast-language: en-gb;">, </span><span style="mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: en-gb; mso-fareast-language: en-gb;">WordCountReducer</span></span><span style="mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: en-gb; mso-fareast-language: en-gb;"><span style="font-size: 10pt;">&gt;</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">To
 execute this job one would just need to define the type for the 
HadoopJob, which provides the necessary configuration details:</span></span></p>
<p class="CodeLineCxSpFirst" style="margin: 3pt 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">[Type] $jobType = $submitterAssembly.GetType("WordCountSampleApplication.WordCount", 1)</span></p>
<p class="CodeLineCxSpMiddle" style="margin: 0cm 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">...</span></p>
<p class="CodeLineCxSpLast" style="margin: 0cm 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">$result = $job.Execute($jobType)</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">The code in either case is very similar but the former approach is probably more flexible. </span></span></p>
<h2 style="margin: 18pt 0cm; line-height: normal; list-style-type: disc;"><a name="_Toc373503070"></a><a name="_Toc359333223"></a><span style="mso-bookmark: _toc373503070;"><span lang="EN-US"><span style="font-size: 16pt;">Specifying WASB Paths</span></span></span></h2>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">As
 mentioned the default schema when submitting MapReduce jobs is Azure 
Blob Storage. This means the default container specified when creating 
the cluster is used as the root. </span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">In the example above the path “/wordcount/input” actually equates to:</span></span></p>
<p class="CodeLineCxSpFirst" style="margin: 3pt 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">wasb://hadooproot@mystorageaccount.blob.core.windows.net/wordcount/input</span></p>
<p class="CodeLineCxSpLast" style="margin: 0cm 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Thus
 if one wanted to operate out of a different default container such as 
“data” fully-qualified names could be specified such as:</span></span></p>
<p class="CodeLineCxSpFirst" style="margin: 3pt 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">-InputPath "wasb://data@ mystorageaccount.blob.core.windows.net/books"</span></p>
<p class="CodeLineCxSpLast" style="margin: 0cm 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">-OutputFolder "wasb://data@mystorageaccount.blob.core.windows.net/wordcount/output"</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">This would equate to the “data” container:</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><a href="http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-46-76-metablogapi/1423.image_5F00_6D8A7AE1.png"><img style="margin: 0px; border: 0px currentcolor; display: inline; background-image: none;" title="image" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/5557.png" alt="image" border="0" height="110" width="400"></a></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">The containers being referenced just need to be under the same storage account.</span></span></p>
<h2 style="margin: 18pt 0cm; line-height: normal; list-style-type: disc;"><a name="_Toc373503071"></a><a name="_Toc359333225"></a><span style="mso-bookmark: _toc373503071;"><span lang="EN-US"><span style="font-size: 16pt;">Elastic MapReduce </span></span></span><span style="mso-bookmark: _toc373503071;"><span lang="EN-US"><span style="font-size: 16pt;">Submissions</span></span></span></h2>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">The
 idea behind an Elastic Service is that the cluster can be brought up, 
with the necessary hosts, when job execution is necessary. To achieve 
this, with the provided scripts, one can use the following approach:</span></span></p>
<div style="padding: 1pt 4pt; border: 1pt solid windowtext; line-height: normal; list-style-type: disc; mso-border-alt: solid windowtext .5pt; mso-element: para-border-div;">
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Param($Hosts
 = 4, $Cluster = $(throw "Cluster Name Required."), [string] 
$StorageContainer = "hadooproot", [string] $InputPath = $(throw "Input 
Path Required."), [string] $OutputFolder = $(throw "Output Path 
Required."), [string] $Dll = $(throw "MapReduce Dll Path Required."), 
[string] $Mapper = $(throw "Mapper Type Required."), [string] $Reducer =
 $Null, [string] $Combiner = $Null)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Create the Cluster</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">. ".\ClusterCreate.ps1" -Hosts $Hosts -Cluster $Cluster –StorageContainer $StorageContainer</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Execute the Job</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">.
 ".\JobSubmissionAzure.ps1" -Cluster "carlhdinsighttest" 
-StorageContainer = "hadooproot" -InputPath "/wordcount/input" 
-OutputFolder "/wordcount/output" -Dll 
"C:\Projects\WordCountSampleApplication\ \Debug\WordCount.dll" -Mapper 
"WordCountSampleApplication.WordCountMapper" -Reducer 
"WordCountSampleApplication.WordCountReducer" -Combiner 
"WordCountSampleApplication.WordCountReducer"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Delete the Cluster</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">. ".\ClusterDelete.ps1" -Cluster Cluster</span></span></p>
</div>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">To execute the script one just has to execute:</span></span></p>
<p class="CodeLineCxSpFirst" style="margin: 3pt 0cm 0pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">.
 "C:\Scripts\JobSubmissionElastic.ps1" –Hosts 4 -Cluster 
"carlhdinsighttest" -StorageContainer = "hadooproot" -InputPath 
"/wordcount/input" -OutputFolder "/wordcount/output" -Dll 
"C:\Projects\WordCountSampleApplication\ \Debug\WordCount.dll" -Mapper 
"WordCountSampleApplication.WordCountMapper" -Reducer 
"WordCountSampleApplication.WordCountReducer" -Combiner 
"WordCountSampleApplication.WordCountReducer"</span></p>
<p class="CodeLineCxSpLast" style="margin: 0cm 0cm 3pt 17.85pt; line-height: 11pt; list-style-type: disc;"><span style="font-size: 10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">This
 will create the cluster, run the required job, and then delete the 
cluster. During the creation the cluster name and number of hosts is 
specified, and during the job submission the input and output paths are 
specified.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">One could of course roll all the script elements into a single reusable script, as follows:</span></span></p>
<div style="padding: 1pt 4pt; border: 1pt solid windowtext; line-height: normal; list-style-type: disc; mso-border-alt: solid windowtext .5pt; mso-element: para-border-div;">
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Param($Hosts
 = 4, $Cluster = $(throw "Cluster Name Required."), [string] 
$StorageContainer = "hadooproot", [string] $InputPath = $(throw "Input 
Path Required."), [string] $OutputFolder = $(throw "Output Path 
Required."), [string] $Dll = $(throw "MapReduce Dll Path Required."), 
[string] $Mapper = $(throw "Mapper Type Required."), [string] $Reducer =
 $Null, [string] $Combiner = $Null, $MapTasks = $Null)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Define all local variable names for script execution</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$submitterDll = $Dll</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$dllPath = Split-Path $submitterDll -parent</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$dllFile = Split-Path $submitterDll -leaf</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Import the management module and assemblies</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Import-Module
 "C:\Program Files (x86)\Windows Azure HDInsight 
PowerShell\Microsoft.WindowsAzure.Management.HDInsight.Cmdlet\Microsoft.WindowsAzure.Management.HDInsight.Cmdlet.dll"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Add-Type –AssemblyName System.Web</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Add-Type -Path ($dllPath + "\microsoft.hadoop.mapreduce.dll")</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Add-Type -Path ($dllPath + "\microsoft.hadoop.webclient.dll")</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Get the subscription information and set variables</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$subscriptionInfo = Get-AzureSubscription -Default</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$subName = $subscriptionInfo | %{ $_.SubscriptionName }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$subId = $subscriptionInfo | %{ $_.SubscriptionId }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$cert = $subscriptionInfo | %{ $_.Certificate }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$storeAccount = $subscriptionInfo | %{ $_.CurrentStorageAccountName }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$storeAccountBck = $storeAccount + "bck" # Assume same name with bck suffix</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$key = Get-AzureStorageKey $storeAccount | %{ $_.Primary }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$keyBck = Get-AzureStorageKey $storeAccountBck | %{ $_.Primary }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$storageAccountInfo = Get-AzureStorageAccount $storeAccount</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$location = $storageAccountInfo | %{ $_.Location }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$hadoopUsername = "Hadoop"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterUsername = "Admin"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterPassword = [System.Web.Security.Membership]::GeneratePassword(20, 5)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$secpasswd = ConvertTo-SecureString $clusterPassword -AsPlainText -Force</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterCreds = New-Object System.Management.Automation.PSCredential($clusterUsername, $secpasswd)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterName = $Cluster</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$numberNodes = $Hosts</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$containerDefault = $StorageContainer</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$clusterHttp = "https://$clusterName.azurehdinsight.net"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$blobStorage = "$storeAccount.blob.core.windows.net"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$blobStorageBck = "$storeAccountBck.blob.core.windows.net"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Define variables for the SQL database connectivity</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$sqlServer = "mydatabaseserver.database.windows.net"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$sqlUsername = "SqlUsername"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$sqlPassword = "SqlPassword"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$sqlpasswd = ConvertTo-SecureString $sqlPassword -AsPlainText -Force</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$databaseCreds = New-Object System.Management.Automation.PSCredential($sqlUsername, $sqlpasswd)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$databaseHive = "HiveDatabaseCarl"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$databaseOozie = "OozieDatabaseCarl"</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Create the cluster</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Creating '$numberNodes' Node Cluster named: $clusterName" -f yellow</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Storage Account '$storeAccount' and Container '$containerDefault'" -f yellow</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Storage Account Backup '$storeAccountBck'" -f yellow</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "User '$clusterUsername' Password '$clusterPassword'" -f green</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">New-AzureHDInsightClusterConfig
 -ClusterSizeInNodes $numberNodes | Set-AzureHDInsightDefaultStorage 
-StorageAccountName $blobStorage -StorageAccountKey $key 
-StorageContainerName $containerDefault | Add-AzureHDInsightStorage 
-StorageAccountName $blobStorageBck -StorageAccountKey $keyBck | 
Add-AzureHDInsightMetastore -SqlAzureServerName $sqlServer -DatabaseName
 $databaseOozie -Credential $databaseCreds -MetastoreType OozieMetastore
 | Add-AzureHDInsightMetastore -SqlAzureServerName $sqlServer 
-DatabaseName $databaseHive -Credential $databaseCreds -MetastoreType 
HiveMetastore | New-AzureHDInsightCluster -Subscription $subId 
-Certificate $cert -Credential $clusterCreds -Name $clusterName 
-Location $location</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Created '$numberNodes' Node Cluster: $clusterName" -f yellow</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Define the Types for the Job (Mapper. Reducer, Combiner)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$submitterAssembly = [System.Reflection.Assembly]::LoadFile($submitterDll)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">[Type] $mapperType = $submitterAssembly.GetType($Mapper, 1)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">[Type] $reducerType = $Null</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">if ($Reducer) { $reducerType = $submitterAssembly.GetType($Reducer, 1) }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">[Type] $combinerType = $Null</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">if ($Combiner) { $combinerType = $submitterAssembly.GetType($Combiner, 1) }</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Define the configuration properties</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$config = New-Object Microsoft.Hadoop.MapReduce.HadoopJobConfiguration</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">[Boolean] $config.Verbose = $True</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$config.InputPath = $InputPath</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$config.OutputFolder = $OutputFolder</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">if ($MapTasks) {$config.AdditionalGenericArguments.Add("-Dmapred.map.tasks=$MapTasks")}</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Define the connection properties</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">[Boolean] $createContinerIfNotExist = $True</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">[Uri] $clusterUri = New-Object System.Uri $clusterHttp</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Connect and Run the Job</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Executing Job Dll '$dllFile' on Cluster $clusterName" -f yellow</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$hadoop
 = [Microsoft.Hadoop.MapReduce.Hadoop]::Connect($clusterUri, 
$clusterUsername, $hadoopUsername, $clusterPassword, $blobStorage, $key,
 $containerDefault, $createContinerIfNotExist)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$job = $hadoop.MapReduceJob</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">$result = $job.Execute($mapperType, $reducerType, $combinerType, $config)</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Job Run Information" -f yellow</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Job Id: " $result.Id</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Exit Code: " $result.Info.ExitCode</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">&nbsp;</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;"># Delete the cluster</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Write-Host "Deleting Cluster named: $clusterName" -f yellow</span></span></p>
<p class="CodeBlock" style="margin: 1pt 0cm; padding: 0cm; line-height: 9pt; page-break-after: avoid;"><span lang="EN-US"><span style="font-size: 8pt;">Remove-AzureHDInsightCluster $clusterName -Subscription $subId -Certificate $cert</span></span></p>
</div>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">In
 this instance the cluster password is randomly generated, as it only 
needs to exist for the lifetime of the job execution. In reality one 
could also randomly generate the name of the cluster.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Of
 course one could also customize these scripts to including additional 
parameters such as additional job arguments, etc. The script presented 
here does take into consideration the number of mappers; specified with 
the MapTasks parameter.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">This
 Elastic Job Submission process is possible because the storage used for
 input and output is Azure Blob Storage. As such the cluster is only 
needed for compute operations and not storage. In addition the job 
history is persisted, across cluster creations, in the specified SQL 
databases.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">Of
 course other parameters could be included in this model to make the 
PowerShell script more applicable to more job types; such as number of 
mappers, additional job arguments, etc.</span></span></p>
<h1 style="margin: 24pt 0cm 18pt; line-height: normal; list-style-type: disc;"><a name="_Toc260989127"></a><a name="_Toc373503072"></a><span style="mso-bookmark: _toc260989127;"><span lang="EN-US"><span style="font-size: 18pt;">References</span></span></span></h1>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><a href="http://msdn.microsoft.com/en-us/library/windowsazure/jj156055.aspx"><span style="mso-bookmark: _toc260989127;"><span style="mso-ansi-language: en-gb;"><span style="font-size: 11pt;">Windows Azure PowerShell</span></span></span></a></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><a href="http://msdn.microsoft.com/en-us/library/windowsazure/jj554332.aspx"><span style="mso-bookmark: _toc260989127;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Get Started with Windows Azure Cmdlets</span></span></span></a></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><a href="http://hadoopsdk.codeplex.com/wikipage?title=PowerShell%20Cmdlets%20for%20Cluster%20Management&amp;referringTitle=Cluster%20Management"><span style="mso-bookmark: _toc260989127;"><span style="mso-ansi-language: en-gb;"><span style="font-size: 11pt;">Microsoft .Net SDK for Hadoop - PowerShell Cmdlets for Cluster Management</span></span></span></a></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><a href="http://msdn.microsoft.com/en-us/library/windowsazure/gg551721.aspx"><span style="mso-bookmark: _toc260989127;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">How to: Manage Management Certificates in Windows Azure</span></span></span></a></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><a href="http://www.windowsazure.com/en-us/downloads/?fb=en-us"><span style="mso-bookmark: _toc260989127;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Windows Azure Downloads</span></span></span></a></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><a href="https://hadoopsdk.codeplex.com/downloads/get/671067"><span style="mso-bookmark: _toc260989127;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">HDInsight cmdlets</span></span></span></a></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><a href="http://blogs.msdn.com/b/windowsazure/archive/2013/02/07/windows-azure-sql-database-management-with-powershell.aspx"><span style="mso-bookmark: _toc260989127;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Windows Azure SQL Database Management with PowerShell</span></span></span></a></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><a href="http://hadoopsdk.codeplex.com/wikipage?title=Map%2fReduce"><span style="mso-bookmark: _toc260989127;"><span style="mso-ansi-language: en;" lang="EN"><span style="font-size: 11pt;">Microsoft .Net SDK for Hadoop - Map/Reduce</span></span></span></a></p>
<h1 style="margin: 24pt 0cm 18pt; line-height: normal; list-style-type: disc;"><span style="mso-bookmark: _toc260989127;"><a name="_Toc373503073"></a><span lang="EN-US"><span style="font-size: 18pt;">Conclusion</span></span></span></h1>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">This
 document hopefully explains how best to manage an HDInsight cluster and
 submit .Net MapReduce jobs using a management console and Windows 
PowerShell. The ultimate goal was to provide an approach one could use 
for managing Elastic Job Submissions where the cluster only exists for 
the lifetime of the job.</span></span></p>
<p class="MsoNormal" style="margin: 6pt 0cm; line-height: 13pt; list-style-type: disc;"><span lang="EN-US"><span style="font-size: 11pt;">This
 Elastic approach to job submissions is possible when using Windows 
Azure Storage Blobs for data retention and Windows Azure SQL Database 
for job history. Configuring the cluster such that there is a separate 
of compute and storage processes allows for the cluster to exist when 
and only when it is needed for computational processing.</span></span></p><div style="clear:both;"></div></div>
    <div class="post-attachment-viewer">
		
    </div>
    <div class="post-actions">
        <div class="navigation-list-header"></div>
        <ul class="navigation-list">
            <!---->
            <li class="navigation-item"><a class="internal-link view-replies" href="http://blogs.msdn.com/b/carlnol/archive/2013/12/02/managing-your-hdinsight-cluster-and-net-job-submissions.aspx#comments"><span></span>3 Comments</a></li>
            
            
        </ul>
        <div class="navigation-list-footer"></div>
    </div>
    <div class="post-tags"><div id="ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_Container" style="display: none;"><div class="tags-editor"><textarea id="ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_Tags" style="width: 97%; height: 100%;" rows="2" cols="30"></textarea><div style="white-space: nowrap; padding-top: 4px;"><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left"><input onclick="Telligent_Modal.Open('\/utility\/TagSelector.aspx?TagEditor=ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_TagEditor',400,300,null);;return false;" value="Select Tags..." type="button"></td><td align="right"><input value="Save" type="button"><input onclick="ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01.Close(); return false;" value="Cancel" type="button"></td></tr></tbody></table></div></div></div><span id="ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl02"><a href="http://blogs.msdn.com/b/carlnol/archive/tags/Hadoop/" rel="tag">Hadoop</a>, <a href="http://blogs.msdn.com/b/carlnol/archive/tags/MapReduce/" rel="tag">MapReduce</a>, <a href="http://blogs.msdn.com/b/carlnol/archive/tags/Hadoop+on+Azure/" rel="tag">Hadoop on Azure</a>, <a href="http://blogs.msdn.com/b/carlnol/archive/tags/Windows+Azure/" rel="tag">Windows Azure</a>, <a href="http://blogs.msdn.com/b/carlnol/archive/tags/-Net+Programming/" rel="tag">.Net Programming</a>, <a href="http://blogs.msdn.com/b/carlnol/archive/tags/PowerShell/" rel="tag">PowerShell</a>, <a href="http://blogs.msdn.com/b/carlnol/archive/tags/HDInsight/" rel="tag">HDInsight</a></span><input name="ctl00$content$ctl00$w_186965$_adbde5$ctl00$ctl15$ctl02" id="ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl02_State" value="value:%3Ca%20href%3D%22http%3A%2F%2Fblogs.msdn.com%2Fb%2Fcarlnol%2Farchive%2Ftags%2FHadoop%2F%22%20rel%3D%22tag%22%3EHadoop%3C%2Fa%3E%2C%20%3Ca%20href%3D%22http%3A%2F%2Fblogs.msdn.com%2Fb%2Fcarlnol%2Farchive%2Ftags%2FMapReduce%2F%22%20rel%3D%22tag%22%3EMapReduce%3C%2Fa%3E%2C%20%3Ca%20href%3D%22http%3A%2F%2Fblogs.msdn.com%2Fb%2Fcarlnol%2Farchive%2Ftags%2FHadoop%2Bon%2BAzure%2F%22%20rel%3D%22tag%22%3EHadoop%20on%20Azure%3C%2Fa%3E%2C%20%3Ca%20href%3D%22http%3A%2F%2Fblogs.msdn.com%2Fb%2Fcarlnol%2Farchive%2Ftags%2FWindows%2BAzure%2F%22%20rel%3D%22tag%22%3EWindows%20Azure%3C%2Fa%3E%2C%20%3Ca%20href%3D%22http%3A%2F%2Fblogs.msdn.com%2Fb%2Fcarlnol%2Farchive%2Ftags%2F-Net%2BProgramming%2F%22%20rel%3D%22tag%22%3E.Net%20Programming%3C%2Fa%3E%2C%20%3Ca%20href%3D%22http%3A%2F%2Fblogs.msdn.com%2Fb%2Fcarlnol%2Farchive%2Ftags%2FPowerShell%2F%22%20rel%3D%22tag%22%3EPowerShell%3C%2Fa%3E%2C%20%3Ca%20href%3D%22http%3A%2F%2Fblogs.msdn.com%2Fb%2Fcarlnol%2Farchive%2Ftags%2FHDInsight%2F%22%20rel%3D%22tag%22%3EHDInsight%3C%2Fa%3E" type="hidden"></div>
</div>
<div class="full-post-footer"></div></div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
<div class="content-fragment social-media-sharing no-wrapper-with-spacing" id="fragment-186966">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-content">

<script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/47499858c4077d6e043f7add14000981-e99ec8f3b45f97b38095df2708dc.js" type="text/javascript"></script>
<div class="ShareThisMainPanel">
	<div id="ctl00_content_ctl00_w_186966__adbde5_ctl00_b5279417_1093_4dab_9f8c_19458558dad2" class="ShareThis_ChildRootPanel" onmouseover="ShareThisChildRootPanelOnmouseOver(this.id);" onmouseout="ShareThisChildRootPanelOnmouseOut(this.id);">
		<div id="ctl00_content_ctl00_w_186966__adbde5_ctl00_ShareThisBtnCollPanel_b90063df03e94fdfacc79f185217eec8" class="tierOnePanel">
			<div class="buttonPanel">
				<a title="Share on Facebook" class="iconsOnPanel" href="http://www.facebook.com/sharer.php?u=http://blogs.msdn.com/b/carlnol/archive/2013/12/02/managing-your-hdinsight-cluster-and-net-job-submissions.aspx&amp;t=Managing+Your+HDInsight+Cluster+and+.Net+Job+Submissions+using+PowerShell" target="_blank"><img title="Share on Facebook" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/facebook.gif" style="border-width:0px;"></a>
			</div><div class="buttonPanel">
				<a title="Share on Twitter" class="iconsOnPanel" href="http://twitter.com/home?status=Managing+Your+HDInsight+Cluster+and+.Net+Job+Submissions+using+PowerShell%20:%20http://blogs.msdn.com/b/carlnol/archive/2013/12/02/managing-your-hdinsight-cluster-and-net-job-submissions.aspx" target="_blank"><img title="Share on Twitter" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/twitter.gif" style="border-width:0px;"></a>
			</div><div class="buttonPanel">
				<a title="Share on Digg" class="iconsOnPanel" href="http://digg.com/submit?url=http://blogs.msdn.com/b/carlnol/archive/2013/12/02/managing-your-hdinsight-cluster-and-net-job-submissions.aspx&amp;title=Managing+Your+HDInsight+Cluster+and+.Net+Job+Submissions+using+PowerShell" target="_blank"><img title="Share on Digg" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/digg.gif" style="border-width:0px;"></a>
			</div><div class="buttonPanel">
				<a title="Share on del.icio.us" class="iconsOnPanel" href="http://del.icio.us/post?url=http://blogs.msdn.com/b/carlnol/archive/2013/12/02/managing-your-hdinsight-cluster-and-net-job-submissions.aspx&amp;title=Managing+Your+HDInsight+Cluster+and+.Net+Job+Submissions+using+PowerShell" target="_blank"><img title="Share on del.icio.us" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/delicious.gif" style="border-width:0px;"></a>
			</div>
		</div><div id="ctl00_content_ctl00_w_186966__adbde5_ctl00_ShareThisBtnCollPanel_9169168201324b41a8c97d63578a2907" class="tierTwoPanel" onclick="TierTwoPanelOnclick(this.id);" onkeypress="if (event.keyCode == 13) TierTwoPanelOnclick(this.id);" onmouseover="TierTwoPanelOnmouseOver(this.id);" onmouseout="TierTwoPanelOnmouseOut(this.id);">
			<div id="ctl00_content_ctl00_w_186966__adbde5_ctl00_ShareThisBtnCollPanel_ff79e5eee8054c9eade47fcbb9edfc70" class="tierTwoRowPanel">
				<div class="buttonPanel">
					<a title="Share on Reddit" class="iconsOnPanel" href="http://www.reddit.com/submit?url=http://blogs.msdn.com/b/carlnol/archive/2013/12/02/managing-your-hdinsight-cluster-and-net-job-submissions.aspx&amp;title=Managing+Your+HDInsight+Cluster+and+.Net+Job+Submissions+using+PowerShell" target="_blank"><img title="Share on Reddit" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/reddit.gif" style="border-width:0px;"></a>
				</div><div class="buttonPanel">
					<a title="Share on LinkedIn" class="iconsOnPanel" href="http://www.linkedin.com/shareArticle?mini=true&amp;ro=true&amp;url=http://blogs.msdn.com/b/carlnol/archive/2013/12/02/managing-your-hdinsight-cluster-and-net-job-submissions.aspx&amp;title=Managing+Your+HDInsight+Cluster+and+.Net+Job+Submissions+using+PowerShell&amp;summary=&amp;source=Microsoft&amp;armin=armin" target="_blank"><img title="Share on LinkedIn" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/linkedin.gif" style="border-width:0px;"></a>
				</div><div class="buttonPanel">
					<a title="Share on Slashdot" class="iconsOnPanel" href="http://slashdot.org/bookmark.pl?url=http://blogs.msdn.com/b/carlnol/archive/2013/12/02/managing-your-hdinsight-cluster-and-net-job-submissions.aspx&amp;title=Managing+Your+HDInsight+Cluster+and+.Net+Job+Submissions+using+PowerShell" target="_blank"><img title="Share on Slashdot" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/slashdot.gif" style="border-width:0px;"></a>
				</div><div class="buttonPanel">
					<a title="Share on MySpace" class="iconsOnPanel" href="http://www.myspace.com/Modules/PostTo/Pages/?u=http://blogs.msdn.com/b/carlnol/archive/2013/12/02/managing-your-hdinsight-cluster-and-net-job-submissions.aspx&amp;t=Managing+Your+HDInsight+Cluster+and+.Net+Job+Submissions+using+PowerShell" target="_blank"><img title="Share on MySpace" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/myspace.gif" style="border-width:0px;"></a>
				</div>
			</div><div id="ctl00_content_ctl00_w_186966__adbde5_ctl00_ShareThisBtnCollPanel_d34e75f3a27d42879f12468c237a4c49" class="tierTwoRowPanel">
				<div class="buttonPanel">
					<a title="Share on Technorati" class="iconsOnPanel" href="http://technorati.com/faves/?add=http://blogs.msdn.com/b/carlnol/archive/2013/12/02/managing-your-hdinsight-cluster-and-net-job-submissions.aspx" target="_blank"><img title="Share on Technorati" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/technorati.gif" style="border-width:0px;"></a>
				</div><div class="buttonPanel">
					<a title="Share on FriendFeed" class="iconsOnPanel" href="http://friendfeed.com/?url=http://blogs.msdn.com/b/carlnol/archive/2013/12/02/managing-your-hdinsight-cluster-and-net-job-submissions.aspx&amp;title=Managing+Your+HDInsight+Cluster+and+.Net+Job+Submissions+using+PowerShell" target="_blank"><img title="Share on FriendFeed" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/friendfeed.gif" style="border-width:0px;"></a>
				</div><div class="buttonPanel">
					<a title="Share on Messenger" class="iconsOnPanel" href="http://profile.live.com/badge?url=http://blogs.msdn.com/b/carlnol/archive/2013/12/02/managing-your-hdinsight-cluster-and-net-job-submissions.aspx&amp;title=Managing+Your+HDInsight+Cluster+and+.Net+Job+Submissions+using+PowerShell" target="_blank"><img title="Share on Messenger" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/messenger.png" style="border-width:0px;"></a>
				</div><div class="buttonPanel">
					<a title="Share on StumbleUpon" class="iconsOnPanel" href="http://www.stumbleupon.com/submit?url=http://blogs.msdn.com/b/carlnol/archive/2013/12/02/managing-your-hdinsight-cluster-and-net-job-submissions.aspx&amp;title=Managing+Your+HDInsight+Cluster+and+.Net+Job+Submissions+using+PowerShell" target="_blank"><img title="Share on StumbleUpon" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/stumbleupon.gif" style="border-width:0px;"></a>
				</div>
			</div>
		</div>
	</div><div id="ctl00_content_ctl00_w_186966__adbde5_ctl00_ShowMoreLessButtonsPanel_7b8f4311_fb82_408c_b73c_bbc0a2be811b" tabindex="1" class="ShowMoreLessButtonsPanel" onclick="ShowMoreLessButtonsPanelOnClick(this.id);" onkeypress="if (event.keyCode == 13) ShowMoreLessButtonsPanelOnClick(this.id);" onmouseover="ShowMoreLessButtonsPanelOnmouseOver(this.id);" onmouseout="ShowMoreLessButtonsPanelOnmouseOut(this.id);">
		<a class="buttonMoreLess" id="btn_more"><img title="More" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/more.gif" style="border-width:0px;"></a><a class="buttonMoreLess" id="btn_less"><img title="Less" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/less.gif" style="border-width:0px;"></a>
	</div>
</div><div class="ShareClearFloatsPanel">

</div></div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
<div class="content-fragment captcha-blog-post-comment-form no-wrapper-with-spacing" id="fragment-186967">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-content">
<input name="ctl00$content$ctl00$w_186967$_adbde5$ctl00$ctl00$postCommentUrl" id="ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_postCommentUrl" type="hidden">

    
            <div class="field-list-header"></div>
            <fieldset class="field-list">
                <legend class="field-list-description">Leave a Comment</legend>
                <ul class="field-list">
                    <li id="ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_NameField" class="field-item">
                        <label for="ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbName" class="field-item-header">Name</label>
                        <span class="field-item-input"><input name="ctl00$content$ctl00$w_186967$_adbde5$ctl00$ctl00$PlaceHolder1$ctl04$bpCommentForm$ctl04$tbName" size="60" id="ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbName" type="text"></span>
                        <span id="ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbNameRFV" style="color:Red;display:none;"><span class="field-item-validation">*</span></span>
                    </li>
                    <li class="field-item post-body">
                        <label for="ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbComment" class="field-item-header">Comment</label>
                        <span class="field-item-input"><textarea tabindex="-1" rows="2" cols="20" style="height: 100.333px; resize: none; overflow-y: hidden; position: absolute; top: 0px; left: -9999px; width: 668.333px; line-height: 17.5px; text-decoration: none; letter-spacing: normal;"></textarea><textarea name="ctl00$content$ctl00$w_186967$_adbde5$ctl00$ctl00$PlaceHolder1$ctl04$bpCommentForm$ctl04$tbComment" rows="2" cols="20" id="ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbComment" style="height: 100px; resize: none; overflow-y: hidden;"></textarea></span>
                        <span id="ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentRFV" style="color:Red;display:none;"><span class="field-item-validation">* Please enter a comment</span></span>
                        <span id="ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentREV" style="color:Red;display:none;"><span class="field-item-validation">Please shorten the content to 3072 or less</span></span>
                    </li>
                    <li class="field-item">
                        
                           <span id="ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_invisibleCaptcha" style="color:Red;display:none;">*</span><span style="display: none;" id="ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_invisibleCaptcha_subtext_captcha">Please add 1 and 2 and type the answer here: <input name="ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_invisibleCaptcha_visibleanswer" type="text"></span>


                    </li>
                    <li class="field-item">
                        <script type="text/javascript">
                            // <![CDATA[

                            $(document).ready(function () {
                                $('a.add-reply.post').click(function (e) {
                                    e.preventDefault();
                                    postComment(this);
                                    return false;
                                });

                                $('#ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbComment').keyup(function (e) {
                                    $('#errorOnPosting').hide();
                                });
                                var nameBox = $('#ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbName');
                                if (nameBox.length > 0) {
                                    $(nameBox).keyup(function (e) {
                                        $('#errorOnPosting').hide();
                                    });
                                }
                            });

                            function postComment(anchor) {
                                if (Page_ClientValidate('BlogPostCommentForm-ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00')) {
                                    togglePostAndPublishing();

                                    var Core_CreateBlogComment_AjaxEndpoint = '/Utility/ContentFragments/Core/CreateBlogComment.asmx' + "/PostComment";
                                    var name = '';
                                    var nameBox = $('#ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbName');
                                    if (nameBox.length > 0) {
                                        name = $(nameBox).val();
                                    }
                                    var body = $('#ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbComment').val();
                                    var weblogPostId = '10473106';

                                    $.ajax({
                                        type: "POST",
                                        async: false,
                                        url: Core_CreateBlogComment_AjaxEndpoint,
                                        beforeSend: function (xhr) { TelligentUtility.WriteAuthorizationHeader(xhr); },
                                        data: { weblogPostId: weblogPostId, url: '', subject: '', message: body, name: name, remember: false },
                                        success: function (results) {
                                            var responseVal = $(results.firstChild).text();
                                            if (responseVal === "-1" || responseVal === "-2") {
                                                togglePostAndPublishing();
                                                if (responseVal == "-2")
                                                    $('#errorOnPosting').html('Your comment has been flagged as spam! The blog administrator has been notified.');
                                                $('#errorOnPosting').show();
                                                return;
                                            }
                                            var redirectUrl = window.location.href;
                                            if (redirectUrl.indexOf("?") > -1) {
                                                redirectUrl = redirectUrl.replace(/\?.*/, "");
                                            } else if (redirectUrl.indexOf("#") > -1) {
                                                redirectUrl = redirectUrl.replace(/\#.*/, "");
                                            }

                                            redirectUrl += '?CommentPosted=true#commentmessage';
                                            if (window.location.href == redirectUrl) {
                                                location.reload(true);
                                            }
                                            else {
                                                window.location.href = redirectUrl;
                                            }
                                        },
                                        error: function (xhr, textStatus, errorThrown) {
                                            togglePostAndPublishing();
                                            $('#errorOnPosting').show();
                                        }
                                    });

                                }
                            }

                            function togglePostAndPublishing() {
                                $('a.add-reply.post').toggle();
                                $('a.publishing').toggle();
                            }
                            // ]]>
                        </script>
                        <span class="field-item-input">
                            
                            <a class="internal-link add-reply post" style="cursor: pointer;"><span></span>Post</a>
                            <a class="internal-link add-reply publishing" style="color:#c7c7c7; display: none;cursor: pointer;"><span></span>Publishing</a>
                            <span id="errorOnPosting" style="color: white; background-color: red; padding: 5px; margin-left: 10px; display: none;">An error occurred while posting! Please retry posting your comment.</span>
                        </span>
                    </li>
                </ul>
            </fieldset>
            <div class="field-list-footer"></div>
            
        
    </div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
<div class="content-fragment blog-feedback-list no-wrapper-with-spacing" id="fragment-186968">
<div class="content-fragment-inner wireframe-content-fragment-inner"><div class="content-fragment-top wireframe-content-fragment-top"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div><div class="content-fragment-content">




<script type="text/javascript">
	// <![CDATA[
	$(document).ready(function() {
	$(document).bind('telligent_blogs_commentposted', function(e, message) { 
	            window.setTimeout(new Function(ctl00_content_ctl00_w_186968__adbde5_ctl00_ctl00_DelayedFeedbackList.Reload()), 100); 
	            return true; 
	    });
	    ctl00_content_ctl00_w_186968__adbde5_ctl00_ctl00_DelayedFeedbackList.Reload();
	});
// ]]>
</script>

	

<div style="cursor: default;" id="ctl00_content_ctl00_w_186968__adbde5_ctl00_ctl00_DelayedFeedbackList"><input name="ctl00$content$ctl00$w_186968$_adbde5$ctl00$ctl00$DelayedFeedbackList" value="true:undefined" type="hidden">
	    
			    <a name="comments"></a>
			    <div class="content-list-header"></div>
			    <div class="content-list-name">
				    
						    <a class="internal-link rss" href="http://blogs.msdn.com/b/carlnol/rsscomments.aspx?WeblogPostID=10473106"><span></span>Comments</a>
					    
			    </div>
			    <ul class="content-list">
		    
			    
					    <li class="content-item">
						    <div class="full-post-outer wireframe-full-post-outer"><div class="full-post-header"><div class="r wireframe-r"></div></div>
						    <div class="full-post"><div class="full-post-inner wireframe-full-post-inner">
				    
			    <div class="post-author">
				    
				    <span class="avatar"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/anonymous.gif" alt="" style="border-width:0px;max-height:32px;max-width:32px;"></span>
                    <span class="profile-usercard-hover" data-profile-userid="00000000000000000000000000000000">
				        
				        <span class="user-name">Mark</span>
                    </span>
			    </div>
			    <div class="post-date">
				    <span class="value">6 Jan 2014 10:39 AM</span>
			    </div>
			    <div class="post-content user-defined-markup"><p>Thanks for this 
post, this is excellent! &nbsp; It seems that the cluster name SHOULD be
 randomly generated, since you cannot guarantee that someone else would 
not have taken the previously used cluster name once you've deleted it 
in the prior run. &nbsp; </p>
<div style="clear:both;"></div></div>
			    <div class="post-actions">
				    
			    </div>
			    
						    </div>
						    </div><div class="full-post-footer"><div class="r wireframe-r"></div></div></div>
					    </li>
				    
		    
			    
					    <li class="content-item">
						    <div class="full-post-outer wireframe-full-post-outer"><div class="full-post-header"><div class="r wireframe-r"></div></div>
						    <div class="full-post"><div class="full-post-inner wireframe-full-post-inner">
				    
			    <div class="post-author">
				    
				    <span class="avatar"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/anonymous.gif" alt="" style="border-width:0px;max-height:32px;max-width:32px;"></span>
                    <span class="profile-usercard-hover" data-profile-userid="00000000000000000000000000000000">
				        
				        <span class="user-name">Harry McIntyre</span>
                    </span>
			    </div>
			    <div class="post-date">
				    <span class="value">4 Feb 2014 8:16 AM</span>
			    </div>
			    <div class="post-content user-defined-markup"><p>Do you have any examples in which you kick off an oozie job? I've tried following <a rel="nofollow" target="_new" href="https://hadoopsdk.codeplex.com/wikipage?title=Oozie%20Client">hadoopsdk.codeplex.com/wikipage</a> but can't get it to work</p>
<div style="clear:both;"></div></div>
			    <div class="post-actions">
				    
			    </div>
			    
						    </div>
						    </div><div class="full-post-footer"><div class="r wireframe-r"></div></div></div>
					    </li>
				    
		    
			    
					    <li class="content-item">
						    <div class="full-post-outer wireframe-full-post-outer"><div class="full-post-header"><div class="r wireframe-r"></div></div>
						    <div class="full-post"><div class="full-post-inner wireframe-full-post-inner">
				    
			    <div class="post-author">
				    
				    <span class="avatar"><img src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/anonymous.gif" alt="" style="border-width:0px;max-height:32px;max-width:32px;"></span>
                    <span class="profile-usercard-hover" data-profile-userid="00000000000000000000000000000000">
				        
				        <span class="user-name">Steve Holland</span>
                    </span>
			    </div>
			    <div class="post-date">
				    <span class="value">14 May 2014 11:51 AM</span>
			    </div>
			    <div class="post-content user-defined-markup"><p>Please note that
 the Reference link to "How to: Manage Management Certificates in 
Windows Azure" is no longer valid. Instead, please see "Manage 
Certificates" at <a rel="nofollow" target="_new" href="http://msdn.microsoft.com/en-us/library/azure/gg981929.aspx">msdn.microsoft.com/.../gg981929.aspx</a>.</p>
<div style="clear:both;"></div></div>
			    <div class="post-actions">
				    
			    </div>
			    
						    </div>
						    </div><div class="full-post-footer"><div class="r wireframe-r"></div></div></div>
					    </li>
				    
		    
			    </ul>
			    <div class="content-list-footer"></div>
		     
	    <div class="pager">
        <span class="summary">Page 1 of 1 (3 items)</span>
    </div>
	</div>
</div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom wireframe-content-fragment-bottom"><div class="r1 wireframe-r1"></div><div class="r2 wireframe-r2"></div><div class="r3 wireframe-r3"></div><div class="r4 wireframe-r4"></div></div></div></div>
</div>
</div>
</div>
<div class="layout-footer"></div>
</div></div>

			<div class="footer-fragments-header"></div>
<div class="footer-fragments"><div class="footer-fragment copyright-info" id="footer-fragment-247403536">

<ul class="footer-fragment-links">
    <li class="message copyright">© 2014 Microsoft Corporation.</li>
	<li class="message termsOfService"><a href="http://msdn.microsoft.com/cc300389">Terms of Use</a> </li>
    <li class="message trademarks"><a href="http://www.microsoft.com/library/toolbar/3.0/trademarks/en-us.mspx">Trademarks</a> </li>
    <li class="message privacy"><a href="http://go.microsoft.com/fwlink/?LinkId=248681">Privacy &amp; Cookies</a> </li>
    <li class="message abuse">
    
            <a id="ctl00_footer_fragment_247403536__adbde5_ctl00_ctl00_ctl01_lnkAbuse" href='javascript:WebForm_DoPostBackWithOptions(new%20WebForm_PostBackOptions("ctl00$footer_fragment_247403536$_adbde5$ctl00$ctl00$ctl01$lnkAbuse",%20"",%20true,%20"",%20"",%20false,%20true))'>Report Abuse</a>
        
    </li>
    
    <li class="message version">5.6.426.415</li>
</ul></div><div class="footer-fragment omniture-footer-fragment" id="footer-fragment-247403537">


<script src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/2569210a296af7a76a1f0a41cafcfd42-2e0c141b75ad92888490f6154505.js" type="text/javascript"></script>        <noscript><a href="http://www.omniture.com" title="Web Analytics"><img
        src="http://msstomsdnblogs.112.2O7.net/b/ss/msstomsdnblogs/1/H.20.2--NS/0"
        height="1" width="1" border="0" alt="" /></a></noscript>

</div><div class="footer-fragment app-insights-footer-fragment" id="footer-fragment-247403538">

        <script type="text/javascript" language="javascript">
            $(document).ready(function () {
                window.appInsights = { queue: [], start: function (n) { function r(n, t) { n[t] = function () { var i = arguments; n.queue.push(function () { n[t].apply(n, i) }) } } var t, i; this.applicationInsightsId = n; this.accountId = null; this.appUserId = null; r(this, "logEvent"); r(this, "logPageView"); t = document.createElement("script"); t.type = "text/javascript"; t.src = "//az416426.vo.msecnd.net/scripts/ai.js"; t.async = !0; i = document.getElementsByTagName("script")[0]; i.parentNode.insertBefore(t, i) } };
                window.appInsights.start("b4d65b72-ce61-486e-b07c-969cef6675f6");
                window.appInsights.logPageView();
            });
        </script>
    </div></div>
<div class="footer-fragments-footer"></div>
		
<script type="text/javascript">
//<![CDATA[
var Page_Validators =  new Array(document.getElementById("ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbNameRFV"), document.getElementById("ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentRFV"), document.getElementById("ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentREV"), document.getElementById("ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_invisibleCaptcha"));
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
var ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbNameRFV = document.all ? document.all["ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbNameRFV"] : document.getElementById("ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbNameRFV");
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbNameRFV.controltovalidate = "ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbName";
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbNameRFV.display = "Dynamic";
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbNameRFV.validationGroup = "BlogPostCommentForm-ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00";
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbNameRFV.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbNameRFV.initialvalue = "";
var ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentRFV = document.all ? document.all["ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentRFV"] : document.getElementById("ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentRFV");
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentRFV.controltovalidate = "ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbComment";
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentRFV.display = "Dynamic";
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentRFV.validationGroup = "BlogPostCommentForm-ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00";
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentRFV.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentRFV.initialvalue = "";
var ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentREV = document.all ? document.all["ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentREV"] : document.getElementById("ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentREV");
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentREV.controltovalidate = "ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbComment";
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentREV.display = "Dynamic";
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentREV.validationGroup = "BlogPostCommentForm-ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00";
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentREV.evaluationfunction = "RegularExpressionValidatorEvaluateIsValid";
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbCommentREV.validationexpression = "^[\\s\\S]{0,3072}$";
var ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_invisibleCaptcha = document.all ? document.all["ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_invisibleCaptcha"] : document.getElementById("ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_invisibleCaptcha");
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_invisibleCaptcha.errormessage = "*";
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_invisibleCaptcha.display = "Dynamic";
ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_invisibleCaptcha.validationGroup = "BlogPostCommentForm-ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00";
//]]>
</script>

<script type="text/javascript">
// <![CDATA[
ctl00_content_ctl00 = new ContentFragmentPageCustomCallback('ctl00_content_ctl00',new Function('mode','parameters','callback','errorCallback','context','ctl00_content_ctl00_ctl00._doCallback(mode+\':\'+parameters,callback,context,errorCallback);'));
// ]]>
</script>
<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
<rdf:Description
rdf:about="http://blogs.msdn.com/b/carlnol/archive/2013/12/02/managing-your-hdinsight-cluster-and-net-job-submissions.aspx"
dc:identifier="http://blogs.msdn.com/b/carlnol/archive/2013/12/02/managing-your-hdinsight-cluster-and-net-job-submissions.aspx"
dc:title="Managing Your HDInsight Cluster and .Net Job Submissions using PowerShell"
trackback:ping="http://blogs.msdn.com/b/carlnol/trackback.ashx?WeblogPostID=10473106" />
</rdf:RDF>
-->
<script type="text/javascript">
// <![CDATA[
Telligent_Modal.Configure('\/utility\/loading.htm',['modal'],['modal-title','modal-title-2','modal-title-3','modal-title-4'],['modal-close'],['modal-content','modal-content-2'],['modal-footer','modal-footer-2','modal-footer-3'],['modal-resize'],['modal-mask'],10000,false,true,true);
// ]]>
</script><script type="text/javascript">
// <![CDATA[
window.ctl00_header_fragment_247403541__adbde5_ctl00_ctl00_GroupNavigationPopup = new Telligent_PopupPanel('ctl00_header_fragment_247403541__adbde5_ctl00_ctl00_GroupNavigationPopup','menu group-navigation-content','down',100,null,null,false,'ctl00_header_fragment_247403541__adbde5_ctl00_ctl00_GroupNavigationPopup',new Function('Core_GroupNavigation_MouseOverPopup(ctl00_header_fragment_247403541)'),new Function('Core_GroupNavigation_MouseOutPopup(ctl00_header_fragment_247403541)'));
// ]]>
</script><script type="text/javascript">
// <![CDATA[
window.ctl00_content_ctl00_ctl00 = new Telligent_CallbackManager('ctl00_content_ctl00_ctl00','ctl00$content$ctl00$ctl00','aspnetForm');
// ]]>
</script><script type="text/javascript">
// <![CDATA[
var ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl01=new RateableContentRating('ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl01','ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl01','ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl01_Value', 5, '/Utility/images/', false, 'rating','rating active','rating readonly',['Terrible','Poor','Fair','Average','Good','Excellent'],true,true);
// ]]>
</script>
<script type="text/javascript">
//<![CDATA[

WebForm_InitCallback();//]]>
</script>
<script type="text/javascript">
				// <![CDATA[
				var ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl01_ajax={"SaveRating":function(rating,successFunction,failureFunction){WebForm_DoCallback('ctl00$content$ctl00$w_186965$_adbde5$ctl00$ctl01',rating,successFunction,rating,failureFunction,true)}};
				// ]]>
				</script><script type="text/javascript">
// <![CDATA[
$('#ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_Container input[value="Save"]').attr('onclick','').removeAttr('onclick').click( function(){ try { var tagText = $('#ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_Tags').val(); if (!tagText) return false;var tagList = tagText.replace(';',',').split(','); var isValid = true; for (var i=0,l=tagList.length;i<l;i++) {isValid = /^[ -~]{0,100}$/ig.test(tagList[i]); if (!isValid) { alert(tagList[i] + ' : is not valide'); return false; } }ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01.Save();}catch(ex){ } return false; });
// ]]>
</script>
<script type="text/javascript">
// <![CDATA[
window.ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01 = new Telligent_InlineEditor('ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01','ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_Container',new Function('id', 'p', 'ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_InlineTagEditor.SetInlineEditorPanelAndParameter(id,p);'),new Function('return ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_InlineTagEditor.GetContent();'),new Function('c', 'ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_InlineTagEditor.SetContent(c);'),null,new Function('ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_InlineTagEditor.Focus();'),new Function('w', 'h', 'ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_InlineTagEditor.Resize(w,h);'),300,90);
// ]]>
</script><script type="text/javascript">
// <![CDATA[
var ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_TagEditor = new TagEditor('ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_TagEditor',[['.Net','.Net'],['.Net Programming','.Net Programming'],['Action','Action'],['Array.Parallel','Array.Parallel'],['BAM','BAM'],['Barrier','Barrier'],['Binary Data','Binary Data'],['Binary Streaming','Binary Streaming'],['BizTalk','BizTalk'],['C#','C#'],['C++','C++'],['Char','Char'],['Charting','Charting'],['Console','Console'],['CTE','CTE'],['Custom Task Scheduler','Custom Task Scheduler'],['Data Visualizations','Data Visualizations'],['Distinct','Distinct'],['DMV','DMV'],['Dynamic Operator','Dynamic Operator'],['Extension Methods','Extension Methods'],['F#','F#'],['FSharp','FSharp'],['FSharpChart','FSharpChart'],['Func','Func'],['GetHashCode','GetHashCode'],['Graphing','Graphing'],['Hadoop','Hadoop'],['Hadoop on Azure','Hadoop on Azure'],['Hadoop Streaming','Hadoop Streaming'],['Hadoop.Net','Hadoop.Net'],['HDFS','HDFS'],['HDInsight','HDInsight'],['Heap','Heap'],['Hekaton','Hekaton'],['Hive','Hive'],['Hortonworks Data Platform','Hortonworks Data Platform'],['HTML','HTML'],['ICollection','ICollection'],['IComparer','IComparer'],['IEnumerable','IEnumerable'],['IEqualityComparer','IEqualityComparer'],['Item Templates','Item Templates'],['iTextSharp','iTextSharp'],['Java','Java'],['Joins','Joins'],['JS Console','JS Console'],['Json Serialization','Json Serialization'],['Lazy','Lazy'],['LINQ','LINQ'],['LOB Data','LOB Data'],['Logging','Logging'],['Machine Learning','Machine Learning'],['MapReduce','MapReduce'],['Matrix','Matrix'],['Memory Optimized Tables','Memory Optimized Tables'],['nuget','nuget'],['Open XML SDK','Open XML SDK'],['Parallel Processing','Parallel Processing'],['Partitioning','Partitioning'],['Performance','Performance'],['PLINQ','PLINQ'],['PowerShell','PowerShell'],['PriorityQueue','PriorityQueue'],['Project Templates','Project Templates'],['PSeq','PSeq'],['QuickSort','QuickSort'],['Recommendations','Recommendations'],['Reflection','Reflection'],['Regex','Regex'],['Script File','Script File'],['Seq','Seq'],['Serialization','Serialization'],['Sorting','Sorting'],['SQL Server','SQL Server'],['SQL Server 2014','SQL Server 2014'],['StdErr','StdErr'],['String','String'],['Task','Task'],['Task Parallel Library','Task Parallel Library'],['Testing','Testing'],['Threading','Threading'],['TPL','TPL'],['Tracing','Tracing'],['TSQL','TSQL'],['Vector','Vector'],['Windows Azure','Windows Azure'],['WinForms','WinForms'],['WinHDFS','WinHDFS'],['WPF','WPF'],['XML Streaming','XML Streaming'],['xpath','xpath']],'ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_Tags');
// ]]>
</script><script type="text/javascript">
// <![CDATA[
var ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_InlineTagEditor = new InlineTagEditor('ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_InlineTagEditor','ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01','ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_Container','ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01_Tags');
// ]]>
</script><script type="text/javascript">
// <![CDATA[
window.ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl02 = new Telligent_InlineEditorPanel('ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl02','ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl02','ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl02_State','ctl00_content_ctl00_w_186965__adbde5_ctl00_ctl15_ctl01',false,null,null,null);
// ]]>
</script>
<script type="text/javascript">
//<![CDATA[

var Page_ValidationActive = false;
if (typeof(ValidatorOnLoad) == "function") {
    ValidatorOnLoad();
}

function ValidatorOnSubmit() {
    if (Page_ValidationActive) {
        return ValidatorCommonOnSubmit();
    }
    else {
        return true;
    }
}
        $('#ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_tbComment').autoResize({animate : false,extraSpace : 0,limit : 3000});//]]>
</script>
<script type="text/javascript">
subtext_invisible_captcha_hideFromJavascriptEnabledBrowsers('ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_invisibleCaptcha_subtext_captcha');
</script><script type="text/javascript">
subtext_invisible_captcha_setAnswer(1, 2, 'ctl00_content_ctl00_w_186967__adbde5_ctl00_ctl00_PlaceHolder1_ctl04_bpCommentForm_ctl04_invisibleCaptcha_answer');
</script><script type="text/javascript">
// <![CDATA[
window.ctl00_content_ctl00_w_186968__adbde5_ctl00_ctl00_DelayedFeedbackList = new DelayedContent('ctl00_content_ctl00_w_186968__adbde5_ctl00_ctl00_DelayedFeedbackList','ctl00_content_ctl00_w_186968__adbde5_ctl00_ctl00_DelayedFeedbackList','ctl00_content_ctl00._customCallback(\'fragment-186968\',\'ctl00$content$ctl00$w_186968$_adbde5$ctl00$ctl00$DelayedFeedbackList\',argument,null,callback,null)',true,true,null);
// ]]>
</script></form>
       
    <script type="text/javascript">
        $(window).load(function () {
            $.getScript('http://widgets.membership.s-msft.com/v1/loader.js?brand=msdn&lang=en-US', function () {
            });
        });
    </script>
    
	

<div id="_WEDCSInsertedData" style="display: none;"><iframe id="_msnFrame" src="Managing%20Your%20HDInsight%20Cluster%20and%20.Net%20Job%20Submissions%20using%20PowerShell%20-%20Carl%27s%20Blog%20-%20Site%20Home%20-%20MSDN%20Blogs_files/c_002.gif" style="z-index:-1;height:1px;width:1px;display:none;visibility:hidden;" onload="javascript:MscomBeacon();"></iframe></div></body></html>